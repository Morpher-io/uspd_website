{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"approveAllocation","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"positionNFTAddress","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"deposit","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"initialize","inputs":[{"name":"_stabilizerNFT","type":"address","internalType":"address"},{"name":"_tokenId","type":"uint256","internalType":"uint256"},{"name":"_stETH","type":"address","internalType":"address"},{"name":"_lido","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"lido","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stETH","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerNFTContract","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerOwner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"tokenId","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"unallocatedStETH","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"withdrawUnallocated","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"AllocationApproved","inputs":[{"name":"spender","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"DepositReceived","inputs":[{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Initialized","inputs":[{"name":"version","type":"uint64","indexed":false,"internalType":"uint64"}],"anonymous":false},{"type":"event","name":"WithdrawalCompleted","inputs":[{"name":"recipient","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"DepositFailed","inputs":[]},{"type":"error","name":"ERC20InsufficientAllowance","inputs":[{"name":"spender","type":"address","internalType":"address"},{"name":"allowance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InsufficientBalance","inputs":[{"name":"sender","type":"address","internalType":"address"},{"name":"balance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InvalidApprover","inputs":[{"name":"approver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidReceiver","inputs":[{"name":"receiver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSender","inputs":[{"name":"sender","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSpender","inputs":[{"name":"spender","type":"address","internalType":"address"}]},{"type":"error","name":"InitialDepositFailed","inputs":[]},{"type":"error","name":"InvalidInitialization","inputs":[]},{"type":"error","name":"NotInitializing","inputs":[]},{"type":"error","name":"TransferFailed","inputs":[]},{"type":"error","name":"ZeroAddress","inputs":[]},{"type":"error","name":"ZeroAmount","inputs":[]}],"bytecode":{"object":"0x6080604052348015600e575f5ffd5b5060156019565b60c9565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff161560685760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b039081161460c65780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b610adf806100d65f395ff3fe60806040526004361061008f575f3560e01c8063a901540011610057578063a901540014610146578063bec070d614610165578063c1fe3e4814610183578063d0e30db0146101a2578063ec60b9ab146101aa575f5ffd5b806317d70f7c1461009357806323509a2d146100bb578063358394d8146100f25780634f68ae75146101135780637d0e9bba14610132575b5f5ffd5b34801561009e575f5ffd5b506100a860015481565b6040519081526020015b60405180910390f35b3480156100c6575f5ffd5b506003546100da906001600160a01b031681565b6040516001600160a01b0390911681526020016100b2565b3480156100fd575f5ffd5b5061011161010c366004610985565b6101be565b005b34801561011e575f5ffd5b5061011161012d3660046109d5565b610354565b34801561013d575f5ffd5b506100da610527565b348015610151575f5ffd5b50610111610160366004610a03565b6105a0565b348015610170575f5ffd5b505f546100da906001600160a01b031681565b34801561018e575f5ffd5b506002546100da906001600160a01b031681565b610111610800565b3480156101b5575f5ffd5b506100a8610904565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff165f811580156102035750825b90505f8267ffffffffffffffff16600114801561021f5750303b155b90508115801561022d575080155b1561024b5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561027557845460ff60401b1916600160401b1785555b6001600160a01b038916158061029257506001600160a01b038716155b806102a457506001600160a01b038616155b156102c25760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a84169083161790556003805492891692909116919091179055831561034957845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146103865760405162461bcd60e51b815260040161037d90610a1a565b60405180910390fd5b815f036103a657604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166103cd5760405163d92e233d60e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610413573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104379190610a51565b90508083111561046a5760405163391434e360e21b8152306004820152602481018290526044810184905260640161037d565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156104ba573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104de9190610a68565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161051a91815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e9161055c9160040190815260200190565b602060405180830381865afa158015610577573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a8e565b905090565b5f546001600160a01b031633146105c95760405162461bcd60e51b815260040161037d90610a1a565b805f036105e957604051631f2a200560e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561062f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106539190610a51565b9050808211156106865760405163391434e360e21b8152306004820152602481018290526044810183905260640161037d565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106bb9160040190815260200190565b602060405180830381865afa1580156106d6573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106fa9190610a8e565b90506001600160a01b0381166107235760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af1158015610773573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107979190610a68565b9050806107b7576040516312171d8360e31b815260040160405180910390fd5b816001600160a01b03167f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c4856040516107f291815260200190565b60405180910390a250505050565b5f546001600160a01b031633146108295760405162461bcd60e51b815260040161037d90610a1a565b345f0361084957604051631f2a200560e01b815260040160405180910390fd5b60035460405163a1903eab60e01b81525f60048201526001600160a01b039091169063a1903eab90349060240160206040518083038185885af1935050505080156108b1575060408051601f3d908101601f191682019092526108ae91810190610a51565b60015b6108ce576040516379cacff160e01b815260040160405180910390fd5b506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a1565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561094a573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a51565b6001600160a01b0381168114610982575f5ffd5b50565b5f5f5f5f60808587031215610998575f5ffd5b84356109a38161096e565b93506020850135925060408501356109ba8161096e565b915060608501356109ca8161096e565b939692955090935050565b5f5f604083850312156109e6575f5ffd5b8235915060208301356109f88161096e565b809150509250929050565b5f60208284031215610a13575f5ffd5b5035919050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b5f60208284031215610a61575f5ffd5b5051919050565b5f60208284031215610a78575f5ffd5b81518015158114610a87575f5ffd5b9392505050565b5f60208284031215610a9e575f5ffd5b8151610a878161096e56fea26469706673582212203b28822c9cb9ec0c46b14dcb84a2faf6c2ea59d9617513a6307812517edbc04364736f6c634300081d0033","sourceMap":"685:6299:77:-:0;;;1830:97;;;;;;;;;-1:-1:-1;1854:22:77;:20;:22::i;:::-;685:6299;;7711:422:20;3147:66;7900:15;;;;;;;7896:76;;;7938:23;;-1:-1:-1;;;7938:23:20;;;;;;;;;;;7896:76;7985:14;;-1:-1:-1;;;;;7985:14:20;;;:34;7981:146;;8035:33;;-1:-1:-1;;;;;;8035:33:20;-1:-1:-1;;;;;8035:33:20;;;;;8087:29;;158:50:99;;;8087:29:20;;146:2:99;131:18;8087:29:20;;;;;;;7981:146;7760:373;7711:422::o;14:200:99:-;685:6299:77;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361061008f575f3560e01c8063a901540011610057578063a901540014610146578063bec070d614610165578063c1fe3e4814610183578063d0e30db0146101a2578063ec60b9ab146101aa575f5ffd5b806317d70f7c1461009357806323509a2d146100bb578063358394d8146100f25780634f68ae75146101135780637d0e9bba14610132575b5f5ffd5b34801561009e575f5ffd5b506100a860015481565b6040519081526020015b60405180910390f35b3480156100c6575f5ffd5b506003546100da906001600160a01b031681565b6040516001600160a01b0390911681526020016100b2565b3480156100fd575f5ffd5b5061011161010c366004610985565b6101be565b005b34801561011e575f5ffd5b5061011161012d3660046109d5565b610354565b34801561013d575f5ffd5b506100da610527565b348015610151575f5ffd5b50610111610160366004610a03565b6105a0565b348015610170575f5ffd5b505f546100da906001600160a01b031681565b34801561018e575f5ffd5b506002546100da906001600160a01b031681565b610111610800565b3480156101b5575f5ffd5b506100a8610904565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff165f811580156102035750825b90505f8267ffffffffffffffff16600114801561021f5750303b155b90508115801561022d575080155b1561024b5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561027557845460ff60401b1916600160401b1785555b6001600160a01b038916158061029257506001600160a01b038716155b806102a457506001600160a01b038616155b156102c25760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a84169083161790556003805492891692909116919091179055831561034957845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146103865760405162461bcd60e51b815260040161037d90610a1a565b60405180910390fd5b815f036103a657604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166103cd5760405163d92e233d60e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610413573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104379190610a51565b90508083111561046a5760405163391434e360e21b8152306004820152602481018290526044810184905260640161037d565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156104ba573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104de9190610a68565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161051a91815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e9161055c9160040190815260200190565b602060405180830381865afa158015610577573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a8e565b905090565b5f546001600160a01b031633146105c95760405162461bcd60e51b815260040161037d90610a1a565b805f036105e957604051631f2a200560e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561062f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106539190610a51565b9050808211156106865760405163391434e360e21b8152306004820152602481018290526044810183905260640161037d565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106bb9160040190815260200190565b602060405180830381865afa1580156106d6573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106fa9190610a8e565b90506001600160a01b0381166107235760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af1158015610773573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107979190610a68565b9050806107b7576040516312171d8360e31b815260040160405180910390fd5b816001600160a01b03167f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c4856040516107f291815260200190565b60405180910390a250505050565b5f546001600160a01b031633146108295760405162461bcd60e51b815260040161037d90610a1a565b345f0361084957604051631f2a200560e01b815260040160405180910390fd5b60035460405163a1903eab60e01b81525f60048201526001600160a01b039091169063a1903eab90349060240160206040518083038185885af1935050505080156108b1575060408051601f3d908101601f191682019092526108ae91810190610a51565b60015b6108ce576040516379cacff160e01b815260040160405180910390fd5b506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a1565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561094a573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a51565b6001600160a01b0381168114610982575f5ffd5b50565b5f5f5f5f60808587031215610998575f5ffd5b84356109a38161096e565b93506020850135925060408501356109ba8161096e565b915060608501356109ca8161096e565b939692955090935050565b5f5f604083850312156109e6575f5ffd5b8235915060208301356109f88161096e565b809150509250929050565b5f60208284031215610a13575f5ffd5b5035919050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b5f60208284031215610a61575f5ffd5b5051919050565b5f60208284031215610a78575f5ffd5b81518015158114610a87575f5ffd5b9392505050565b5f60208284031215610a9e575f5ffd5b8151610a878161096e56fea26469706673582212203b28822c9cb9ec0c46b14dcb84a2faf6c2ea59d9617513a6307812517edbc04364736f6c634300081d0033","sourceMap":"685:6299:77:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1225:22;;;;;;;;;;;;;;;;;;;160:25:99;;;148:2;133:18;1225:22:77;;;;;;;;1475:19;;;;;;;;;;-1:-1:-1;1475:19:77;;;;-1:-1:-1;;;;;1475:19:77;;;;;;-1:-1:-1;;;;;360:32:99;;;342:51;;330:2;315:18;1475:19:77;196:203:99;2412:1308:77;;;;;;;;;;-1:-1:-1;2412:1308:77;;;;;:::i;:::-;;:::i;:::-;;4565:586;;;;;;;;;;-1:-1:-1;4565:586:77;;;;;:::i;:::-;;:::i;6852:130::-;;;;;;;;;;;;;:::i;5531:898::-;;;;;;;;;;-1:-1:-1;5531:898:77;;;;;:::i;:::-;;:::i;1140:36::-;;;;;;;;;;-1:-1:-1;1140:36:77;;;;-1:-1:-1;;;;;1140:36:77;;;1392:20;;;;;;;;;;-1:-1:-1;1392:20:77;;;;-1:-1:-1;;;;;1392:20:77;;;3933:328;;;:::i;6715:131::-;;;;;;;;;;;;;:::i;2412:1308::-;3147:66:20;4302:15;;-1:-1:-1;;;4302:15:20;;;;4301:16;;4348:14;;4158:30;4726:16;;:34;;;;;4746:14;4726:34;4706:54;;4770:17;4790:11;:16;;4805:1;4790:16;:50;;;;-1:-1:-1;4818:4:20;4810:25;:30;4790:50;4770:70;;4856:12;4855:13;:30;;;;;4873:12;4872:13;4855:30;4851:91;;;4908:23;;-1:-1:-1;;;4908:23:20;;;;;;;;;;;4851:91;4951:18;;-1:-1:-1;;4951:18:20;4968:1;4951:18;;;4979:67;;;;5013:22;;-1:-1:-1;;;;5013:22:20;-1:-1:-1;;;5013:22:20;;;4979:67;-1:-1:-1;;;;;2760:28:77;::::1;::::0;;:52:::1;;-1:-1:-1::0;;;;;;2792:20:77;::::1;::::0;2760:52:::1;:75;;;-1:-1:-1::0;;;;;;2816:19:77;::::1;::::0;2760:75:::1;2756:126;;;2858:13;;-1:-1:-1::0;;;2858:13:77::1;;;;;;;;;;;2756:126;3061:21;:38:::0;;-1:-1:-1;;;;;3061:38:77;;::::1;-1:-1:-1::0;;;;;;3061:38:77;;::::1;;::::0;;;;3109:18;;;3194:5:::1;:14:::0;;;;::::1;::::0;;::::1;;::::0;;3218:4:::1;:12:::0;;;;::::1;::::0;;;::::1;::::0;;;::::1;::::0;;5066:101:20;;;;5100:23;;-1:-1:-1;;;;5100:23:20;;;5142:14;;-1:-1:-1;1951:50:99;;5142:14:20;;1939:2:99;1924:18;5142:14:20;;;;;;;5066:101;4092:1081;;;;;2412:1308:77;;;;:::o;4565:586::-;1693:21;;-1:-1:-1;;;;;1693:21:77;1679:10;:35;1675:78;;1716:37;;-1:-1:-1;;;1716:37:77;;;;;;;:::i;:::-;;;;;;;;1675:78;4677:6:::1;4687:1;4677:11:::0;4673:36:::1;;4697:12;;-1:-1:-1::0;;;4697:12:77::1;;;;;;;;;;;4673:36;-1:-1:-1::0;;;;;4723:32:77;::::1;4719:58;;4764:13;;-1:-1:-1::0;;;4764:13:77::1;;;;;;;;;;;4719:58;4820:5;::::0;4813:38:::1;::::0;-1:-1:-1;;;4813:38:77;;4845:4:::1;4813:38;::::0;::::1;342:51:99::0;4788:22:77::1;::::0;-1:-1:-1;;;;;4820:5:77::1;::::0;4813:23:::1;::::0;315:18:99;;4813:38:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4788:63;;4874:14;4865:6;:23;4861:99;;;4897:63;::::0;-1:-1:-1;;;4897:63:77;;4930:4:::1;4897:63;::::0;::::1;2759:51:99::0;2826:18;;;2819:34;;;2869:18;;;2862:34;;;2732:18;;4897:63:77::1;2557:345:99::0;4861:99:77::1;5027:5;::::0;5020:49:::1;::::0;-1:-1:-1;;;5020:49:77;;-1:-1:-1;;;;;3099:32:99;;;5020:49:77::1;::::0;::::1;3081:51:99::0;3148:18;;;3141:34;;;5027:5:77;;::::1;::::0;5020:21:::1;::::0;3054:18:99;;5020:49:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;5103:18;-1:-1:-1::0;;;;;5084:46:77::1;;5123:6;5084:46;;;;160:25:99::0;;148:2;133:18;;14:177;5084:46:77::1;;;;;;;;4663:488;4565:586:::0;;:::o;6852:130::-;6902:7;6936:21;;;6967:7;6928:47;;-1:-1:-1;;;6928:47:77;;-1:-1:-1;;;;;6936:21:77;;;;6928:38;;:47;;;;160:25:99;;;148:2;133:18;;14:177;6928:47:77;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6921:54;;6852:130;:::o;5531:898::-;1693:21;;-1:-1:-1;;;;;1693:21:77;1679:10;:35;1675:78;;1716:37;;-1:-1:-1;;;1716:37:77;;;;;;;:::i;1675:78::-;5617:6:::1;5627:1;5617:11:::0;5613:36:::1;;5637:12;;-1:-1:-1::0;;;5637:12:77::1;;;;;;;;;;;5613:36;5691:5;::::0;5684:38:::1;::::0;-1:-1:-1;;;5684:38:77;;5716:4:::1;5684:38;::::0;::::1;342:51:99::0;5659:22:77::1;::::0;-1:-1:-1;;;;;5691:5:77::1;::::0;5684:23:::1;::::0;315:18:99;;5684:38:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5659:63;;5745:14;5736:6;:23;5732:99;;;5768:63;::::0;-1:-1:-1;;;5768:63:77;;5801:4:::1;5768:63;::::0;::::1;2759:51:99::0;2826:18;;;2819:34;;;2869:18;;;2862:34;;;2732:18;;5768:63:77::1;2557:345:99::0;5732:99:77::1;5934:20;5965:21:::0;;;5996:7;5957:47:::1;::::0;-1:-1:-1;;;5957:47:77;;-1:-1:-1;;;;;5965:21:77;;::::1;::::0;5957:38:::1;::::0;:47:::1;::::0;::::1;;160:25:99::0;;;148:2;133:18;;14:177;5957:47:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5934:70:::0;-1:-1:-1;;;;;;6040:26:77;::::1;6036:52;;6075:13;;-1:-1:-1::0;;;6075:13:77::1;;;;;;;;;;;6036:52;6205:5;::::0;6198:44:::1;::::0;-1:-1:-1;;;6198:44:77;;-1:-1:-1;;;;;3099:32:99;;;6198:44:77::1;::::0;::::1;3081:51:99::0;3148:18;;;3141:34;;;6183:12:77::1;::::0;6205:5:::1;::::0;6198:22:::1;::::0;3054:18:99;;6198:44:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6183:59;;6257:7;6252:37;;6273:16;;-1:-1:-1::0;;;6273:16:77::1;;;;;;;;;;;6252:37;6401:12;-1:-1:-1::0;;;;;6381:41:77::1;;6415:6;6381:41;;;;160:25:99::0;;148:2;133:18;;14:177;6381:41:77::1;;;;;;;;5603:826;;;5531:898:::0;:::o;3933:328::-;1693:21;;-1:-1:-1;;;;;1693:21:77;1679:10;:35;1675:78;;1716:37;;-1:-1:-1;;;1716:37:77;;;;;;;:::i;1675:78::-;4001:9:::1;4014:1;4001:14:::0;3997:39:::1;;4024:12;;-1:-1:-1::0;;;4024:12:77::1;;;;;;;;;;;3997:39;4089:4;::::0;4083:48:::1;::::0;-1:-1:-1;;;4083:48:77;;4089:4:::1;4083:48;::::0;::::1;342:51:99::0;-1:-1:-1;;;;;4089:4:77;;::::1;::::0;4083:18:::1;::::0;4109:9:::1;::::0;315:18:99;;4083:48:77::1;;;;;;;;;;;;;;;;;;;;-1:-1:-1::0;4083:48:77::1;::::0;;::::1;;::::0;;::::1;-1:-1:-1::0;;4083:48:77::1;::::0;::::1;::::0;;;::::1;::::0;;::::1;::::0;::::1;:::i;:::-;;;4079:117;;4170:15;;-1:-1:-1::0;;;4170:15:77::1;;;;;;;;;;;4079:117;-1:-1:-1::0;4210:26:77::1;::::0;4226:9:::1;160:25:99::0;;4210:26:77::1;::::0;148:2:99;133:18;4210:26:77::1;;;;;;;3933:328::o:0;6715:131::-;6808:5;;6801:38;;-1:-1:-1;;;6801:38:77;;6833:4;6801:38;;;342:51:99;6775:7:77;;-1:-1:-1;;;;;6808:5:77;;6801:23;;315:18:99;;6801:38:77;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;404:131:99:-;-1:-1:-1;;;;;479:31:99;;469:42;;459:70;;525:1;522;515:12;459:70;404:131;:::o;540:650::-;626:6;634;642;650;703:3;691:9;682:7;678:23;674:33;671:53;;;720:1;717;710:12;671:53;759:9;746:23;778:31;803:5;778:31;:::i;:::-;828:5;-1:-1:-1;906:2:99;891:18;;878:32;;-1:-1:-1;988:2:99;973:18;;960:32;1001:33;960:32;1001:33;:::i;:::-;1053:7;-1:-1:-1;1112:2:99;1097:18;;1084:32;1125:33;1084:32;1125:33;:::i;:::-;540:650;;;;-1:-1:-1;540:650:99;;-1:-1:-1;;540:650:99:o;1195:367::-;1263:6;1271;1324:2;1312:9;1303:7;1299:23;1295:32;1292:52;;;1340:1;1337;1330:12;1292:52;1385:23;;;-1:-1:-1;1484:2:99;1469:18;;1456:32;1497:33;1456:32;1497:33;:::i;:::-;1549:7;1539:17;;;1195:367;;;;;:::o;1567:226::-;1626:6;1679:2;1667:9;1658:7;1654:23;1650:32;1647:52;;;1695:1;1692;1685:12;1647:52;-1:-1:-1;1740:23:99;;1567:226;-1:-1:-1;1567:226:99:o;2012:351::-;2214:2;2196:21;;;2253:2;2233:18;;;2226:30;2292:29;2287:2;2272:18;;2265:57;2354:2;2339:18;;2012:351::o;2368:184::-;2438:6;2491:2;2479:9;2470:7;2466:23;2462:32;2459:52;;;2507:1;2504;2497:12;2459:52;-1:-1:-1;2530:16:99;;2368:184;-1:-1:-1;2368:184:99:o;3186:277::-;3253:6;3306:2;3294:9;3285:7;3281:23;3277:32;3274:52;;;3322:1;3319;3312:12;3274:52;3354:9;3348:16;3407:5;3400:13;3393:21;3386:5;3383:32;3373:60;;3429:1;3426;3419:12;3373:60;3452:5;3186:277;-1:-1:-1;;;3186:277:99:o;3468:251::-;3538:6;3591:2;3579:9;3570:7;3566:23;3562:32;3559:52;;;3607:1;3604;3597:12;3559:52;3639:9;3633:16;3658:31;3683:5;3658:31;:::i","linkReferences":{}},"methodIdentifiers":{"approveAllocation(uint256,address)":"4f68ae75","deposit()":"d0e30db0","initialize(address,uint256,address,address)":"358394d8","lido()":"23509a2d","stETH()":"c1fe3e48","stabilizerNFTContract()":"bec070d6","stabilizerOwner()":"7d0e9bba","tokenId()":"17d70f7c","unallocatedStETH()":"ec60b9ab","withdrawUnallocated(uint256)":"a9015400"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.29+commit.ab55807c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"DepositFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"allowance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientAllowance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientBalance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"approver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidApprover\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidReceiver\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSender\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSpender\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InitialDepositFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidInitialization\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotInitializing\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TransferFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAmount\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"AllocationApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"DepositReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"version\",\"type\":\"uint64\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawalCompleted\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"positionNFTAddress\",\"type\":\"address\"}],\"name\":\"approveAllocation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stabilizerNFT\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_stETH\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_lido\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lido\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerNFTContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tokenId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unallocatedStETH\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawUnallocated\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone.\",\"errors\":{\"ERC20InsufficientAllowance(address,uint256,uint256)\":[{\"details\":\"Indicates a failure with the `spender`\\u2019s `allowance`. Used in transfers.\",\"params\":{\"allowance\":\"Amount of tokens a `spender` is allowed to operate with.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"ERC20InsufficientBalance(address,uint256,uint256)\":[{\"details\":\"Indicates an error related to the current `balance` of a `sender`. Used in transfers.\",\"params\":{\"balance\":\"Current balance for the interacting account.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidApprover(address)\":[{\"details\":\"Indicates a failure with the `approver` of a token to be approved. Used in approvals.\",\"params\":{\"approver\":\"Address initiating an approval operation.\"}}],\"ERC20InvalidReceiver(address)\":[{\"details\":\"Indicates a failure with the token `receiver`. Used in transfers.\",\"params\":{\"receiver\":\"Address to which tokens are being transferred.\"}}],\"ERC20InvalidSender(address)\":[{\"details\":\"Indicates a failure with the token `sender`. Used in transfers.\",\"params\":{\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidSpender(address)\":[{\"details\":\"Indicates a failure with the `spender` to be approved. Used in approvals.\",\"params\":{\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"InvalidInitialization()\":[{\"details\":\"The contract is already initialized.\"}],\"NotInitializing()\":[{\"details\":\"The contract is not initializing.\"}]},\"events\":{\"Initialized(uint64)\":{\"details\":\"Triggered when the contract has been initialized or reinitialized.\"}},\"kind\":\"dev\",\"methods\":{\"approveAllocation(uint256,address)\":{\"details\":\"Callable only by StabilizerNFT. Checks for sufficient balance.\",\"params\":{\"amount\":\"The amount of stETH to approve.\",\"positionNFTAddress\":\"The address of the PositionNFT contract.\"}},\"constructor\":{\"custom:oz-upgrades-unsafe-allow\":\"constructor\"},\"deposit()\":{\"details\":\"Stakes the received ETH into stETH. Callable only by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"details\":\"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.\",\"params\":{\"_lido\":\"The address of the Lido staking pool.\",\"_stETH\":\"The address of the stETH token.\",\"_stabilizerNFT\":\"The address of the controlling StabilizerNFT contract.\",\"_tokenId\":\"The ID of the Stabilizer NFT this escrow is associated with.\"}},\"unallocatedStETH()\":{\"details\":\"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\",\"returns\":{\"_0\":\"The amount of stETH held by the escrow.\"}},\"withdrawUnallocated(uint256)\":{\"details\":\"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.\",\"params\":{\"amount\":\"The amount of stETH to withdraw.\"}}},\"title\":\"StabilizerEscrow\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"approveAllocation(uint256,address)\":{\"notice\":\"Approves the PositionNFT contract to spend stETH for allocation.\"},\"deposit()\":{\"notice\":\"Receives additional ETH deposits forwarded by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"notice\":\"Initializes the escrow contract state.\"},\"unallocatedStETH()\":{\"notice\":\"Returns the current stETH balance of this contract.\"},\"withdrawUnallocated(uint256)\":{\"notice\":\"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\"}},\"notice\":\"A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/StabilizerEscrow.sol\":\"StabilizerEscrow\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":chainlink/=lib/chainlink/\",\":createx/=lib/createx/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/\",\":solady/=lib/createx/lib/solady/src/\",\":uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/\",\":uniswap-v3-core/=lib/uniswap-v3-core/\"]},\"sources\":{\"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol\":{\"keccak256\":\"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b\",\"dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3\"]},\"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol\":{\"keccak256\":\"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b\",\"dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11\",\"dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621\",\"dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL\"]},\"src/StabilizerEscrow.sol\":{\"keccak256\":\"0x06b8e1e76c744ef24bb97095c544e1e001c1dd2fd7dd5e930f8fb24b292e0010\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://04bfb87f9005a0c5087c11bab687e94280e38cb87ea3b4fd9bd13781d5fc0567\",\"dweb:/ipfs/Qme124gn6RYSoui9pNExmTm2vskuuhkXei9LXRuFhfv4ko\"]},\"src/interfaces/ILido.sol\":{\"keccak256\":\"0xe68a9c3f4289f780bd1eb37026c20ac4ace931b5ec7bb56a44eba42335408519\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1dd52a77e2aaa98f49932384ca3df586aa449f4d4904f17957bea0a46271c248\",\"dweb:/ipfs/QmNgzKPFbnDazJnjdkGFW8EDCRHNJDAeG7nYaVxE6tkHkH\"]},\"src/interfaces/IStabilizerEscrow.sol\":{\"keccak256\":\"0x310cc18f6b6bba87035cd3ad2ebea43454438dda4f43093e76de148014a485a1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0bcb790503d3aa252bed567077c145a6e03508b8306d0dda8c8eccdc3a6b28a2\",\"dweb:/ipfs/QmSyouc72Hu6jNZBcVsnwMKvk5FBL6rSzLAF947pwP1uQc\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.29+commit.ab55807c"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"DepositFailed"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientAllowance"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientBalance"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"type":"error","name":"ERC20InvalidApprover"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"type":"error","name":"ERC20InvalidReceiver"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"type":"error","name":"ERC20InvalidSender"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"type":"error","name":"ERC20InvalidSpender"},{"inputs":[],"type":"error","name":"InitialDepositFailed"},{"inputs":[],"type":"error","name":"InvalidInitialization"},{"inputs":[],"type":"error","name":"NotInitializing"},{"inputs":[],"type":"error","name":"TransferFailed"},{"inputs":[],"type":"error","name":"ZeroAddress"},{"inputs":[],"type":"error","name":"ZeroAmount"},{"inputs":[{"internalType":"address","name":"spender","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"AllocationApproved","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"DepositReceived","anonymous":false},{"inputs":[{"internalType":"uint64","name":"version","type":"uint64","indexed":false}],"type":"event","name":"Initialized","anonymous":false},{"inputs":[{"internalType":"address","name":"recipient","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"WithdrawalCompleted","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"positionNFTAddress","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"approveAllocation"},{"inputs":[],"stateMutability":"payable","type":"function","name":"deposit"},{"inputs":[{"internalType":"address","name":"_stabilizerNFT","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"_stETH","type":"address"},{"internalType":"address","name":"_lido","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"initialize"},{"inputs":[],"stateMutability":"view","type":"function","name":"lido","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stETH","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerNFTContract","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerOwner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"tokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"unallocatedStETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"withdrawUnallocated"}],"devdoc":{"kind":"dev","methods":{"approveAllocation(uint256,address)":{"details":"Callable only by StabilizerNFT. Checks for sufficient balance.","params":{"amount":"The amount of stETH to approve.","positionNFTAddress":"The address of the PositionNFT contract."}},"constructor":{"custom:oz-upgrades-unsafe-allow":"constructor"},"deposit()":{"details":"Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"initialize(address,uint256,address,address)":{"details":"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.","params":{"_lido":"The address of the Lido staking pool.","_stETH":"The address of the stETH token.","_stabilizerNFT":"The address of the controlling StabilizerNFT contract.","_tokenId":"The ID of the Stabilizer NFT this escrow is associated with."}},"unallocatedStETH()":{"details":"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.","returns":{"_0":"The amount of stETH held by the escrow."}},"withdrawUnallocated(uint256)":{"details":"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.","params":{"amount":"The amount of stETH to withdraw."}}},"version":1},"userdoc":{"kind":"user","methods":{"approveAllocation(uint256,address)":{"notice":"Approves the PositionNFT contract to spend stETH for allocation."},"deposit()":{"notice":"Receives additional ETH deposits forwarded by StabilizerNFT."},"initialize(address,uint256,address,address)":{"notice":"Initializes the escrow contract state."},"unallocatedStETH()":{"notice":"Returns the current stETH balance of this contract."},"withdrawUnallocated(uint256)":{"notice":"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","chainlink/=lib/chainlink/","createx/=lib/createx/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/","solady/=lib/createx/lib/solady/src/","uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/","uniswap-v3-core/=lib/uniswap-v3-core/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/StabilizerEscrow.sol":"StabilizerEscrow"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol":{"keccak256":"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a","urls":["bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b","dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol":{"keccak256":"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b","urls":["bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b","dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol":{"keccak256":"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261","urls":["bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11","dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8","urls":["bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621","dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL"],"license":"MIT"},"src/StabilizerEscrow.sol":{"keccak256":"0x06b8e1e76c744ef24bb97095c544e1e001c1dd2fd7dd5e930f8fb24b292e0010","urls":["bzz-raw://04bfb87f9005a0c5087c11bab687e94280e38cb87ea3b4fd9bd13781d5fc0567","dweb:/ipfs/Qme124gn6RYSoui9pNExmTm2vskuuhkXei9LXRuFhfv4ko"],"license":"MIT"},"src/interfaces/ILido.sol":{"keccak256":"0xe68a9c3f4289f780bd1eb37026c20ac4ace931b5ec7bb56a44eba42335408519","urls":["bzz-raw://1dd52a77e2aaa98f49932384ca3df586aa449f4d4904f17957bea0a46271c248","dweb:/ipfs/QmNgzKPFbnDazJnjdkGFW8EDCRHNJDAeG7nYaVxE6tkHkH"],"license":"MIT"},"src/interfaces/IStabilizerEscrow.sol":{"keccak256":"0x310cc18f6b6bba87035cd3ad2ebea43454438dda4f43093e76de148014a485a1","urls":["bzz-raw://0bcb790503d3aa252bed567077c145a6e03508b8306d0dda8c8eccdc3a6b28a2","dweb:/ipfs/QmSyouc72Hu6jNZBcVsnwMKvk5FBL6rSzLAF947pwP1uQc"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":54023,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stabilizerNFTContract","offset":0,"slot":"0","type":"t_address"},{"astId":54025,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"tokenId","offset":0,"slot":"1","type":"t_uint256"},{"astId":54027,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stETH","offset":0,"slot":"2","type":"t_address"},{"astId":54029,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"lido","offset":0,"slot":"3","type":"t_address"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}},"ast":{"absolutePath":"src/StabilizerEscrow.sol","id":54326,"exportedSymbols":{"IERC165":[47119],"IERC20":[43805],"IERC20Errors":[42340],"IERC721":[44138],"ILido":[58699],"IStabilizerEscrow":[59070],"Initializable":[39723],"StabilizerEscrow":[54325]},"nodeType":"SourceUnit","src":"32:6953:77","nodes":[{"id":54000,"nodeType":"PragmaDirective","src":"32:24:77","nodes":[],"literals":["solidity","^","0.8",".20"]},{"id":54001,"nodeType":"ImportDirective","src":"58:72:77","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","nameLocation":"-1:-1:-1","scope":54326,"sourceUnit":43806,"symbolAliases":[],"unitAlias":""},{"id":54002,"nodeType":"ImportDirective","src":"131:74:77","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","nameLocation":"-1:-1:-1","scope":54326,"sourceUnit":44139,"symbolAliases":[],"unitAlias":""},{"id":54004,"nodeType":"ImportDirective","src":"206:112:77","nodes":[],"absolutePath":"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","file":"../lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","nameLocation":"-1:-1:-1","scope":54326,"sourceUnit":39724,"symbolAliases":[{"foreign":{"id":54003,"name":"Initializable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39723,"src":"214:13:77","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":54005,"nodeType":"ImportDirective","src":"347:32:77","nodes":[],"absolutePath":"src/interfaces/ILido.sol","file":"./interfaces/ILido.sol","nameLocation":"-1:-1:-1","scope":54326,"sourceUnit":58700,"symbolAliases":[],"unitAlias":""},{"id":54006,"nodeType":"ImportDirective","src":"380:44:77","nodes":[],"absolutePath":"src/interfaces/IStabilizerEscrow.sol","file":"./interfaces/IStabilizerEscrow.sol","nameLocation":"-1:-1:-1","scope":54326,"sourceUnit":59071,"symbolAliases":[],"unitAlias":""},{"id":54325,"nodeType":"ContractDefinition","src":"685:6299:77","nodes":[{"id":54013,"nodeType":"ErrorDefinition","src":"804:20:77","nodes":[],"errorSelector":"d92e233d","name":"ZeroAddress","nameLocation":"810:11:77","parameters":{"id":54012,"nodeType":"ParameterList","parameters":[],"src":"821:2:77"}},{"id":54015,"nodeType":"ErrorDefinition","src":"829:19:77","nodes":[],"errorSelector":"1f2a2005","name":"ZeroAmount","nameLocation":"835:10:77","parameters":{"id":54014,"nodeType":"ParameterList","parameters":[],"src":"845:2:77"}},{"id":54017,"nodeType":"ErrorDefinition","src":"939:29:77","nodes":[],"errorSelector":"4a76da80","name":"InitialDepositFailed","nameLocation":"945:20:77","parameters":{"id":54016,"nodeType":"ParameterList","parameters":[],"src":"965:2:77"}},{"id":54019,"nodeType":"ErrorDefinition","src":"1053:22:77","nodes":[],"errorSelector":"79cacff1","name":"DepositFailed","nameLocation":"1059:13:77","parameters":{"id":54018,"nodeType":"ParameterList","parameters":[],"src":"1072:2:77"}},{"id":54021,"nodeType":"ErrorDefinition","src":"1080:23:77","nodes":[],"errorSelector":"90b8ec18","name":"TransferFailed","nameLocation":"1086:14:77","parameters":{"id":54020,"nodeType":"ParameterList","parameters":[],"src":"1100:2:77"}},{"id":54023,"nodeType":"VariableDeclaration","src":"1140:36:77","nodes":[],"baseFunctions":[59033],"constant":false,"functionSelector":"bec070d6","mutability":"mutable","name":"stabilizerNFTContract","nameLocation":"1155:21:77","scope":54325,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54022,"name":"address","nodeType":"ElementaryTypeName","src":"1140:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":54025,"nodeType":"VariableDeclaration","src":"1225:22:77","nodes":[],"constant":false,"functionSelector":"17d70f7c","mutability":"mutable","name":"tokenId","nameLocation":"1240:7:77","scope":54325,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54024,"name":"uint256","nodeType":"ElementaryTypeName","src":"1225:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":54027,"nodeType":"VariableDeclaration","src":"1392:20:77","nodes":[],"baseFunctions":[59043],"constant":false,"functionSelector":"c1fe3e48","mutability":"mutable","name":"stETH","nameLocation":"1407:5:77","scope":54325,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54026,"name":"address","nodeType":"ElementaryTypeName","src":"1392:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":54029,"nodeType":"VariableDeclaration","src":"1475:19:77","nodes":[],"baseFunctions":[59048],"constant":false,"functionSelector":"23509a2d","mutability":"mutable","name":"lido","nameLocation":"1490:4:77","scope":54325,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54028,"name":"address","nodeType":"ElementaryTypeName","src":"1475:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":54042,"nodeType":"ModifierDefinition","src":"1636:135:77","nodes":[],"body":{"id":54041,"nodeType":"Block","src":"1665:106:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54034,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":54031,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"1679:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54032,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1683:6:77","memberName":"sender","nodeType":"MemberAccess","src":"1679:10:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":54033,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54023,"src":"1693:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"1679:35:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54039,"nodeType":"IfStatement","src":"1675:78:77","trueBody":{"expression":{"arguments":[{"hexValue":"43616c6c6572206973206e6f742053746162696c697a65724e4654","id":54036,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1723:29:77","typeDescriptions":{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""},"value":"Caller is not StabilizerNFT"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""}],"id":54035,"name":"revert","nodeType":"Identifier","overloadedDeclarations":[-19,-19],"referencedDeclaration":-19,"src":"1716:6:77","typeDescriptions":{"typeIdentifier":"t_function_revert_pure$_t_string_memory_ptr_$returns$__$","typeString":"function (string memory) pure"}},"id":54037,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1716:37:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54038,"nodeType":"ExpressionStatement","src":"1716:37:77"}},{"id":54040,"nodeType":"PlaceholderStatement","src":"1763:1:77"}]},"name":"onlyStabilizerNFT","nameLocation":"1645:17:77","parameters":{"id":54030,"nodeType":"ParameterList","parameters":[],"src":"1662:2:77"},"virtual":false,"visibility":"internal"},{"id":54050,"nodeType":"FunctionDefinition","src":"1830:97:77","nodes":[],"body":{"id":54049,"nodeType":"Block","src":"1844:83:77","nodes":[],"statements":[{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":54046,"name":"_disableInitializers","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39677,"src":"1854:20:77","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":54047,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1854:22:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54048,"nodeType":"ExpressionStatement","src":"1854:22:77"}]},"documentation":{"id":54043,"nodeType":"StructuredDocumentation","src":"1777:48:77","text":"@custom:oz-upgrades-unsafe-allow constructor"},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":54044,"nodeType":"ParameterList","parameters":[],"src":"1841:2:77"},"returnParameters":{"id":54045,"nodeType":"ParameterList","parameters":[],"src":"1844:0:77"},"scope":54325,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":54106,"nodeType":"FunctionDefinition","src":"2412:1308:77","nodes":[],"body":{"id":54105,"nodeType":"Block","src":"2685:1035:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":54083,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":54076,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54069,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54064,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54053,"src":"2760:14:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54067,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2786:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54066,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2778:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54065,"name":"address","nodeType":"ElementaryTypeName","src":"2778:7:77","typeDescriptions":{}}},"id":54068,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2778:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2760:28:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54075,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54070,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54057,"src":"2792:6:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54073,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2810:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54072,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2802:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54071,"name":"address","nodeType":"ElementaryTypeName","src":"2802:7:77","typeDescriptions":{}}},"id":54074,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2802:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2792:20:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2760:52:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54082,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54077,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54059,"src":"2816:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54080,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2833:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54079,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2825:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54078,"name":"address","nodeType":"ElementaryTypeName","src":"2825:7:77","typeDescriptions":{}}},"id":54081,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2825:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2816:19:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2760:75:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54088,"nodeType":"IfStatement","src":"2756:126:77","trueBody":{"id":54087,"nodeType":"Block","src":"2837:45:77","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54084,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54013,"src":"2858:11:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54085,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2858:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54086,"nodeType":"RevertStatement","src":"2851:20:77"}]}},{"expression":{"id":54091,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54089,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54023,"src":"3061:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54090,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54053,"src":"3085:14:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3061:38:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":54092,"nodeType":"ExpressionStatement","src":"3061:38:77"},{"expression":{"id":54095,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54093,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54025,"src":"3109:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54094,"name":"_tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54055,"src":"3119:8:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3109:18:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":54096,"nodeType":"ExpressionStatement","src":"3109:18:77"},{"expression":{"id":54099,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54097,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54027,"src":"3194:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54098,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54057,"src":"3202:6:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3194:14:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":54100,"nodeType":"ExpressionStatement","src":"3194:14:77"},{"expression":{"id":54103,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54101,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54029,"src":"3218:4:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54102,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54059,"src":"3225:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3218:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":54104,"nodeType":"ExpressionStatement","src":"3218:12:77"}]},"documentation":{"id":54051,"nodeType":"StructuredDocumentation","src":"1960:447:77","text":" @notice Initializes the escrow contract state.\n @param _stabilizerNFT The address of the controlling StabilizerNFT contract.\n @param _tokenId The ID of the Stabilizer NFT this escrow is associated with.\n @param _stETH The address of the stETH token.\n @param _lido The address of the Lido staking pool.\n @dev Sets immutable addresses and the token ID. Meant to be called once after clone deployment."},"functionSelector":"358394d8","implemented":true,"kind":"function","modifiers":[{"id":54062,"kind":"modifierInvocation","modifierName":{"id":54061,"name":"initializer","nameLocations":["2673:11:77"],"nodeType":"IdentifierPath","referencedDeclaration":39563,"src":"2673:11:77"},"nodeType":"ModifierInvocation","src":"2673:11:77"}],"name":"initialize","nameLocation":"2421:10:77","parameters":{"id":54060,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54053,"mutability":"mutable","name":"_stabilizerNFT","nameLocation":"2481:14:77","nodeType":"VariableDeclaration","scope":54106,"src":"2473:22:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54052,"name":"address","nodeType":"ElementaryTypeName","src":"2473:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":54055,"mutability":"mutable","name":"_tokenId","nameLocation":"2513:8:77","nodeType":"VariableDeclaration","scope":54106,"src":"2505:16:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54054,"name":"uint256","nodeType":"ElementaryTypeName","src":"2505:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":54057,"mutability":"mutable","name":"_stETH","nameLocation":"2628:6:77","nodeType":"VariableDeclaration","scope":54106,"src":"2620:14:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54056,"name":"address","nodeType":"ElementaryTypeName","src":"2620:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":54059,"mutability":"mutable","name":"_lido","nameLocation":"2652:5:77","nodeType":"VariableDeclaration","scope":54106,"src":"2644:13:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54058,"name":"address","nodeType":"ElementaryTypeName","src":"2644:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2431:232:77"},"returnParameters":{"id":54063,"nodeType":"ParameterList","parameters":[],"src":"2685:0:77"},"scope":54325,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":54146,"nodeType":"FunctionDefinition","src":"3933:328:77","nodes":[],"body":{"id":54145,"nodeType":"Block","src":"3987:274:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54115,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":54112,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4001:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54113,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4005:5:77","memberName":"value","nodeType":"MemberAccess","src":"4001:9:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":54114,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4014:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4001:14:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54119,"nodeType":"IfStatement","src":"3997:39:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54116,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54015,"src":"4024:10:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54117,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4024:12:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54118,"nodeType":"RevertStatement","src":"4017:19:77"}},{"clauses":[{"block":{"id":54132,"nodeType":"Block","src":"4132:2:77","statements":[]},"errorName":"","id":54133,"nodeType":"TryCatchClause","src":"4132:2:77"},{"block":{"id":54137,"nodeType":"Block","src":"4149:47:77","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54134,"name":"DepositFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54019,"src":"4170:13:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54135,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4170:15:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54136,"nodeType":"RevertStatement","src":"4163:22:77"}]},"errorName":"","id":54138,"nodeType":"TryCatchClause","src":"4143:53:77"}],"externalCall":{"arguments":[{"arguments":[{"hexValue":"30","id":54129,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4128:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54128,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4120:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54127,"name":"address","nodeType":"ElementaryTypeName","src":"4120:7:77","typeDescriptions":{}}},"id":54130,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4120:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54121,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54029,"src":"4089:4:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54120,"name":"ILido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58699,"src":"4083:5:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ILido_$58699_$","typeString":"type(contract ILido)"}},"id":54122,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4083:11:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ILido_$58699","typeString":"contract ILido"}},"id":54123,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4095:6:77","memberName":"submit","nodeType":"MemberAccess","referencedDeclaration":58698,"src":"4083:18:77","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$","typeString":"function (address) payable external returns (uint256)"}},"id":54126,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"names":["value"],"nodeType":"FunctionCallOptions","options":[{"expression":{"id":54124,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4109:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54125,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4113:5:77","memberName":"value","nodeType":"MemberAccess","src":"4109:9:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"src":"4083:36:77","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$value","typeString":"function (address) payable external returns (uint256)"}},"id":54131,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4083:48:77","tryCall":true,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":54139,"nodeType":"TryStatement","src":"4079:117:77"},{"eventCall":{"arguments":[{"expression":{"id":54141,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4226:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54142,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4230:5:77","memberName":"value","nodeType":"MemberAccess","src":"4226:9:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54140,"name":"DepositReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59016,"src":"4210:15:77","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":54143,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4210:26:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54144,"nodeType":"EmitStatement","src":"4205:31:77"}]},"baseFunctions":[59051],"documentation":{"id":54107,"nodeType":"StructuredDocumentation","src":"3761:167:77","text":" @notice Receives additional ETH deposits forwarded by StabilizerNFT.\n @dev Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"functionSelector":"d0e30db0","implemented":true,"kind":"function","modifiers":[{"id":54110,"kind":"modifierInvocation","modifierName":{"id":54109,"name":"onlyStabilizerNFT","nameLocations":["3969:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":54042,"src":"3969:17:77"},"nodeType":"ModifierInvocation","src":"3969:17:77"}],"name":"deposit","nameLocation":"3942:7:77","parameters":{"id":54108,"nodeType":"ParameterList","parameters":[],"src":"3949:2:77"},"returnParameters":{"id":54111,"nodeType":"ParameterList","parameters":[],"src":"3987:0:77"},"scope":54325,"stateMutability":"payable","virtual":false,"visibility":"external"},{"id":54212,"nodeType":"FunctionDefinition","src":"4565:586:77","nodes":[],"body":{"id":54211,"nodeType":"Block","src":"4663:488:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54158,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54156,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54149,"src":"4677:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":54157,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4687:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4677:11:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54162,"nodeType":"IfStatement","src":"4673:36:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54159,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54015,"src":"4697:10:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54160,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4697:12:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54161,"nodeType":"RevertStatement","src":"4690:19:77"}},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54168,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54163,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54151,"src":"4723:18:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54166,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4753:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54165,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4745:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54164,"name":"address","nodeType":"ElementaryTypeName","src":"4745:7:77","typeDescriptions":{}}},"id":54167,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4745:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4723:32:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54172,"nodeType":"IfStatement","src":"4719:58:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54169,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54013,"src":"4764:11:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54170,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4764:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54171,"nodeType":"RevertStatement","src":"4757:20:77"}},{"assignments":[54174],"declarations":[{"constant":false,"id":54174,"mutability":"mutable","name":"currentBalance","nameLocation":"4796:14:77","nodeType":"VariableDeclaration","scope":54211,"src":"4788:22:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54173,"name":"uint256","nodeType":"ElementaryTypeName","src":"4788:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":54184,"initialValue":{"arguments":[{"arguments":[{"id":54181,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"4845:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}],"id":54180,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4837:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54179,"name":"address","nodeType":"ElementaryTypeName","src":"4837:7:77","typeDescriptions":{}}},"id":54182,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4837:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54176,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54027,"src":"4820:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54175,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"4813:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54177,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4813:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54178,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4827:9:77","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"4813:23:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":54183,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4813:38:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4788:63:77"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54187,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54185,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54149,"src":"4865:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":54186,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54174,"src":"4874:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4865:23:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54197,"nodeType":"IfStatement","src":"4861:99:77","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":54191,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"4930:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}],"id":54190,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4922:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54189,"name":"address","nodeType":"ElementaryTypeName","src":"4922:7:77","typeDescriptions":{}}},"id":54192,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4922:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54193,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54174,"src":"4937:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":54194,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54149,"src":"4953:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54188,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"4897:24:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":54195,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4897:63:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54196,"nodeType":"RevertStatement","src":"4890:70:77"}},{"expression":{"arguments":[{"id":54202,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54151,"src":"5042:18:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54203,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54149,"src":"5062:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54199,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54027,"src":"5027:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54198,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"5020:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54200,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5020:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54201,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5034:7:77","memberName":"approve","nodeType":"MemberAccess","referencedDeclaration":43792,"src":"5020:21:77","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":54204,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5020:49:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54205,"nodeType":"ExpressionStatement","src":"5020:49:77"},{"eventCall":{"arguments":[{"id":54207,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54151,"src":"5103:18:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54208,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54149,"src":"5123:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54206,"name":"AllocationApproved","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59022,"src":"5084:18:77","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":54209,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5084:46:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54210,"nodeType":"EmitStatement","src":"5079:51:77"}]},"baseFunctions":[59058],"documentation":{"id":54147,"nodeType":"StructuredDocumentation","src":"4267:293:77","text":" @notice Approves the PositionNFT contract to spend stETH for allocation.\n @param amount The amount of stETH to approve.\n @param positionNFTAddress The address of the PositionNFT contract.\n @dev Callable only by StabilizerNFT. Checks for sufficient balance."},"functionSelector":"4f68ae75","implemented":true,"kind":"function","modifiers":[{"id":54154,"kind":"modifierInvocation","modifierName":{"id":54153,"name":"onlyStabilizerNFT","nameLocations":["4645:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":54042,"src":"4645:17:77"},"nodeType":"ModifierInvocation","src":"4645:17:77"}],"name":"approveAllocation","nameLocation":"4574:17:77","parameters":{"id":54152,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54149,"mutability":"mutable","name":"amount","nameLocation":"4600:6:77","nodeType":"VariableDeclaration","scope":54212,"src":"4592:14:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54148,"name":"uint256","nodeType":"ElementaryTypeName","src":"4592:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":54151,"mutability":"mutable","name":"positionNFTAddress","nameLocation":"4616:18:77","nodeType":"VariableDeclaration","scope":54212,"src":"4608:26:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54150,"name":"address","nodeType":"ElementaryTypeName","src":"4608:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"4591:44:77"},"returnParameters":{"id":54155,"nodeType":"ParameterList","parameters":[],"src":"4663:0:77"},"scope":54325,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":54293,"nodeType":"FunctionDefinition","src":"5531:898:77","nodes":[],"body":{"id":54292,"nodeType":"Block","src":"5603:826:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54222,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54220,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54215,"src":"5617:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":54221,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5627:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5617:11:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54226,"nodeType":"IfStatement","src":"5613:36:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54223,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54015,"src":"5637:10:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54224,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5637:12:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54225,"nodeType":"RevertStatement","src":"5630:19:77"}},{"assignments":[54228],"declarations":[{"constant":false,"id":54228,"mutability":"mutable","name":"currentBalance","nameLocation":"5667:14:77","nodeType":"VariableDeclaration","scope":54292,"src":"5659:22:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54227,"name":"uint256","nodeType":"ElementaryTypeName","src":"5659:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":54238,"initialValue":{"arguments":[{"arguments":[{"id":54235,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5716:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}],"id":54234,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5708:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54233,"name":"address","nodeType":"ElementaryTypeName","src":"5708:7:77","typeDescriptions":{}}},"id":54236,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5708:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54230,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54027,"src":"5691:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54229,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"5684:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54231,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5684:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54232,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5698:9:77","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"5684:23:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":54237,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5684:38:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5659:63:77"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54241,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54239,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54215,"src":"5736:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":54240,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54228,"src":"5745:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5736:23:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54251,"nodeType":"IfStatement","src":"5732:99:77","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":54245,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5801:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}],"id":54244,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5793:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54243,"name":"address","nodeType":"ElementaryTypeName","src":"5793:7:77","typeDescriptions":{}}},"id":54246,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5793:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54247,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54228,"src":"5808:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":54248,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54215,"src":"5824:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54242,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"5768:24:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":54249,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5768:63:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54250,"nodeType":"RevertStatement","src":"5761:70:77"}},{"assignments":[54253],"declarations":[{"constant":false,"id":54253,"mutability":"mutable","name":"currentOwner","nameLocation":"5942:12:77","nodeType":"VariableDeclaration","scope":54292,"src":"5934:20:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54252,"name":"address","nodeType":"ElementaryTypeName","src":"5934:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":54260,"initialValue":{"arguments":[{"id":54258,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54025,"src":"5996:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54255,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54023,"src":"5965:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54254,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"5957:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":54256,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5957:30:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":54257,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5988:7:77","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"5957:38:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":54259,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5957:47:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"5934:70:77"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54266,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54261,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54253,"src":"6040:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54264,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6064:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54263,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6056:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54262,"name":"address","nodeType":"ElementaryTypeName","src":"6056:7:77","typeDescriptions":{}}},"id":54265,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6056:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"6040:26:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54270,"nodeType":"IfStatement","src":"6036:52:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54267,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54013,"src":"6075:11:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54268,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6075:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54269,"nodeType":"RevertStatement","src":"6068:20:77"}},{"assignments":[54272],"declarations":[{"constant":false,"id":54272,"mutability":"mutable","name":"success","nameLocation":"6188:7:77","nodeType":"VariableDeclaration","scope":54292,"src":"6183:12:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":54271,"name":"bool","nodeType":"ElementaryTypeName","src":"6183:4:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":54280,"initialValue":{"arguments":[{"id":54277,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54253,"src":"6221:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54278,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54215,"src":"6235:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54274,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54027,"src":"6205:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54273,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"6198:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54275,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6198:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54276,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6212:8:77","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":43772,"src":"6198:22:77","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":54279,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6198:44:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"6183:59:77"},{"condition":{"id":54282,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"6256:8:77","subExpression":{"id":54281,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54272,"src":"6257:7:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54286,"nodeType":"IfStatement","src":"6252:37:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54283,"name":"TransferFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54021,"src":"6273:14:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54284,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6273:16:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54285,"nodeType":"RevertStatement","src":"6266:23:77"}},{"eventCall":{"arguments":[{"id":54288,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54253,"src":"6401:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54289,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54215,"src":"6415:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54287,"name":"WithdrawalCompleted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59028,"src":"6381:19:77","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":54290,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6381:41:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54291,"nodeType":"EmitStatement","src":"6376:46:77"}]},"baseFunctions":[59063],"documentation":{"id":54213,"nodeType":"StructuredDocumentation","src":"5243:283:77","text":" @notice Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\n @param amount The amount of stETH to withdraw.\n @dev Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance."},"functionSelector":"a9015400","implemented":true,"kind":"function","modifiers":[{"id":54218,"kind":"modifierInvocation","modifierName":{"id":54217,"name":"onlyStabilizerNFT","nameLocations":["5585:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":54042,"src":"5585:17:77"},"nodeType":"ModifierInvocation","src":"5585:17:77"}],"name":"withdrawUnallocated","nameLocation":"5540:19:77","parameters":{"id":54216,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54215,"mutability":"mutable","name":"amount","nameLocation":"5568:6:77","nodeType":"VariableDeclaration","scope":54293,"src":"5560:14:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54214,"name":"uint256","nodeType":"ElementaryTypeName","src":"5560:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5559:16:77"},"returnParameters":{"id":54219,"nodeType":"ParameterList","parameters":[],"src":"5603:0:77"},"scope":54325,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":54311,"nodeType":"FunctionDefinition","src":"6715:131:77","nodes":[],"body":{"id":54310,"nodeType":"Block","src":"6784:62:77","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[{"id":54306,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"6833:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54325","typeString":"contract StabilizerEscrow"}],"id":54305,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6825:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54304,"name":"address","nodeType":"ElementaryTypeName","src":"6825:7:77","typeDescriptions":{}}},"id":54307,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6825:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54301,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54027,"src":"6808:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54300,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"6801:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54302,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6801:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54303,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6815:9:77","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"6801:23:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":54308,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6801:38:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":54299,"id":54309,"nodeType":"Return","src":"6794:45:77"}]},"baseFunctions":[59069],"documentation":{"id":54294,"nodeType":"StructuredDocumentation","src":"6466:244:77","text":" @notice Returns the current stETH balance of this contract.\n @dev Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\n @return The amount of stETH held by the escrow."},"functionSelector":"ec60b9ab","implemented":true,"kind":"function","modifiers":[],"name":"unallocatedStETH","nameLocation":"6724:16:77","overrides":{"id":54296,"nodeType":"OverrideSpecifier","overrides":[],"src":"6757:8:77"},"parameters":{"id":54295,"nodeType":"ParameterList","parameters":[],"src":"6740:2:77"},"returnParameters":{"id":54299,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54298,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":54311,"src":"6775:7:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54297,"name":"uint256","nodeType":"ElementaryTypeName","src":"6775:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6774:9:77"},"scope":54325,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":54324,"nodeType":"FunctionDefinition","src":"6852:130:77","nodes":[],"body":{"id":54323,"nodeType":"Block","src":"6911:71:77","nodes":[],"statements":[{"expression":{"arguments":[{"id":54320,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54025,"src":"6967:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54317,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54023,"src":"6936:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54316,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"6928:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":54318,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6928:30:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":54319,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6959:7:77","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"6928:38:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":54321,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6928:47:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":54315,"id":54322,"nodeType":"Return","src":"6921:54:77"}]},"baseFunctions":[59038],"functionSelector":"7d0e9bba","implemented":true,"kind":"function","modifiers":[],"name":"stabilizerOwner","nameLocation":"6861:15:77","parameters":{"id":54312,"nodeType":"ParameterList","parameters":[],"src":"6876:2:77"},"returnParameters":{"id":54315,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54314,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":54324,"src":"6902:7:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54313,"name":"address","nodeType":"ElementaryTypeName","src":"6902:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"6901:9:77"},"scope":54325,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[{"baseName":{"id":54008,"name":"Initializable","nameLocations":["714:13:77"],"nodeType":"IdentifierPath","referencedDeclaration":39723,"src":"714:13:77"},"id":54009,"nodeType":"InheritanceSpecifier","src":"714:13:77"},{"baseName":{"id":54010,"name":"IStabilizerEscrow","nameLocations":["729:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":59070,"src":"729:17:77"},"id":54011,"nodeType":"InheritanceSpecifier","src":"729:17:77"}],"canonicalName":"StabilizerEscrow","contractDependencies":[],"contractKind":"contract","documentation":{"id":54007,"nodeType":"StructuredDocumentation","src":"427:257:77","text":" @title StabilizerEscrow\n @notice A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\n @dev Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone."},"fullyImplemented":true,"linearizedBaseContracts":[54325,59070,42340,39723],"name":"StabilizerEscrow","nameLocation":"694:16:77","scope":54326,"usedErrors":[39472,39475,42310,42315,42320,42329,42334,42339,54013,54015,54017,54019,54021],"usedEvents":[39480,59016,59022,59028]}],"license":"MIT"},"id":77}