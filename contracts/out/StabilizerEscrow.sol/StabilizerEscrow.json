{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"approveAllocation","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"positionNFTAddress","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"deposit","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"initialize","inputs":[{"name":"_stabilizerNFT","type":"address","internalType":"address"},{"name":"_tokenId","type":"uint256","internalType":"uint256"},{"name":"_stETH","type":"address","internalType":"address"},{"name":"_lido","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"lido","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stETH","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerNFTContract","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerOwner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"tokenId","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"unallocatedStETH","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"withdrawUnallocated","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"AllocationApproved","inputs":[{"name":"spender","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"DepositReceived","inputs":[{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Initialized","inputs":[{"name":"version","type":"uint64","indexed":false,"internalType":"uint64"}],"anonymous":false},{"type":"event","name":"WithdrawalCompleted","inputs":[{"name":"recipient","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"DepositFailed","inputs":[]},{"type":"error","name":"ERC20InsufficientAllowance","inputs":[{"name":"spender","type":"address","internalType":"address"},{"name":"allowance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InsufficientBalance","inputs":[{"name":"sender","type":"address","internalType":"address"},{"name":"balance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InvalidApprover","inputs":[{"name":"approver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidReceiver","inputs":[{"name":"receiver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSender","inputs":[{"name":"sender","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSpender","inputs":[{"name":"spender","type":"address","internalType":"address"}]},{"type":"error","name":"InitialDepositFailed","inputs":[]},{"type":"error","name":"InvalidInitialization","inputs":[]},{"type":"error","name":"NotInitializing","inputs":[]},{"type":"error","name":"TransferFailed","inputs":[]},{"type":"error","name":"ZeroAddress","inputs":[]},{"type":"error","name":"ZeroAmount","inputs":[]}],"bytecode":{"object":"0x6080604052348015600e575f5ffd5b5060156019565b60c9565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff161560685760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b039081161460c65780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b610adf806100d65f395ff3fe60806040526004361061008f575f3560e01c8063a901540011610057578063a901540014610146578063bec070d614610165578063c1fe3e4814610183578063d0e30db0146101a2578063ec60b9ab146101aa575f5ffd5b806317d70f7c1461009357806323509a2d146100bb578063358394d8146100f25780634f68ae75146101135780637d0e9bba14610132575b5f5ffd5b34801561009e575f5ffd5b506100a860015481565b6040519081526020015b60405180910390f35b3480156100c6575f5ffd5b506003546100da906001600160a01b031681565b6040516001600160a01b0390911681526020016100b2565b3480156100fd575f5ffd5b5061011161010c366004610985565b6101be565b005b34801561011e575f5ffd5b5061011161012d3660046109d5565b610354565b34801561013d575f5ffd5b506100da610527565b348015610151575f5ffd5b50610111610160366004610a03565b6105a0565b348015610170575f5ffd5b505f546100da906001600160a01b031681565b34801561018e575f5ffd5b506002546100da906001600160a01b031681565b610111610800565b3480156101b5575f5ffd5b506100a8610904565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff165f811580156102035750825b90505f8267ffffffffffffffff16600114801561021f5750303b155b90508115801561022d575080155b1561024b5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561027557845460ff60401b1916600160401b1785555b6001600160a01b038916158061029257506001600160a01b038716155b806102a457506001600160a01b038616155b156102c25760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a84169083161790556003805492891692909116919091179055831561034957845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146103865760405162461bcd60e51b815260040161037d90610a1a565b60405180910390fd5b815f036103a657604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166103cd5760405163d92e233d60e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610413573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104379190610a51565b90508083111561046a5760405163391434e360e21b8152306004820152602481018290526044810184905260640161037d565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156104ba573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104de9190610a68565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161051a91815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e9161055c9160040190815260200190565b602060405180830381865afa158015610577573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a8e565b905090565b5f546001600160a01b031633146105c95760405162461bcd60e51b815260040161037d90610a1a565b805f036105e957604051631f2a200560e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561062f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106539190610a51565b9050808211156106865760405163391434e360e21b8152306004820152602481018290526044810183905260640161037d565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106bb9160040190815260200190565b602060405180830381865afa1580156106d6573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106fa9190610a8e565b90506001600160a01b0381166107235760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af1158015610773573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107979190610a68565b9050806107b7576040516312171d8360e31b815260040160405180910390fd5b816001600160a01b03167f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c4856040516107f291815260200190565b60405180910390a250505050565b5f546001600160a01b031633146108295760405162461bcd60e51b815260040161037d90610a1a565b345f0361084957604051631f2a200560e01b815260040160405180910390fd5b60035460405163a1903eab60e01b81525f60048201526001600160a01b039091169063a1903eab90349060240160206040518083038185885af1935050505080156108b1575060408051601f3d908101601f191682019092526108ae91810190610a51565b60015b6108ce576040516379cacff160e01b815260040160405180910390fd5b506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a1565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561094a573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a51565b6001600160a01b0381168114610982575f5ffd5b50565b5f5f5f5f60808587031215610998575f5ffd5b84356109a38161096e565b93506020850135925060408501356109ba8161096e565b915060608501356109ca8161096e565b939692955090935050565b5f5f604083850312156109e6575f5ffd5b8235915060208301356109f88161096e565b809150509250929050565b5f60208284031215610a13575f5ffd5b5035919050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b5f60208284031215610a61575f5ffd5b5051919050565b5f60208284031215610a78575f5ffd5b81518015158114610a87575f5ffd5b9392505050565b5f60208284031215610a9e575f5ffd5b8151610a878161096e56fea2646970667358221220bff73163444004f2e79620eda6fa971c70af0f8531fb02fa639adb94ade4995064736f6c634300081d0033","sourceMap":"684:6299:77:-:0;;;1829:97;;;;;;;;;-1:-1:-1;1853:22:77;:20;:22::i;:::-;684:6299;;7711:422:20;3147:66;7900:15;;;;;;;7896:76;;;7938:23;;-1:-1:-1;;;7938:23:20;;;;;;;;;;;7896:76;7985:14;;-1:-1:-1;;;;;7985:14:20;;;:34;7981:146;;8035:33;;-1:-1:-1;;;;;;8035:33:20;-1:-1:-1;;;;;8035:33:20;;;;;8087:29;;158:50:105;;;8087:29:20;;146:2:105;131:18;8087:29:20;;;;;;;7981:146;7760:373;7711:422::o;14:200:105:-;684:6299:77;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x60806040526004361061008f575f3560e01c8063a901540011610057578063a901540014610146578063bec070d614610165578063c1fe3e4814610183578063d0e30db0146101a2578063ec60b9ab146101aa575f5ffd5b806317d70f7c1461009357806323509a2d146100bb578063358394d8146100f25780634f68ae75146101135780637d0e9bba14610132575b5f5ffd5b34801561009e575f5ffd5b506100a860015481565b6040519081526020015b60405180910390f35b3480156100c6575f5ffd5b506003546100da906001600160a01b031681565b6040516001600160a01b0390911681526020016100b2565b3480156100fd575f5ffd5b5061011161010c366004610985565b6101be565b005b34801561011e575f5ffd5b5061011161012d3660046109d5565b610354565b34801561013d575f5ffd5b506100da610527565b348015610151575f5ffd5b50610111610160366004610a03565b6105a0565b348015610170575f5ffd5b505f546100da906001600160a01b031681565b34801561018e575f5ffd5b506002546100da906001600160a01b031681565b610111610800565b3480156101b5575f5ffd5b506100a8610904565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff165f811580156102035750825b90505f8267ffffffffffffffff16600114801561021f5750303b155b90508115801561022d575080155b1561024b5760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561027557845460ff60401b1916600160401b1785555b6001600160a01b038916158061029257506001600160a01b038716155b806102a457506001600160a01b038616155b156102c25760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a84169083161790556003805492891692909116919091179055831561034957845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146103865760405162461bcd60e51b815260040161037d90610a1a565b60405180910390fd5b815f036103a657604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166103cd5760405163d92e233d60e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610413573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104379190610a51565b90508083111561046a5760405163391434e360e21b8152306004820152602481018290526044810184905260640161037d565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156104ba573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104de9190610a68565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161051a91815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e9161055c9160040190815260200190565b602060405180830381865afa158015610577573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a8e565b905090565b5f546001600160a01b031633146105c95760405162461bcd60e51b815260040161037d90610a1a565b805f036105e957604051631f2a200560e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561062f573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106539190610a51565b9050808211156106865760405163391434e360e21b8152306004820152602481018290526044810183905260640161037d565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106bb9160040190815260200190565b602060405180830381865afa1580156106d6573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106fa9190610a8e565b90506001600160a01b0381166107235760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af1158015610773573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107979190610a68565b9050806107b7576040516312171d8360e31b815260040160405180910390fd5b816001600160a01b03167f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c4856040516107f291815260200190565b60405180910390a250505050565b5f546001600160a01b031633146108295760405162461bcd60e51b815260040161037d90610a1a565b345f0361084957604051631f2a200560e01b815260040160405180910390fd5b60035460405163a1903eab60e01b81525f60048201526001600160a01b039091169063a1903eab90349060240160206040518083038185885af1935050505080156108b1575060408051601f3d908101601f191682019092526108ae91810190610a51565b60015b6108ce576040516379cacff160e01b815260040160405180910390fd5b506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a1565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561094a573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061059b9190610a51565b6001600160a01b0381168114610982575f5ffd5b50565b5f5f5f5f60808587031215610998575f5ffd5b84356109a38161096e565b93506020850135925060408501356109ba8161096e565b915060608501356109ca8161096e565b939692955090935050565b5f5f604083850312156109e6575f5ffd5b8235915060208301356109f88161096e565b809150509250929050565b5f60208284031215610a13575f5ffd5b5035919050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b5f60208284031215610a61575f5ffd5b5051919050565b5f60208284031215610a78575f5ffd5b81518015158114610a87575f5ffd5b9392505050565b5f60208284031215610a9e575f5ffd5b8151610a878161096e56fea2646970667358221220bff73163444004f2e79620eda6fa971c70af0f8531fb02fa639adb94ade4995064736f6c634300081d0033","sourceMap":"684:6299:77:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1224:22;;;;;;;;;;;;;;;;;;;160:25:105;;;148:2;133:18;1224:22:77;;;;;;;;1474:19;;;;;;;;;;-1:-1:-1;1474:19:77;;;;-1:-1:-1;;;;;1474:19:77;;;;;;-1:-1:-1;;;;;360:32:105;;;342:51;;330:2;315:18;1474:19:77;196:203:105;2411:1308:77;;;;;;;;;;-1:-1:-1;2411:1308:77;;;;;:::i;:::-;;:::i;:::-;;4564:586;;;;;;;;;;-1:-1:-1;4564:586:77;;;;;:::i;:::-;;:::i;6851:130::-;;;;;;;;;;;;;:::i;5530:898::-;;;;;;;;;;-1:-1:-1;5530:898:77;;;;;:::i;:::-;;:::i;1139:36::-;;;;;;;;;;-1:-1:-1;1139:36:77;;;;-1:-1:-1;;;;;1139:36:77;;;1391:20;;;;;;;;;;-1:-1:-1;1391:20:77;;;;-1:-1:-1;;;;;1391:20:77;;;3932:328;;;:::i;6714:131::-;;;;;;;;;;;;;:::i;2411:1308::-;3147:66:20;4302:15;;-1:-1:-1;;;4302:15:20;;;;4301:16;;4348:14;;4158:30;4726:16;;:34;;;;;4746:14;4726:34;4706:54;;4770:17;4790:11;:16;;4805:1;4790:16;:50;;;;-1:-1:-1;4818:4:20;4810:25;:30;4790:50;4770:70;;4856:12;4855:13;:30;;;;;4873:12;4872:13;4855:30;4851:91;;;4908:23;;-1:-1:-1;;;4908:23:20;;;;;;;;;;;4851:91;4951:18;;-1:-1:-1;;4951:18:20;4968:1;4951:18;;;4979:67;;;;5013:22;;-1:-1:-1;;;;5013:22:20;-1:-1:-1;;;5013:22:20;;;4979:67;-1:-1:-1;;;;;2759:28:77;::::1;::::0;;:52:::1;;-1:-1:-1::0;;;;;;2791:20:77;::::1;::::0;2759:52:::1;:75;;;-1:-1:-1::0;;;;;;2815:19:77;::::1;::::0;2759:75:::1;2755:126;;;2857:13;;-1:-1:-1::0;;;2857:13:77::1;;;;;;;;;;;2755:126;3060:21;:38:::0;;-1:-1:-1;;;;;3060:38:77;;::::1;-1:-1:-1::0;;;;;;3060:38:77;;::::1;;::::0;;;;3108:18;;;3193:5:::1;:14:::0;;;;::::1;::::0;;::::1;;::::0;;3217:4:::1;:12:::0;;;;::::1;::::0;;;::::1;::::0;;;::::1;::::0;;5066:101:20;;;;5100:23;;-1:-1:-1;;;;5100:23:20;;;5142:14;;-1:-1:-1;1951:50:105;;5142:14:20;;1939:2:105;1924:18;5142:14:20;;;;;;;5066:101;4092:1081;;;;;2411:1308:77;;;;:::o;4564:586::-;1692:21;;-1:-1:-1;;;;;1692:21:77;1678:10;:35;1674:78;;1715:37;;-1:-1:-1;;;1715:37:77;;;;;;;:::i;:::-;;;;;;;;1674:78;4676:6:::1;4686:1;4676:11:::0;4672:36:::1;;4696:12;;-1:-1:-1::0;;;4696:12:77::1;;;;;;;;;;;4672:36;-1:-1:-1::0;;;;;4722:32:77;::::1;4718:58;;4763:13;;-1:-1:-1::0;;;4763:13:77::1;;;;;;;;;;;4718:58;4819:5;::::0;4812:38:::1;::::0;-1:-1:-1;;;4812:38:77;;4844:4:::1;4812:38;::::0;::::1;342:51:105::0;4787:22:77::1;::::0;-1:-1:-1;;;;;4819:5:77::1;::::0;4812:23:::1;::::0;315:18:105;;4812:38:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4787:63;;4873:14;4864:6;:23;4860:99;;;4896:63;::::0;-1:-1:-1;;;4896:63:77;;4929:4:::1;4896:63;::::0;::::1;2759:51:105::0;2826:18;;;2819:34;;;2869:18;;;2862:34;;;2732:18;;4896:63:77::1;2557:345:105::0;4860:99:77::1;5026:5;::::0;5019:49:::1;::::0;-1:-1:-1;;;5019:49:77;;-1:-1:-1;;;;;3099:32:105;;;5019:49:77::1;::::0;::::1;3081:51:105::0;3148:18;;;3141:34;;;5026:5:77;;::::1;::::0;5019:21:::1;::::0;3054:18:105;;5019:49:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;5102:18;-1:-1:-1::0;;;;;5083:46:77::1;;5122:6;5083:46;;;;160:25:105::0;;148:2;133:18;;14:177;5083:46:77::1;;;;;;;;4662:488;4564:586:::0;;:::o;6851:130::-;6901:7;6935:21;;;6966:7;6927:47;;-1:-1:-1;;;6927:47:77;;-1:-1:-1;;;;;6935:21:77;;;;6927:38;;:47;;;;160:25:105;;;148:2;133:18;;14:177;6927:47:77;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6920:54;;6851:130;:::o;5530:898::-;1692:21;;-1:-1:-1;;;;;1692:21:77;1678:10;:35;1674:78;;1715:37;;-1:-1:-1;;;1715:37:77;;;;;;;:::i;1674:78::-;5616:6:::1;5626:1;5616:11:::0;5612:36:::1;;5636:12;;-1:-1:-1::0;;;5636:12:77::1;;;;;;;;;;;5612:36;5690:5;::::0;5683:38:::1;::::0;-1:-1:-1;;;5683:38:77;;5715:4:::1;5683:38;::::0;::::1;342:51:105::0;5658:22:77::1;::::0;-1:-1:-1;;;;;5690:5:77::1;::::0;5683:23:::1;::::0;315:18:105;;5683:38:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5658:63;;5744:14;5735:6;:23;5731:99;;;5767:63;::::0;-1:-1:-1;;;5767:63:77;;5800:4:::1;5767:63;::::0;::::1;2759:51:105::0;2826:18;;;2819:34;;;2869:18;;;2862:34;;;2732:18;;5767:63:77::1;2557:345:105::0;5731:99:77::1;5933:20;5964:21:::0;;;5995:7;5956:47:::1;::::0;-1:-1:-1;;;5956:47:77;;-1:-1:-1;;;;;5964:21:77;;::::1;::::0;5956:38:::1;::::0;:47:::1;::::0;::::1;;160:25:105::0;;;148:2;133:18;;14:177;5956:47:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5933:70:::0;-1:-1:-1;;;;;;6039:26:77;::::1;6035:52;;6074:13;;-1:-1:-1::0;;;6074:13:77::1;;;;;;;;;;;6035:52;6204:5;::::0;6197:44:::1;::::0;-1:-1:-1;;;6197:44:77;;-1:-1:-1;;;;;3099:32:105;;;6197:44:77::1;::::0;::::1;3081:51:105::0;3148:18;;;3141:34;;;6182:12:77::1;::::0;6204:5:::1;::::0;6197:22:::1;::::0;3054:18:105;;6197:44:77::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6182:59;;6256:7;6251:37;;6272:16;;-1:-1:-1::0;;;6272:16:77::1;;;;;;;;;;;6251:37;6400:12;-1:-1:-1::0;;;;;6380:41:77::1;;6414:6;6380:41;;;;160:25:105::0;;148:2;133:18;;14:177;6380:41:77::1;;;;;;;;5602:826;;;5530:898:::0;:::o;3932:328::-;1692:21;;-1:-1:-1;;;;;1692:21:77;1678:10;:35;1674:78;;1715:37;;-1:-1:-1;;;1715:37:77;;;;;;;:::i;1674:78::-;4000:9:::1;4013:1;4000:14:::0;3996:39:::1;;4023:12;;-1:-1:-1::0;;;4023:12:77::1;;;;;;;;;;;3996:39;4088:4;::::0;4082:48:::1;::::0;-1:-1:-1;;;4082:48:77;;4088:4:::1;4082:48;::::0;::::1;342:51:105::0;-1:-1:-1;;;;;4088:4:77;;::::1;::::0;4082:18:::1;::::0;4108:9:::1;::::0;315:18:105;;4082:48:77::1;;;;;;;;;;;;;;;;;;;;-1:-1:-1::0;4082:48:77::1;::::0;;::::1;;::::0;;::::1;-1:-1:-1::0;;4082:48:77::1;::::0;::::1;::::0;;;::::1;::::0;;::::1;::::0;::::1;:::i;:::-;;;4078:117;;4169:15;;-1:-1:-1::0;;;4169:15:77::1;;;;;;;;;;;4078:117;-1:-1:-1::0;4209:26:77::1;::::0;4225:9:::1;160:25:105::0;;4209:26:77::1;::::0;148:2:105;133:18;4209:26:77::1;;;;;;;3932:328::o:0;6714:131::-;6807:5;;6800:38;;-1:-1:-1;;;6800:38:77;;6832:4;6800:38;;;342:51:105;6774:7:77;;-1:-1:-1;;;;;6807:5:77;;6800:23;;315:18:105;;6800:38:77;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;404:131:105:-;-1:-1:-1;;;;;479:31:105;;469:42;;459:70;;525:1;522;515:12;459:70;404:131;:::o;540:650::-;626:6;634;642;650;703:3;691:9;682:7;678:23;674:33;671:53;;;720:1;717;710:12;671:53;759:9;746:23;778:31;803:5;778:31;:::i;:::-;828:5;-1:-1:-1;906:2:105;891:18;;878:32;;-1:-1:-1;988:2:105;973:18;;960:32;1001:33;960:32;1001:33;:::i;:::-;1053:7;-1:-1:-1;1112:2:105;1097:18;;1084:32;1125:33;1084:32;1125:33;:::i;:::-;540:650;;;;-1:-1:-1;540:650:105;;-1:-1:-1;;540:650:105:o;1195:367::-;1263:6;1271;1324:2;1312:9;1303:7;1299:23;1295:32;1292:52;;;1340:1;1337;1330:12;1292:52;1385:23;;;-1:-1:-1;1484:2:105;1469:18;;1456:32;1497:33;1456:32;1497:33;:::i;:::-;1549:7;1539:17;;;1195:367;;;;;:::o;1567:226::-;1626:6;1679:2;1667:9;1658:7;1654:23;1650:32;1647:52;;;1695:1;1692;1685:12;1647:52;-1:-1:-1;1740:23:105;;1567:226;-1:-1:-1;1567:226:105:o;2012:351::-;2214:2;2196:21;;;2253:2;2233:18;;;2226:30;2292:29;2287:2;2272:18;;2265:57;2354:2;2339:18;;2012:351::o;2368:184::-;2438:6;2491:2;2479:9;2470:7;2466:23;2462:32;2459:52;;;2507:1;2504;2497:12;2459:52;-1:-1:-1;2530:16:105;;2368:184;-1:-1:-1;2368:184:105:o;3186:277::-;3253:6;3306:2;3294:9;3285:7;3281:23;3277:32;3274:52;;;3322:1;3319;3312:12;3274:52;3354:9;3348:16;3407:5;3400:13;3393:21;3386:5;3383:32;3373:60;;3429:1;3426;3419:12;3373:60;3452:5;3186:277;-1:-1:-1;;;3186:277:105:o;3468:251::-;3538:6;3591:2;3579:9;3570:7;3566:23;3562:32;3559:52;;;3607:1;3604;3597:12;3559:52;3639:9;3633:16;3658:31;3683:5;3658:31;:::i","linkReferences":{}},"methodIdentifiers":{"approveAllocation(uint256,address)":"4f68ae75","deposit()":"d0e30db0","initialize(address,uint256,address,address)":"358394d8","lido()":"23509a2d","stETH()":"c1fe3e48","stabilizerNFTContract()":"bec070d6","stabilizerOwner()":"7d0e9bba","tokenId()":"17d70f7c","unallocatedStETH()":"ec60b9ab","withdrawUnallocated(uint256)":"a9015400"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.29+commit.ab55807c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"DepositFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"allowance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientAllowance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientBalance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"approver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidApprover\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidReceiver\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSender\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSpender\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InitialDepositFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidInitialization\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotInitializing\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TransferFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAmount\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"AllocationApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"DepositReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"version\",\"type\":\"uint64\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawalCompleted\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"positionNFTAddress\",\"type\":\"address\"}],\"name\":\"approveAllocation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stabilizerNFT\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_stETH\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_lido\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lido\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerNFTContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tokenId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unallocatedStETH\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawUnallocated\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone.\",\"errors\":{\"ERC20InsufficientAllowance(address,uint256,uint256)\":[{\"details\":\"Indicates a failure with the `spender`\\u2019s `allowance`. Used in transfers.\",\"params\":{\"allowance\":\"Amount of tokens a `spender` is allowed to operate with.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"ERC20InsufficientBalance(address,uint256,uint256)\":[{\"details\":\"Indicates an error related to the current `balance` of a `sender`. Used in transfers.\",\"params\":{\"balance\":\"Current balance for the interacting account.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidApprover(address)\":[{\"details\":\"Indicates a failure with the `approver` of a token to be approved. Used in approvals.\",\"params\":{\"approver\":\"Address initiating an approval operation.\"}}],\"ERC20InvalidReceiver(address)\":[{\"details\":\"Indicates a failure with the token `receiver`. Used in transfers.\",\"params\":{\"receiver\":\"Address to which tokens are being transferred.\"}}],\"ERC20InvalidSender(address)\":[{\"details\":\"Indicates a failure with the token `sender`. Used in transfers.\",\"params\":{\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidSpender(address)\":[{\"details\":\"Indicates a failure with the `spender` to be approved. Used in approvals.\",\"params\":{\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"InvalidInitialization()\":[{\"details\":\"The contract is already initialized.\"}],\"NotInitializing()\":[{\"details\":\"The contract is not initializing.\"}]},\"events\":{\"Initialized(uint64)\":{\"details\":\"Triggered when the contract has been initialized or reinitialized.\"}},\"kind\":\"dev\",\"methods\":{\"approveAllocation(uint256,address)\":{\"details\":\"Callable only by StabilizerNFT. Checks for sufficient balance.\",\"params\":{\"amount\":\"The amount of stETH to approve.\",\"positionNFTAddress\":\"The address of the PositionNFT contract.\"}},\"constructor\":{\"custom:oz-upgrades-unsafe-allow\":\"constructor\"},\"deposit()\":{\"details\":\"Stakes the received ETH into stETH. Callable only by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"details\":\"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.\",\"params\":{\"_lido\":\"The address of the Lido staking pool.\",\"_stETH\":\"The address of the stETH token.\",\"_stabilizerNFT\":\"The address of the controlling StabilizerNFT contract.\",\"_tokenId\":\"The ID of the Stabilizer NFT this escrow is associated with.\"}},\"unallocatedStETH()\":{\"details\":\"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\",\"returns\":{\"_0\":\"The amount of stETH held by the escrow.\"}},\"withdrawUnallocated(uint256)\":{\"details\":\"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.\",\"params\":{\"amount\":\"The amount of stETH to withdraw.\"}}},\"title\":\"StabilizerEscrow\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"approveAllocation(uint256,address)\":{\"notice\":\"Approves the PositionNFT contract to spend stETH for allocation.\"},\"deposit()\":{\"notice\":\"Receives additional ETH deposits forwarded by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"notice\":\"Initializes the escrow contract state.\"},\"unallocatedStETH()\":{\"notice\":\"Returns the current stETH balance of this contract.\"},\"withdrawUnallocated(uint256)\":{\"notice\":\"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\"}},\"notice\":\"A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/StabilizerEscrow.sol\":\"StabilizerEscrow\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":chainlink/=lib/chainlink/\",\":createx/=lib/createx/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/\",\":solady/=lib/createx/lib/solady/src/\",\":uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/\",\":uniswap-v3-core/=lib/uniswap-v3-core/\"]},\"sources\":{\"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol\":{\"keccak256\":\"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b\",\"dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3\"]},\"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol\":{\"keccak256\":\"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b\",\"dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11\",\"dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621\",\"dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL\"]},\"src/StabilizerEscrow.sol\":{\"keccak256\":\"0x9b27856e30db04bf0b82ce4053474500f416ccdc7c23ef07140d24ca1b2b8c23\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://37c8730f651d36a367eaf0efb614acd40deecee60b00025538f84daecb65c525\",\"dweb:/ipfs/QmPAwbSDEYQgGfgrzwDGwyjwvKiENgJdk8kCGvfAD8yhbb\"]},\"src/interfaces/ILido.sol\":{\"keccak256\":\"0xf33bd94f14a562f32ceaf9211a3b7084e4e225cc548b91db3e611637dec29a8d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://e71f220455796f3f19855e3d89ae8a0674894bf19bc49adc430f7afaec36a22a\",\"dweb:/ipfs/QmcQ56JKRECKQcPyXXQwUxrAyrHnA88swjyPaK7AULHW9v\"]},\"src/interfaces/IStabilizerEscrow.sol\":{\"keccak256\":\"0x0d3320540d9110a729122d55f960c528c33175dc1e215ddcf7b13746594675b7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://25ff9e04a125d604b19ac1db8ce057b6cfa44bcd7ecfac30e13cc3e789a10be6\",\"dweb:/ipfs/QmekC6jtXeyBCMA8xq12iCJTa5ub7MeYvMA74Kdu2jX2ju\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.29+commit.ab55807c"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"DepositFailed"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientAllowance"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientBalance"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"type":"error","name":"ERC20InvalidApprover"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"type":"error","name":"ERC20InvalidReceiver"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"type":"error","name":"ERC20InvalidSender"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"type":"error","name":"ERC20InvalidSpender"},{"inputs":[],"type":"error","name":"InitialDepositFailed"},{"inputs":[],"type":"error","name":"InvalidInitialization"},{"inputs":[],"type":"error","name":"NotInitializing"},{"inputs":[],"type":"error","name":"TransferFailed"},{"inputs":[],"type":"error","name":"ZeroAddress"},{"inputs":[],"type":"error","name":"ZeroAmount"},{"inputs":[{"internalType":"address","name":"spender","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"AllocationApproved","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"DepositReceived","anonymous":false},{"inputs":[{"internalType":"uint64","name":"version","type":"uint64","indexed":false}],"type":"event","name":"Initialized","anonymous":false},{"inputs":[{"internalType":"address","name":"recipient","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"WithdrawalCompleted","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"positionNFTAddress","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"approveAllocation"},{"inputs":[],"stateMutability":"payable","type":"function","name":"deposit"},{"inputs":[{"internalType":"address","name":"_stabilizerNFT","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"_stETH","type":"address"},{"internalType":"address","name":"_lido","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"initialize"},{"inputs":[],"stateMutability":"view","type":"function","name":"lido","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stETH","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerNFTContract","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerOwner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"tokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"unallocatedStETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"withdrawUnallocated"}],"devdoc":{"kind":"dev","methods":{"approveAllocation(uint256,address)":{"details":"Callable only by StabilizerNFT. Checks for sufficient balance.","params":{"amount":"The amount of stETH to approve.","positionNFTAddress":"The address of the PositionNFT contract."}},"constructor":{"custom:oz-upgrades-unsafe-allow":"constructor"},"deposit()":{"details":"Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"initialize(address,uint256,address,address)":{"details":"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.","params":{"_lido":"The address of the Lido staking pool.","_stETH":"The address of the stETH token.","_stabilizerNFT":"The address of the controlling StabilizerNFT contract.","_tokenId":"The ID of the Stabilizer NFT this escrow is associated with."}},"unallocatedStETH()":{"details":"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.","returns":{"_0":"The amount of stETH held by the escrow."}},"withdrawUnallocated(uint256)":{"details":"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.","params":{"amount":"The amount of stETH to withdraw."}}},"version":1},"userdoc":{"kind":"user","methods":{"approveAllocation(uint256,address)":{"notice":"Approves the PositionNFT contract to spend stETH for allocation."},"deposit()":{"notice":"Receives additional ETH deposits forwarded by StabilizerNFT."},"initialize(address,uint256,address,address)":{"notice":"Initializes the escrow contract state."},"unallocatedStETH()":{"notice":"Returns the current stETH balance of this contract."},"withdrawUnallocated(uint256)":{"notice":"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","chainlink/=lib/chainlink/","createx/=lib/createx/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/","solady/=lib/createx/lib/solady/src/","uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/","uniswap-v3-core/=lib/uniswap-v3-core/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/StabilizerEscrow.sol":"StabilizerEscrow"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol":{"keccak256":"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a","urls":["bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b","dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol":{"keccak256":"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b","urls":["bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b","dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol":{"keccak256":"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261","urls":["bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11","dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8","urls":["bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621","dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL"],"license":"MIT"},"src/StabilizerEscrow.sol":{"keccak256":"0x9b27856e30db04bf0b82ce4053474500f416ccdc7c23ef07140d24ca1b2b8c23","urls":["bzz-raw://37c8730f651d36a367eaf0efb614acd40deecee60b00025538f84daecb65c525","dweb:/ipfs/QmPAwbSDEYQgGfgrzwDGwyjwvKiENgJdk8kCGvfAD8yhbb"],"license":"MIT"},"src/interfaces/ILido.sol":{"keccak256":"0xf33bd94f14a562f32ceaf9211a3b7084e4e225cc548b91db3e611637dec29a8d","urls":["bzz-raw://e71f220455796f3f19855e3d89ae8a0674894bf19bc49adc430f7afaec36a22a","dweb:/ipfs/QmcQ56JKRECKQcPyXXQwUxrAyrHnA88swjyPaK7AULHW9v"],"license":"MIT"},"src/interfaces/IStabilizerEscrow.sol":{"keccak256":"0x0d3320540d9110a729122d55f960c528c33175dc1e215ddcf7b13746594675b7","urls":["bzz-raw://25ff9e04a125d604b19ac1db8ce057b6cfa44bcd7ecfac30e13cc3e789a10be6","dweb:/ipfs/QmekC6jtXeyBCMA8xq12iCJTa5ub7MeYvMA74Kdu2jX2ju"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":54202,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stabilizerNFTContract","offset":0,"slot":"0","type":"t_address"},{"astId":54204,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"tokenId","offset":0,"slot":"1","type":"t_uint256"},{"astId":54206,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stETH","offset":0,"slot":"2","type":"t_address"},{"astId":54208,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"lido","offset":0,"slot":"3","type":"t_address"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}},"ast":{"absolutePath":"src/StabilizerEscrow.sol","id":54505,"exportedSymbols":{"IERC165":[47119],"IERC20":[43805],"IERC20Errors":[42340],"IERC721":[44138],"ILido":[58970],"IStabilizerEscrow":[59341],"Initializable":[39723],"StabilizerEscrow":[54504]},"nodeType":"SourceUnit","src":"32:6952:77","nodes":[{"id":54179,"nodeType":"PragmaDirective","src":"32:23:77","nodes":[],"literals":["solidity","0.8",".29"]},{"id":54180,"nodeType":"ImportDirective","src":"57:72:77","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","nameLocation":"-1:-1:-1","scope":54505,"sourceUnit":43806,"symbolAliases":[],"unitAlias":""},{"id":54181,"nodeType":"ImportDirective","src":"130:74:77","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","nameLocation":"-1:-1:-1","scope":54505,"sourceUnit":44139,"symbolAliases":[],"unitAlias":""},{"id":54183,"nodeType":"ImportDirective","src":"205:112:77","nodes":[],"absolutePath":"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","file":"../lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","nameLocation":"-1:-1:-1","scope":54505,"sourceUnit":39724,"symbolAliases":[{"foreign":{"id":54182,"name":"Initializable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39723,"src":"213:13:77","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":54184,"nodeType":"ImportDirective","src":"346:32:77","nodes":[],"absolutePath":"src/interfaces/ILido.sol","file":"./interfaces/ILido.sol","nameLocation":"-1:-1:-1","scope":54505,"sourceUnit":58971,"symbolAliases":[],"unitAlias":""},{"id":54185,"nodeType":"ImportDirective","src":"379:44:77","nodes":[],"absolutePath":"src/interfaces/IStabilizerEscrow.sol","file":"./interfaces/IStabilizerEscrow.sol","nameLocation":"-1:-1:-1","scope":54505,"sourceUnit":59342,"symbolAliases":[],"unitAlias":""},{"id":54504,"nodeType":"ContractDefinition","src":"684:6299:77","nodes":[{"id":54192,"nodeType":"ErrorDefinition","src":"803:20:77","nodes":[],"errorSelector":"d92e233d","name":"ZeroAddress","nameLocation":"809:11:77","parameters":{"id":54191,"nodeType":"ParameterList","parameters":[],"src":"820:2:77"}},{"id":54194,"nodeType":"ErrorDefinition","src":"828:19:77","nodes":[],"errorSelector":"1f2a2005","name":"ZeroAmount","nameLocation":"834:10:77","parameters":{"id":54193,"nodeType":"ParameterList","parameters":[],"src":"844:2:77"}},{"id":54196,"nodeType":"ErrorDefinition","src":"938:29:77","nodes":[],"errorSelector":"4a76da80","name":"InitialDepositFailed","nameLocation":"944:20:77","parameters":{"id":54195,"nodeType":"ParameterList","parameters":[],"src":"964:2:77"}},{"id":54198,"nodeType":"ErrorDefinition","src":"1052:22:77","nodes":[],"errorSelector":"79cacff1","name":"DepositFailed","nameLocation":"1058:13:77","parameters":{"id":54197,"nodeType":"ParameterList","parameters":[],"src":"1071:2:77"}},{"id":54200,"nodeType":"ErrorDefinition","src":"1079:23:77","nodes":[],"errorSelector":"90b8ec18","name":"TransferFailed","nameLocation":"1085:14:77","parameters":{"id":54199,"nodeType":"ParameterList","parameters":[],"src":"1099:2:77"}},{"id":54202,"nodeType":"VariableDeclaration","src":"1139:36:77","nodes":[],"baseFunctions":[59304],"constant":false,"functionSelector":"bec070d6","mutability":"mutable","name":"stabilizerNFTContract","nameLocation":"1154:21:77","scope":54504,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54201,"name":"address","nodeType":"ElementaryTypeName","src":"1139:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":54204,"nodeType":"VariableDeclaration","src":"1224:22:77","nodes":[],"constant":false,"functionSelector":"17d70f7c","mutability":"mutable","name":"tokenId","nameLocation":"1239:7:77","scope":54504,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54203,"name":"uint256","nodeType":"ElementaryTypeName","src":"1224:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":54206,"nodeType":"VariableDeclaration","src":"1391:20:77","nodes":[],"baseFunctions":[59314],"constant":false,"functionSelector":"c1fe3e48","mutability":"mutable","name":"stETH","nameLocation":"1406:5:77","scope":54504,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54205,"name":"address","nodeType":"ElementaryTypeName","src":"1391:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":54208,"nodeType":"VariableDeclaration","src":"1474:19:77","nodes":[],"baseFunctions":[59319],"constant":false,"functionSelector":"23509a2d","mutability":"mutable","name":"lido","nameLocation":"1489:4:77","scope":54504,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54207,"name":"address","nodeType":"ElementaryTypeName","src":"1474:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":54221,"nodeType":"ModifierDefinition","src":"1635:135:77","nodes":[],"body":{"id":54220,"nodeType":"Block","src":"1664:106:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54213,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":54210,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"1678:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54211,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1682:6:77","memberName":"sender","nodeType":"MemberAccess","src":"1678:10:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":54212,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54202,"src":"1692:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"1678:35:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54218,"nodeType":"IfStatement","src":"1674:78:77","trueBody":{"expression":{"arguments":[{"hexValue":"43616c6c6572206973206e6f742053746162696c697a65724e4654","id":54215,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1722:29:77","typeDescriptions":{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""},"value":"Caller is not StabilizerNFT"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""}],"id":54214,"name":"revert","nodeType":"Identifier","overloadedDeclarations":[-19,-19],"referencedDeclaration":-19,"src":"1715:6:77","typeDescriptions":{"typeIdentifier":"t_function_revert_pure$_t_string_memory_ptr_$returns$__$","typeString":"function (string memory) pure"}},"id":54216,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1715:37:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54217,"nodeType":"ExpressionStatement","src":"1715:37:77"}},{"id":54219,"nodeType":"PlaceholderStatement","src":"1762:1:77"}]},"name":"onlyStabilizerNFT","nameLocation":"1644:17:77","parameters":{"id":54209,"nodeType":"ParameterList","parameters":[],"src":"1661:2:77"},"virtual":false,"visibility":"internal"},{"id":54229,"nodeType":"FunctionDefinition","src":"1829:97:77","nodes":[],"body":{"id":54228,"nodeType":"Block","src":"1843:83:77","nodes":[],"statements":[{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":54225,"name":"_disableInitializers","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39677,"src":"1853:20:77","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":54226,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1853:22:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54227,"nodeType":"ExpressionStatement","src":"1853:22:77"}]},"documentation":{"id":54222,"nodeType":"StructuredDocumentation","src":"1776:48:77","text":"@custom:oz-upgrades-unsafe-allow constructor"},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":54223,"nodeType":"ParameterList","parameters":[],"src":"1840:2:77"},"returnParameters":{"id":54224,"nodeType":"ParameterList","parameters":[],"src":"1843:0:77"},"scope":54504,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":54285,"nodeType":"FunctionDefinition","src":"2411:1308:77","nodes":[],"body":{"id":54284,"nodeType":"Block","src":"2684:1035:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":54262,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":54255,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54248,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54243,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54232,"src":"2759:14:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54246,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2785:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54245,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2777:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54244,"name":"address","nodeType":"ElementaryTypeName","src":"2777:7:77","typeDescriptions":{}}},"id":54247,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2777:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2759:28:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54254,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54249,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54236,"src":"2791:6:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54252,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2809:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54251,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2801:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54250,"name":"address","nodeType":"ElementaryTypeName","src":"2801:7:77","typeDescriptions":{}}},"id":54253,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2801:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2791:20:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2759:52:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54261,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54256,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54238,"src":"2815:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54259,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2832:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54258,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2824:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54257,"name":"address","nodeType":"ElementaryTypeName","src":"2824:7:77","typeDescriptions":{}}},"id":54260,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2824:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2815:19:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2759:75:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54267,"nodeType":"IfStatement","src":"2755:126:77","trueBody":{"id":54266,"nodeType":"Block","src":"2836:45:77","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54263,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54192,"src":"2857:11:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54264,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2857:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54265,"nodeType":"RevertStatement","src":"2850:20:77"}]}},{"expression":{"id":54270,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54268,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54202,"src":"3060:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54269,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54232,"src":"3084:14:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3060:38:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":54271,"nodeType":"ExpressionStatement","src":"3060:38:77"},{"expression":{"id":54274,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54272,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54204,"src":"3108:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54273,"name":"_tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54234,"src":"3118:8:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3108:18:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":54275,"nodeType":"ExpressionStatement","src":"3108:18:77"},{"expression":{"id":54278,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54276,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54206,"src":"3193:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54277,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54236,"src":"3201:6:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3193:14:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":54279,"nodeType":"ExpressionStatement","src":"3193:14:77"},{"expression":{"id":54282,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":54280,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54208,"src":"3217:4:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":54281,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54238,"src":"3224:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3217:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":54283,"nodeType":"ExpressionStatement","src":"3217:12:77"}]},"documentation":{"id":54230,"nodeType":"StructuredDocumentation","src":"1959:447:77","text":" @notice Initializes the escrow contract state.\n @param _stabilizerNFT The address of the controlling StabilizerNFT contract.\n @param _tokenId The ID of the Stabilizer NFT this escrow is associated with.\n @param _stETH The address of the stETH token.\n @param _lido The address of the Lido staking pool.\n @dev Sets immutable addresses and the token ID. Meant to be called once after clone deployment."},"functionSelector":"358394d8","implemented":true,"kind":"function","modifiers":[{"id":54241,"kind":"modifierInvocation","modifierName":{"id":54240,"name":"initializer","nameLocations":["2672:11:77"],"nodeType":"IdentifierPath","referencedDeclaration":39563,"src":"2672:11:77"},"nodeType":"ModifierInvocation","src":"2672:11:77"}],"name":"initialize","nameLocation":"2420:10:77","parameters":{"id":54239,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54232,"mutability":"mutable","name":"_stabilizerNFT","nameLocation":"2480:14:77","nodeType":"VariableDeclaration","scope":54285,"src":"2472:22:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54231,"name":"address","nodeType":"ElementaryTypeName","src":"2472:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":54234,"mutability":"mutable","name":"_tokenId","nameLocation":"2512:8:77","nodeType":"VariableDeclaration","scope":54285,"src":"2504:16:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54233,"name":"uint256","nodeType":"ElementaryTypeName","src":"2504:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":54236,"mutability":"mutable","name":"_stETH","nameLocation":"2627:6:77","nodeType":"VariableDeclaration","scope":54285,"src":"2619:14:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54235,"name":"address","nodeType":"ElementaryTypeName","src":"2619:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":54238,"mutability":"mutable","name":"_lido","nameLocation":"2651:5:77","nodeType":"VariableDeclaration","scope":54285,"src":"2643:13:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54237,"name":"address","nodeType":"ElementaryTypeName","src":"2643:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2430:232:77"},"returnParameters":{"id":54242,"nodeType":"ParameterList","parameters":[],"src":"2684:0:77"},"scope":54504,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":54325,"nodeType":"FunctionDefinition","src":"3932:328:77","nodes":[],"body":{"id":54324,"nodeType":"Block","src":"3986:274:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54294,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":54291,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4000:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54292,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4004:5:77","memberName":"value","nodeType":"MemberAccess","src":"4000:9:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":54293,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4013:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4000:14:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54298,"nodeType":"IfStatement","src":"3996:39:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54295,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54194,"src":"4023:10:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54296,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4023:12:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54297,"nodeType":"RevertStatement","src":"4016:19:77"}},{"clauses":[{"block":{"id":54311,"nodeType":"Block","src":"4131:2:77","statements":[]},"errorName":"","id":54312,"nodeType":"TryCatchClause","src":"4131:2:77"},{"block":{"id":54316,"nodeType":"Block","src":"4148:47:77","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54313,"name":"DepositFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54198,"src":"4169:13:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54314,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4169:15:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54315,"nodeType":"RevertStatement","src":"4162:22:77"}]},"errorName":"","id":54317,"nodeType":"TryCatchClause","src":"4142:53:77"}],"externalCall":{"arguments":[{"arguments":[{"hexValue":"30","id":54308,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4127:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54307,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4119:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54306,"name":"address","nodeType":"ElementaryTypeName","src":"4119:7:77","typeDescriptions":{}}},"id":54309,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4119:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54300,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54208,"src":"4088:4:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54299,"name":"ILido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58970,"src":"4082:5:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ILido_$58970_$","typeString":"type(contract ILido)"}},"id":54301,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4082:11:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ILido_$58970","typeString":"contract ILido"}},"id":54302,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4094:6:77","memberName":"submit","nodeType":"MemberAccess","referencedDeclaration":58969,"src":"4082:18:77","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$","typeString":"function (address) payable external returns (uint256)"}},"id":54305,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"names":["value"],"nodeType":"FunctionCallOptions","options":[{"expression":{"id":54303,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4108:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54304,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4112:5:77","memberName":"value","nodeType":"MemberAccess","src":"4108:9:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"src":"4082:36:77","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$value","typeString":"function (address) payable external returns (uint256)"}},"id":54310,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4082:48:77","tryCall":true,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":54318,"nodeType":"TryStatement","src":"4078:117:77"},{"eventCall":{"arguments":[{"expression":{"id":54320,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4225:3:77","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":54321,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4229:5:77","memberName":"value","nodeType":"MemberAccess","src":"4225:9:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54319,"name":"DepositReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59287,"src":"4209:15:77","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":54322,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4209:26:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54323,"nodeType":"EmitStatement","src":"4204:31:77"}]},"baseFunctions":[59322],"documentation":{"id":54286,"nodeType":"StructuredDocumentation","src":"3760:167:77","text":" @notice Receives additional ETH deposits forwarded by StabilizerNFT.\n @dev Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"functionSelector":"d0e30db0","implemented":true,"kind":"function","modifiers":[{"id":54289,"kind":"modifierInvocation","modifierName":{"id":54288,"name":"onlyStabilizerNFT","nameLocations":["3968:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":54221,"src":"3968:17:77"},"nodeType":"ModifierInvocation","src":"3968:17:77"}],"name":"deposit","nameLocation":"3941:7:77","parameters":{"id":54287,"nodeType":"ParameterList","parameters":[],"src":"3948:2:77"},"returnParameters":{"id":54290,"nodeType":"ParameterList","parameters":[],"src":"3986:0:77"},"scope":54504,"stateMutability":"payable","virtual":false,"visibility":"external"},{"id":54391,"nodeType":"FunctionDefinition","src":"4564:586:77","nodes":[],"body":{"id":54390,"nodeType":"Block","src":"4662:488:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54337,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54335,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54328,"src":"4676:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":54336,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4686:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4676:11:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54341,"nodeType":"IfStatement","src":"4672:36:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54338,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54194,"src":"4696:10:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54339,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4696:12:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54340,"nodeType":"RevertStatement","src":"4689:19:77"}},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54347,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54342,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54330,"src":"4722:18:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54345,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4752:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54344,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4744:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54343,"name":"address","nodeType":"ElementaryTypeName","src":"4744:7:77","typeDescriptions":{}}},"id":54346,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4744:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4722:32:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54351,"nodeType":"IfStatement","src":"4718:58:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54348,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54192,"src":"4763:11:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54349,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4763:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54350,"nodeType":"RevertStatement","src":"4756:20:77"}},{"assignments":[54353],"declarations":[{"constant":false,"id":54353,"mutability":"mutable","name":"currentBalance","nameLocation":"4795:14:77","nodeType":"VariableDeclaration","scope":54390,"src":"4787:22:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54352,"name":"uint256","nodeType":"ElementaryTypeName","src":"4787:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":54363,"initialValue":{"arguments":[{"arguments":[{"id":54360,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"4844:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}],"id":54359,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4836:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54358,"name":"address","nodeType":"ElementaryTypeName","src":"4836:7:77","typeDescriptions":{}}},"id":54361,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4836:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54355,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54206,"src":"4819:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54354,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"4812:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54356,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4812:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54357,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4826:9:77","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"4812:23:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":54362,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4812:38:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4787:63:77"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54366,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54364,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54328,"src":"4864:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":54365,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54353,"src":"4873:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4864:23:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54376,"nodeType":"IfStatement","src":"4860:99:77","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":54370,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"4929:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}],"id":54369,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4921:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54368,"name":"address","nodeType":"ElementaryTypeName","src":"4921:7:77","typeDescriptions":{}}},"id":54371,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4921:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54372,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54353,"src":"4936:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":54373,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54328,"src":"4952:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54367,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"4896:24:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":54374,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4896:63:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54375,"nodeType":"RevertStatement","src":"4889:70:77"}},{"expression":{"arguments":[{"id":54381,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54330,"src":"5041:18:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54382,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54328,"src":"5061:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54378,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54206,"src":"5026:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54377,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"5019:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54379,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5019:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54380,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5033:7:77","memberName":"approve","nodeType":"MemberAccess","referencedDeclaration":43792,"src":"5019:21:77","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":54383,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5019:49:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54384,"nodeType":"ExpressionStatement","src":"5019:49:77"},{"eventCall":{"arguments":[{"id":54386,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54330,"src":"5102:18:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54387,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54328,"src":"5122:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54385,"name":"AllocationApproved","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59293,"src":"5083:18:77","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":54388,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5083:46:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54389,"nodeType":"EmitStatement","src":"5078:51:77"}]},"baseFunctions":[59329],"documentation":{"id":54326,"nodeType":"StructuredDocumentation","src":"4266:293:77","text":" @notice Approves the PositionNFT contract to spend stETH for allocation.\n @param amount The amount of stETH to approve.\n @param positionNFTAddress The address of the PositionNFT contract.\n @dev Callable only by StabilizerNFT. Checks for sufficient balance."},"functionSelector":"4f68ae75","implemented":true,"kind":"function","modifiers":[{"id":54333,"kind":"modifierInvocation","modifierName":{"id":54332,"name":"onlyStabilizerNFT","nameLocations":["4644:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":54221,"src":"4644:17:77"},"nodeType":"ModifierInvocation","src":"4644:17:77"}],"name":"approveAllocation","nameLocation":"4573:17:77","parameters":{"id":54331,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54328,"mutability":"mutable","name":"amount","nameLocation":"4599:6:77","nodeType":"VariableDeclaration","scope":54391,"src":"4591:14:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54327,"name":"uint256","nodeType":"ElementaryTypeName","src":"4591:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":54330,"mutability":"mutable","name":"positionNFTAddress","nameLocation":"4615:18:77","nodeType":"VariableDeclaration","scope":54391,"src":"4607:26:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54329,"name":"address","nodeType":"ElementaryTypeName","src":"4607:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"4590:44:77"},"returnParameters":{"id":54334,"nodeType":"ParameterList","parameters":[],"src":"4662:0:77"},"scope":54504,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":54472,"nodeType":"FunctionDefinition","src":"5530:898:77","nodes":[],"body":{"id":54471,"nodeType":"Block","src":"5602:826:77","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54401,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54399,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54394,"src":"5616:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":54400,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5626:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5616:11:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54405,"nodeType":"IfStatement","src":"5612:36:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54402,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54194,"src":"5636:10:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54403,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5636:12:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54404,"nodeType":"RevertStatement","src":"5629:19:77"}},{"assignments":[54407],"declarations":[{"constant":false,"id":54407,"mutability":"mutable","name":"currentBalance","nameLocation":"5666:14:77","nodeType":"VariableDeclaration","scope":54471,"src":"5658:22:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54406,"name":"uint256","nodeType":"ElementaryTypeName","src":"5658:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":54417,"initialValue":{"arguments":[{"arguments":[{"id":54414,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5715:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}],"id":54413,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5707:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54412,"name":"address","nodeType":"ElementaryTypeName","src":"5707:7:77","typeDescriptions":{}}},"id":54415,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5707:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54409,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54206,"src":"5690:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54408,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"5683:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54410,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5683:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54411,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5697:9:77","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"5683:23:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":54416,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5683:38:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5658:63:77"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":54420,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54418,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54394,"src":"5735:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":54419,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54407,"src":"5744:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5735:23:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54430,"nodeType":"IfStatement","src":"5731:99:77","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":54424,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5800:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}],"id":54423,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5792:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54422,"name":"address","nodeType":"ElementaryTypeName","src":"5792:7:77","typeDescriptions":{}}},"id":54425,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5792:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54426,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54407,"src":"5807:14:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":54427,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54394,"src":"5823:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54421,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"5767:24:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":54428,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5767:63:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54429,"nodeType":"RevertStatement","src":"5760:70:77"}},{"assignments":[54432],"declarations":[{"constant":false,"id":54432,"mutability":"mutable","name":"currentOwner","nameLocation":"5941:12:77","nodeType":"VariableDeclaration","scope":54471,"src":"5933:20:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54431,"name":"address","nodeType":"ElementaryTypeName","src":"5933:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":54439,"initialValue":{"arguments":[{"id":54437,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54204,"src":"5995:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54434,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54202,"src":"5964:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54433,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"5956:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":54435,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5956:30:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":54436,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5987:7:77","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"5956:38:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":54438,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5956:47:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"5933:70:77"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":54445,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":54440,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54432,"src":"6039:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":54443,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6063:1:77","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":54442,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6055:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54441,"name":"address","nodeType":"ElementaryTypeName","src":"6055:7:77","typeDescriptions":{}}},"id":54444,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6055:10:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"6039:26:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54449,"nodeType":"IfStatement","src":"6035:52:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54446,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54192,"src":"6074:11:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54447,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6074:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54448,"nodeType":"RevertStatement","src":"6067:20:77"}},{"assignments":[54451],"declarations":[{"constant":false,"id":54451,"mutability":"mutable","name":"success","nameLocation":"6187:7:77","nodeType":"VariableDeclaration","scope":54471,"src":"6182:12:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":54450,"name":"bool","nodeType":"ElementaryTypeName","src":"6182:4:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":54459,"initialValue":{"arguments":[{"id":54456,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54432,"src":"6220:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54457,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54394,"src":"6234:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54453,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54206,"src":"6204:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54452,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"6197:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54454,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6197:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54455,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6211:8:77","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":43772,"src":"6197:22:77","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":54458,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6197:44:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"6182:59:77"},{"condition":{"id":54461,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"6255:8:77","subExpression":{"id":54460,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54451,"src":"6256:7:77","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":54465,"nodeType":"IfStatement","src":"6251:37:77","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":54462,"name":"TransferFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54200,"src":"6272:14:77","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":54463,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6272:16:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":54464,"nodeType":"RevertStatement","src":"6265:23:77"}},{"eventCall":{"arguments":[{"id":54467,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54432,"src":"6400:12:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":54468,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54394,"src":"6414:6:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":54466,"name":"WithdrawalCompleted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":59299,"src":"6380:19:77","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":54469,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6380:41:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":54470,"nodeType":"EmitStatement","src":"6375:46:77"}]},"baseFunctions":[59334],"documentation":{"id":54392,"nodeType":"StructuredDocumentation","src":"5242:283:77","text":" @notice Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\n @param amount The amount of stETH to withdraw.\n @dev Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance."},"functionSelector":"a9015400","implemented":true,"kind":"function","modifiers":[{"id":54397,"kind":"modifierInvocation","modifierName":{"id":54396,"name":"onlyStabilizerNFT","nameLocations":["5584:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":54221,"src":"5584:17:77"},"nodeType":"ModifierInvocation","src":"5584:17:77"}],"name":"withdrawUnallocated","nameLocation":"5539:19:77","parameters":{"id":54395,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54394,"mutability":"mutable","name":"amount","nameLocation":"5567:6:77","nodeType":"VariableDeclaration","scope":54472,"src":"5559:14:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54393,"name":"uint256","nodeType":"ElementaryTypeName","src":"5559:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5558:16:77"},"returnParameters":{"id":54398,"nodeType":"ParameterList","parameters":[],"src":"5602:0:77"},"scope":54504,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":54490,"nodeType":"FunctionDefinition","src":"6714:131:77","nodes":[],"body":{"id":54489,"nodeType":"Block","src":"6783:62:77","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[{"id":54485,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"6832:4:77","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$54504","typeString":"contract StabilizerEscrow"}],"id":54484,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6824:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":54483,"name":"address","nodeType":"ElementaryTypeName","src":"6824:7:77","typeDescriptions":{}}},"id":54486,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6824:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":54480,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54206,"src":"6807:5:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54479,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"6800:6:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":54481,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6800:13:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":54482,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6814:9:77","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"6800:23:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":54487,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6800:38:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":54478,"id":54488,"nodeType":"Return","src":"6793:45:77"}]},"baseFunctions":[59340],"documentation":{"id":54473,"nodeType":"StructuredDocumentation","src":"6465:244:77","text":" @notice Returns the current stETH balance of this contract.\n @dev Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\n @return The amount of stETH held by the escrow."},"functionSelector":"ec60b9ab","implemented":true,"kind":"function","modifiers":[],"name":"unallocatedStETH","nameLocation":"6723:16:77","overrides":{"id":54475,"nodeType":"OverrideSpecifier","overrides":[],"src":"6756:8:77"},"parameters":{"id":54474,"nodeType":"ParameterList","parameters":[],"src":"6739:2:77"},"returnParameters":{"id":54478,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54477,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":54490,"src":"6774:7:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":54476,"name":"uint256","nodeType":"ElementaryTypeName","src":"6774:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6773:9:77"},"scope":54504,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":54503,"nodeType":"FunctionDefinition","src":"6851:130:77","nodes":[],"body":{"id":54502,"nodeType":"Block","src":"6910:71:77","nodes":[],"statements":[{"expression":{"arguments":[{"id":54499,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54204,"src":"6966:7:77","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":54496,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":54202,"src":"6935:21:77","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":54495,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"6927:7:77","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":54497,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6927:30:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":54498,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6958:7:77","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"6927:38:77","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":54500,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6927:47:77","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":54494,"id":54501,"nodeType":"Return","src":"6920:54:77"}]},"baseFunctions":[59309],"functionSelector":"7d0e9bba","implemented":true,"kind":"function","modifiers":[],"name":"stabilizerOwner","nameLocation":"6860:15:77","parameters":{"id":54491,"nodeType":"ParameterList","parameters":[],"src":"6875:2:77"},"returnParameters":{"id":54494,"nodeType":"ParameterList","parameters":[{"constant":false,"id":54493,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":54503,"src":"6901:7:77","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":54492,"name":"address","nodeType":"ElementaryTypeName","src":"6901:7:77","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"6900:9:77"},"scope":54504,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[{"baseName":{"id":54187,"name":"Initializable","nameLocations":["713:13:77"],"nodeType":"IdentifierPath","referencedDeclaration":39723,"src":"713:13:77"},"id":54188,"nodeType":"InheritanceSpecifier","src":"713:13:77"},{"baseName":{"id":54189,"name":"IStabilizerEscrow","nameLocations":["728:17:77"],"nodeType":"IdentifierPath","referencedDeclaration":59341,"src":"728:17:77"},"id":54190,"nodeType":"InheritanceSpecifier","src":"728:17:77"}],"canonicalName":"StabilizerEscrow","contractDependencies":[],"contractKind":"contract","documentation":{"id":54186,"nodeType":"StructuredDocumentation","src":"426:257:77","text":" @title StabilizerEscrow\n @notice A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\n @dev Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone."},"fullyImplemented":true,"linearizedBaseContracts":[54504,59341,42340,39723],"name":"StabilizerEscrow","nameLocation":"693:16:77","scope":54505,"usedErrors":[39472,39475,42310,42315,42320,42329,42334,42339,54192,54194,54196,54198,54200],"usedEvents":[39480,59287,59293,59299]}],"license":"MIT"},"id":77}