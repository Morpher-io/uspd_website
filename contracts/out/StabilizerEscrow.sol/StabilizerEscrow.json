{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"receive","stateMutability":"payable"},{"type":"function","name":"approveAllocation","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"positionNFTAddress","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"deposit","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"initialize","inputs":[{"name":"_stabilizerNFT","type":"address","internalType":"address"},{"name":"_tokenId","type":"uint256","internalType":"uint256"},{"name":"_stETH","type":"address","internalType":"address"},{"name":"_lido","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"lido","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stETH","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerNFTContract","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerOwner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"tokenId","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"unallocatedStETH","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"withdrawUnallocated","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"AllocationApproved","inputs":[{"name":"spender","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"DepositReceived","inputs":[{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Initialized","inputs":[{"name":"version","type":"uint64","indexed":false,"internalType":"uint64"}],"anonymous":false},{"type":"event","name":"WithdrawalCompleted","inputs":[{"name":"recipient","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"DepositFailed","inputs":[]},{"type":"error","name":"ERC20InsufficientAllowance","inputs":[{"name":"spender","type":"address","internalType":"address"},{"name":"allowance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InsufficientBalance","inputs":[{"name":"sender","type":"address","internalType":"address"},{"name":"balance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InvalidApprover","inputs":[{"name":"approver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidReceiver","inputs":[{"name":"receiver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSender","inputs":[{"name":"sender","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSpender","inputs":[{"name":"spender","type":"address","internalType":"address"}]},{"type":"error","name":"InitialDepositFailed","inputs":[]},{"type":"error","name":"InvalidInitialization","inputs":[]},{"type":"error","name":"NotInitializing","inputs":[]},{"type":"error","name":"TransferFailed","inputs":[]},{"type":"error","name":"ZeroAddress","inputs":[]},{"type":"error","name":"ZeroAmount","inputs":[]}],"bytecode":{"object":"0x6080604052348015600e575f5ffd5b5060156019565b60c9565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff161560685760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b039081161460c65780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b610ae9806100d65f395ff3fe608060405260043610610092575f3560e01c8063a901540011610057578063a901540014610150578063bec070d61461016f578063c1fe3e481461018d578063d0e30db0146101ac578063ec60b9ab146101b4575f5ffd5b806317d70f7c1461009d57806323509a2d146100c5578063358394d8146100fc5780634f68ae751461011d5780637d0e9bba1461013c575f5ffd5b3661009957005b5f5ffd5b3480156100a8575f5ffd5b506100b260015481565b6040519081526020015b60405180910390f35b3480156100d0575f5ffd5b506003546100e4906001600160a01b031681565b6040516001600160a01b0390911681526020016100bc565b348015610107575f5ffd5b5061011b61011636600461098f565b6101c8565b005b348015610128575f5ffd5b5061011b6101373660046109df565b61035e565b348015610147575f5ffd5b506100e4610531565b34801561015b575f5ffd5b5061011b61016a366004610a0d565b6105aa565b34801561017a575f5ffd5b505f546100e4906001600160a01b031681565b348015610198575f5ffd5b506002546100e4906001600160a01b031681565b61011b61080a565b3480156101bf575f5ffd5b506100b261090e565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff165f8115801561020d5750825b90505f8267ffffffffffffffff1660011480156102295750303b155b905081158015610237575080155b156102555760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561027f57845460ff60401b1916600160401b1785555b6001600160a01b038916158061029c57506001600160a01b038716155b806102ae57506001600160a01b038616155b156102cc5760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a84169083161790556003805492891692909116919091179055831561035357845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146103905760405162461bcd60e51b815260040161038790610a24565b60405180910390fd5b815f036103b057604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166103d75760405163d92e233d60e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561041d573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104419190610a5b565b9050808311156104745760405163391434e360e21b81523060048201526024810182905260448101849052606401610387565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156104c4573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104e89190610a72565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161052491815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916105669160040190815260200190565b602060405180830381865afa158015610581573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105a59190610a98565b905090565b5f546001600160a01b031633146105d35760405162461bcd60e51b815260040161038790610a24565b805f036105f357604051631f2a200560e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610639573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061065d9190610a5b565b9050808211156106905760405163391434e360e21b81523060048201526024810182905260448101839052606401610387565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106c59160040190815260200190565b602060405180830381865afa1580156106e0573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107049190610a98565b90506001600160a01b03811661072d5760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af115801561077d573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107a19190610a72565b9050806107c1576040516312171d8360e31b815260040160405180910390fd5b816001600160a01b03167f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c4856040516107fc91815260200190565b60405180910390a250505050565b5f546001600160a01b031633146108335760405162461bcd60e51b815260040161038790610a24565b345f0361085357604051631f2a200560e01b815260040160405180910390fd5b60035460405163a1903eab60e01b81525f60048201526001600160a01b039091169063a1903eab90349060240160206040518083038185885af1935050505080156108bb575060408051601f3d908101601f191682019092526108b891810190610a5b565b60015b6108d8576040516379cacff160e01b815260040160405180910390fd5b506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a1565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610954573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105a59190610a5b565b6001600160a01b038116811461098c575f5ffd5b50565b5f5f5f5f608085870312156109a2575f5ffd5b84356109ad81610978565b93506020850135925060408501356109c481610978565b915060608501356109d481610978565b939692955090935050565b5f5f604083850312156109f0575f5ffd5b823591506020830135610a0281610978565b809150509250929050565b5f60208284031215610a1d575f5ffd5b5035919050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b5f60208284031215610a6b575f5ffd5b5051919050565b5f60208284031215610a82575f5ffd5b81518015158114610a91575f5ffd5b9392505050565b5f60208284031215610aa8575f5ffd5b8151610a918161097856fea2646970667358221220f07d1e11dead2374af6ac28bdcf7b6ca768dfe2f29ed563e8ae0efcf87ca08f164736f6c634300081d0033","sourceMap":"685:6534:95:-:0;;;1830:97;;;;;;;;;-1:-1:-1;1854:22:95;:20;:22::i;:::-;685:6534;;7711:422:22;3147:66;7900:15;;;;;;;7896:76;;;7938:23;;-1:-1:-1;;;7938:23:22;;;;;;;;;;;7896:76;7985:14;;-1:-1:-1;;;;;7985:14:22;;;:34;7981:146;;8035:33;;-1:-1:-1;;;;;;8035:33:22;-1:-1:-1;;;;;8035:33:22;;;;;8087:29;;158:50:122;;;8087:29:22;;146:2:122;131:18;8087:29:22;;;;;;;7981:146;7760:373;7711:422::o;14:200:122:-;685:6534:95;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405260043610610092575f3560e01c8063a901540011610057578063a901540014610150578063bec070d61461016f578063c1fe3e481461018d578063d0e30db0146101ac578063ec60b9ab146101b4575f5ffd5b806317d70f7c1461009d57806323509a2d146100c5578063358394d8146100fc5780634f68ae751461011d5780637d0e9bba1461013c575f5ffd5b3661009957005b5f5ffd5b3480156100a8575f5ffd5b506100b260015481565b6040519081526020015b60405180910390f35b3480156100d0575f5ffd5b506003546100e4906001600160a01b031681565b6040516001600160a01b0390911681526020016100bc565b348015610107575f5ffd5b5061011b61011636600461098f565b6101c8565b005b348015610128575f5ffd5b5061011b6101373660046109df565b61035e565b348015610147575f5ffd5b506100e4610531565b34801561015b575f5ffd5b5061011b61016a366004610a0d565b6105aa565b34801561017a575f5ffd5b505f546100e4906001600160a01b031681565b348015610198575f5ffd5b506002546100e4906001600160a01b031681565b61011b61080a565b3480156101bf575f5ffd5b506100b261090e565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a008054600160401b810460ff16159067ffffffffffffffff165f8115801561020d5750825b90505f8267ffffffffffffffff1660011480156102295750303b155b905081158015610237575080155b156102555760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561027f57845460ff60401b1916600160401b1785555b6001600160a01b038916158061029c57506001600160a01b038716155b806102ae57506001600160a01b038616155b156102cc5760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a84169083161790556003805492891692909116919091179055831561035357845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146103905760405162461bcd60e51b815260040161038790610a24565b60405180910390fd5b815f036103b057604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166103d75760405163d92e233d60e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa15801561041d573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104419190610a5b565b9050808311156104745760405163391434e360e21b81523060048201526024810182905260448101849052606401610387565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156104c4573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906104e89190610a72565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161052491815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916105669160040190815260200190565b602060405180830381865afa158015610581573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105a59190610a98565b905090565b5f546001600160a01b031633146105d35760405162461bcd60e51b815260040161038790610a24565b805f036105f357604051631f2a200560e01b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610639573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061065d9190610a5b565b9050808211156106905760405163391434e360e21b81523060048201526024810182905260448101839052606401610387565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106c59160040190815260200190565b602060405180830381865afa1580156106e0573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107049190610a98565b90506001600160a01b03811661072d5760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af115801561077d573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107a19190610a72565b9050806107c1576040516312171d8360e31b815260040160405180910390fd5b816001600160a01b03167f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c4856040516107fc91815260200190565b60405180910390a250505050565b5f546001600160a01b031633146108335760405162461bcd60e51b815260040161038790610a24565b345f0361085357604051631f2a200560e01b815260040160405180910390fd5b60035460405163a1903eab60e01b81525f60048201526001600160a01b039091169063a1903eab90349060240160206040518083038185885af1935050505080156108bb575060408051601f3d908101601f191682019092526108b891810190610a5b565b60015b6108d8576040516379cacff160e01b815260040160405180910390fd5b506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a1565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610954573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105a59190610a5b565b6001600160a01b038116811461098c575f5ffd5b50565b5f5f5f5f608085870312156109a2575f5ffd5b84356109ad81610978565b93506020850135925060408501356109c481610978565b915060608501356109d481610978565b939692955090935050565b5f5f604083850312156109f0575f5ffd5b823591506020830135610a0281610978565b809150509250929050565b5f60208284031215610a1d575f5ffd5b5035919050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b5f60208284031215610a6b575f5ffd5b5051919050565b5f60208284031215610a82575f5ffd5b81518015158114610a91575f5ffd5b9392505050565b5f60208284031215610aa8575f5ffd5b8151610a918161097856fea2646970667358221220f07d1e11dead2374af6ac28bdcf7b6ca768dfe2f29ed563e8ae0efcf87ca08f164736f6c634300081d0033","sourceMap":"685:6534:95:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1225:22;;;;;;;;;;;;;;;;;;;160:25:122;;;148:2;133:18;1225:22:95;;;;;;;;1475:19;;;;;;;;;;-1:-1:-1;1475:19:95;;;;-1:-1:-1;;;;;1475:19:95;;;;;;-1:-1:-1;;;;;360:32:122;;;342:51;;330:2;315:18;1475:19:95;196:203:122;2412:1308:95;;;;;;;;;;-1:-1:-1;2412:1308:95;;;;;:::i;:::-;;:::i;:::-;;4565:586;;;;;;;;;;-1:-1:-1;4565:586:95;;;;;:::i;:::-;;:::i;6852:130::-;;;;;;;;;;;;;:::i;5531:898::-;;;;;;;;;;-1:-1:-1;5531:898:95;;;;;:::i;:::-;;:::i;1140:36::-;;;;;;;;;;-1:-1:-1;1140:36:95;;;;-1:-1:-1;;;;;1140:36:95;;;1392:20;;;;;;;;;;-1:-1:-1;1392:20:95;;;;-1:-1:-1;;;;;1392:20:95;;;3933:328;;;:::i;6715:131::-;;;;;;;;;;;;;:::i;2412:1308::-;3147:66:22;4302:15;;-1:-1:-1;;;4302:15:22;;;;4301:16;;4348:14;;4158:30;4726:16;;:34;;;;;4746:14;4726:34;4706:54;;4770:17;4790:11;:16;;4805:1;4790:16;:50;;;;-1:-1:-1;4818:4:22;4810:25;:30;4790:50;4770:70;;4856:12;4855:13;:30;;;;;4873:12;4872:13;4855:30;4851:91;;;4908:23;;-1:-1:-1;;;4908:23:22;;;;;;;;;;;4851:91;4951:18;;-1:-1:-1;;4951:18:22;4968:1;4951:18;;;4979:67;;;;5013:22;;-1:-1:-1;;;;5013:22:22;-1:-1:-1;;;5013:22:22;;;4979:67;-1:-1:-1;;;;;2760:28:95;::::1;::::0;;:52:::1;;-1:-1:-1::0;;;;;;2792:20:95;::::1;::::0;2760:52:::1;:75;;;-1:-1:-1::0;;;;;;2816:19:95;::::1;::::0;2760:75:::1;2756:126;;;2858:13;;-1:-1:-1::0;;;2858:13:95::1;;;;;;;;;;;2756:126;3061:21;:38:::0;;-1:-1:-1;;;;;3061:38:95;;::::1;-1:-1:-1::0;;;;;;3061:38:95;;::::1;;::::0;;;;3109:18;;;3194:5:::1;:14:::0;;;;::::1;::::0;;::::1;;::::0;;3218:4:::1;:12:::0;;;;::::1;::::0;;;::::1;::::0;;;::::1;::::0;;5066:101:22;;;;5100:23;;-1:-1:-1;;;;5100:23:22;;;5142:14;;-1:-1:-1;1951:50:122;;5142:14:22;;1939:2:122;1924:18;5142:14:22;;;;;;;5066:101;4092:1081;;;;;2412:1308:95;;;;:::o;4565:586::-;1693:21;;-1:-1:-1;;;;;1693:21:95;1679:10;:35;1675:78;;1716:37;;-1:-1:-1;;;1716:37:95;;;;;;;:::i;:::-;;;;;;;;1675:78;4677:6:::1;4687:1;4677:11:::0;4673:36:::1;;4697:12;;-1:-1:-1::0;;;4697:12:95::1;;;;;;;;;;;4673:36;-1:-1:-1::0;;;;;4723:32:95;::::1;4719:58;;4764:13;;-1:-1:-1::0;;;4764:13:95::1;;;;;;;;;;;4719:58;4820:5;::::0;4813:38:::1;::::0;-1:-1:-1;;;4813:38:95;;4845:4:::1;4813:38;::::0;::::1;342:51:122::0;4788:22:95::1;::::0;-1:-1:-1;;;;;4820:5:95::1;::::0;4813:23:::1;::::0;315:18:122;;4813:38:95::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;4788:63;;4874:14;4865:6;:23;4861:99;;;4897:63;::::0;-1:-1:-1;;;4897:63:95;;4930:4:::1;4897:63;::::0;::::1;2759:51:122::0;2826:18;;;2819:34;;;2869:18;;;2862:34;;;2732:18;;4897:63:95::1;2557:345:122::0;4861:99:95::1;5027:5;::::0;5020:49:::1;::::0;-1:-1:-1;;;5020:49:95;;-1:-1:-1;;;;;3099:32:122;;;5020:49:95::1;::::0;::::1;3081:51:122::0;3148:18;;;3141:34;;;5027:5:95;;::::1;::::0;5020:21:::1;::::0;3054:18:122;;5020:49:95::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;5103:18;-1:-1:-1::0;;;;;5084:46:95::1;;5123:6;5084:46;;;;160:25:122::0;;148:2;133:18;;14:177;5084:46:95::1;;;;;;;;4663:488;4565:586:::0;;:::o;6852:130::-;6902:7;6936:21;;;6967:7;6928:47;;-1:-1:-1;;;6928:47:95;;-1:-1:-1;;;;;6936:21:95;;;;6928:38;;:47;;;;160:25:122;;;148:2;133:18;;14:177;6928:47:95;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6921:54;;6852:130;:::o;5531:898::-;1693:21;;-1:-1:-1;;;;;1693:21:95;1679:10;:35;1675:78;;1716:37;;-1:-1:-1;;;1716:37:95;;;;;;;:::i;1675:78::-;5617:6:::1;5627:1;5617:11:::0;5613:36:::1;;5637:12;;-1:-1:-1::0;;;5637:12:95::1;;;;;;;;;;;5613:36;5691:5;::::0;5684:38:::1;::::0;-1:-1:-1;;;5684:38:95;;5716:4:::1;5684:38;::::0;::::1;342:51:122::0;5659:22:95::1;::::0;-1:-1:-1;;;;;5691:5:95::1;::::0;5684:23:::1;::::0;315:18:122;;5684:38:95::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5659:63;;5745:14;5736:6;:23;5732:99;;;5768:63;::::0;-1:-1:-1;;;5768:63:95;;5801:4:::1;5768:63;::::0;::::1;2759:51:122::0;2826:18;;;2819:34;;;2869:18;;;2862:34;;;2732:18;;5768:63:95::1;2557:345:122::0;5732:99:95::1;5934:20;5965:21:::0;;;5996:7;5957:47:::1;::::0;-1:-1:-1;;;5957:47:95;;-1:-1:-1;;;;;5965:21:95;;::::1;::::0;5957:38:::1;::::0;:47:::1;::::0;::::1;;160:25:122::0;;;148:2;133:18;;14:177;5957:47:95::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5934:70:::0;-1:-1:-1;;;;;;6040:26:95;::::1;6036:52;;6075:13;;-1:-1:-1::0;;;6075:13:95::1;;;;;;;;;;;6036:52;6205:5;::::0;6198:44:::1;::::0;-1:-1:-1;;;6198:44:95;;-1:-1:-1;;;;;3099:32:122;;;6198:44:95::1;::::0;::::1;3081:51:122::0;3148:18;;;3141:34;;;6183:12:95::1;::::0;6205:5:::1;::::0;6198:22:::1;::::0;3054:18:122;;6198:44:95::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;6183:59;;6257:7;6252:37;;6273:16;;-1:-1:-1::0;;;6273:16:95::1;;;;;;;;;;;6252:37;6401:12;-1:-1:-1::0;;;;;6381:41:95::1;;6415:6;6381:41;;;;160:25:122::0;;148:2;133:18;;14:177;6381:41:95::1;;;;;;;;5603:826;;;5531:898:::0;:::o;3933:328::-;1693:21;;-1:-1:-1;;;;;1693:21:95;1679:10;:35;1675:78;;1716:37;;-1:-1:-1;;;1716:37:95;;;;;;;:::i;1675:78::-;4001:9:::1;4014:1;4001:14:::0;3997:39:::1;;4024:12;;-1:-1:-1::0;;;4024:12:95::1;;;;;;;;;;;3997:39;4089:4;::::0;4083:48:::1;::::0;-1:-1:-1;;;4083:48:95;;4089:4:::1;4083:48;::::0;::::1;342:51:122::0;-1:-1:-1;;;;;4089:4:95;;::::1;::::0;4083:18:::1;::::0;4109:9:::1;::::0;315:18:122;;4083:48:95::1;;;;;;;;;;;;;;;;;;;;-1:-1:-1::0;4083:48:95::1;::::0;;::::1;;::::0;;::::1;-1:-1:-1::0;;4083:48:95::1;::::0;::::1;::::0;;;::::1;::::0;;::::1;::::0;::::1;:::i;:::-;;;4079:117;;4170:15;;-1:-1:-1::0;;;4170:15:95::1;;;;;;;;;;;4079:117;-1:-1:-1::0;4210:26:95::1;::::0;4226:9:::1;160:25:122::0;;4210:26:95::1;::::0;148:2:122;133:18;4210:26:95::1;;;;;;;3933:328::o:0;6715:131::-;6808:5;;6801:38;;-1:-1:-1;;;6801:38:95;;6833:4;6801:38;;;342:51:122;6775:7:95;;-1:-1:-1;;;;;6808:5:95;;6801:23;;315:18:122;;6801:38:95;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;404:131:122:-;-1:-1:-1;;;;;479:31:122;;469:42;;459:70;;525:1;522;515:12;459:70;404:131;:::o;540:650::-;626:6;634;642;650;703:3;691:9;682:7;678:23;674:33;671:53;;;720:1;717;710:12;671:53;759:9;746:23;778:31;803:5;778:31;:::i;:::-;828:5;-1:-1:-1;906:2:122;891:18;;878:32;;-1:-1:-1;988:2:122;973:18;;960:32;1001:33;960:32;1001:33;:::i;:::-;1053:7;-1:-1:-1;1112:2:122;1097:18;;1084:32;1125:33;1084:32;1125:33;:::i;:::-;540:650;;;;-1:-1:-1;540:650:122;;-1:-1:-1;;540:650:122:o;1195:367::-;1263:6;1271;1324:2;1312:9;1303:7;1299:23;1295:32;1292:52;;;1340:1;1337;1330:12;1292:52;1385:23;;;-1:-1:-1;1484:2:122;1469:18;;1456:32;1497:33;1456:32;1497:33;:::i;:::-;1549:7;1539:17;;;1195:367;;;;;:::o;1567:226::-;1626:6;1679:2;1667:9;1658:7;1654:23;1650:32;1647:52;;;1695:1;1692;1685:12;1647:52;-1:-1:-1;1740:23:122;;1567:226;-1:-1:-1;1567:226:122:o;2012:351::-;2214:2;2196:21;;;2253:2;2233:18;;;2226:30;2292:29;2287:2;2272:18;;2265:57;2354:2;2339:18;;2012:351::o;2368:184::-;2438:6;2491:2;2479:9;2470:7;2466:23;2462:32;2459:52;;;2507:1;2504;2497:12;2459:52;-1:-1:-1;2530:16:122;;2368:184;-1:-1:-1;2368:184:122:o;3186:277::-;3253:6;3306:2;3294:9;3285:7;3281:23;3277:32;3274:52;;;3322:1;3319;3312:12;3274:52;3354:9;3348:16;3407:5;3400:13;3393:21;3386:5;3383:32;3373:60;;3429:1;3426;3419:12;3373:60;3452:5;3186:277;-1:-1:-1;;;3186:277:122:o;3468:251::-;3538:6;3591:2;3579:9;3570:7;3566:23;3562:32;3559:52;;;3607:1;3604;3597:12;3559:52;3639:9;3633:16;3658:31;3683:5;3658:31;:::i","linkReferences":{}},"methodIdentifiers":{"approveAllocation(uint256,address)":"4f68ae75","deposit()":"d0e30db0","initialize(address,uint256,address,address)":"358394d8","lido()":"23509a2d","stETH()":"c1fe3e48","stabilizerNFTContract()":"bec070d6","stabilizerOwner()":"7d0e9bba","tokenId()":"17d70f7c","unallocatedStETH()":"ec60b9ab","withdrawUnallocated(uint256)":"a9015400"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.29+commit.ab55807c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"DepositFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"allowance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientAllowance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientBalance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"approver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidApprover\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidReceiver\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSender\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSpender\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InitialDepositFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidInitialization\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotInitializing\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TransferFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAmount\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"AllocationApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"DepositReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"version\",\"type\":\"uint64\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawalCompleted\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"positionNFTAddress\",\"type\":\"address\"}],\"name\":\"approveAllocation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stabilizerNFT\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_stETH\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_lido\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lido\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerNFTContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tokenId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unallocatedStETH\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawUnallocated\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"stateMutability\":\"payable\",\"type\":\"receive\"}],\"devdoc\":{\"details\":\"Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone.\",\"errors\":{\"ERC20InsufficientAllowance(address,uint256,uint256)\":[{\"details\":\"Indicates a failure with the `spender`\\u2019s `allowance`. Used in transfers.\",\"params\":{\"allowance\":\"Amount of tokens a `spender` is allowed to operate with.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"ERC20InsufficientBalance(address,uint256,uint256)\":[{\"details\":\"Indicates an error related to the current `balance` of a `sender`. Used in transfers.\",\"params\":{\"balance\":\"Current balance for the interacting account.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidApprover(address)\":[{\"details\":\"Indicates a failure with the `approver` of a token to be approved. Used in approvals.\",\"params\":{\"approver\":\"Address initiating an approval operation.\"}}],\"ERC20InvalidReceiver(address)\":[{\"details\":\"Indicates a failure with the token `receiver`. Used in transfers.\",\"params\":{\"receiver\":\"Address to which tokens are being transferred.\"}}],\"ERC20InvalidSender(address)\":[{\"details\":\"Indicates a failure with the token `sender`. Used in transfers.\",\"params\":{\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidSpender(address)\":[{\"details\":\"Indicates a failure with the `spender` to be approved. Used in approvals.\",\"params\":{\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"InvalidInitialization()\":[{\"details\":\"The contract is already initialized.\"}],\"NotInitializing()\":[{\"details\":\"The contract is not initializing.\"}]},\"events\":{\"Initialized(uint64)\":{\"details\":\"Triggered when the contract has been initialized or reinitialized.\"}},\"kind\":\"dev\",\"methods\":{\"approveAllocation(uint256,address)\":{\"details\":\"Callable only by StabilizerNFT. Checks for sufficient balance.\",\"params\":{\"amount\":\"The amount of stETH to approve.\",\"positionNFTAddress\":\"The address of the PositionNFT contract.\"}},\"constructor\":{\"custom:oz-upgrades-unsafe-allow\":\"constructor\"},\"deposit()\":{\"details\":\"Stakes the received ETH into stETH. Callable only by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"details\":\"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.\",\"params\":{\"_lido\":\"The address of the Lido staking pool.\",\"_stETH\":\"The address of the stETH token.\",\"_stabilizerNFT\":\"The address of the controlling StabilizerNFT contract.\",\"_tokenId\":\"The ID of the Stabilizer NFT this escrow is associated with.\"}},\"unallocatedStETH()\":{\"details\":\"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\",\"returns\":{\"_0\":\"The amount of stETH held by the escrow.\"}},\"withdrawUnallocated(uint256)\":{\"details\":\"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.\",\"params\":{\"amount\":\"The amount of stETH to withdraw.\"}}},\"title\":\"StabilizerEscrow\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"approveAllocation(uint256,address)\":{\"notice\":\"Approves the PositionNFT contract to spend stETH for allocation.\"},\"deposit()\":{\"notice\":\"Receives additional ETH deposits forwarded by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"notice\":\"Initializes the escrow contract state.\"},\"unallocatedStETH()\":{\"notice\":\"Returns the current stETH balance of this contract.\"},\"withdrawUnallocated(uint256)\":{\"notice\":\"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\"}},\"notice\":\"A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/StabilizerEscrow.sol\":\"StabilizerEscrow\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":chainlink/=lib/chainlink/\",\":createx/=lib/createx/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/\",\":solady/=lib/createx/lib/solady/src/\",\":uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/\",\":uniswap-v3-core/=lib/uniswap-v3-core/\"]},\"sources\":{\"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol\":{\"keccak256\":\"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b\",\"dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3\"]},\"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol\":{\"keccak256\":\"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b\",\"dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11\",\"dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621\",\"dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL\"]},\"src/StabilizerEscrow.sol\":{\"keccak256\":\"0x10d8b2015f0487c7ce1c20eca5f3b43ebfbff4dfdec1d8a591cb797577ee89da\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://9b07409c60ad296a4d3de2230527e59d7beb3057032533ed8da848a7d65d2c87\",\"dweb:/ipfs/Qmbk4MqBVgTCAqKdSGz1wnBRkbBc5nQBfXVR8DVjmpyQQ4\"]},\"src/interfaces/ILido.sol\":{\"keccak256\":\"0xe68a9c3f4289f780bd1eb37026c20ac4ace931b5ec7bb56a44eba42335408519\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://1dd52a77e2aaa98f49932384ca3df586aa449f4d4904f17957bea0a46271c248\",\"dweb:/ipfs/QmNgzKPFbnDazJnjdkGFW8EDCRHNJDAeG7nYaVxE6tkHkH\"]},\"src/interfaces/IStabilizerEscrow.sol\":{\"keccak256\":\"0x310cc18f6b6bba87035cd3ad2ebea43454438dda4f43093e76de148014a485a1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://0bcb790503d3aa252bed567077c145a6e03508b8306d0dda8c8eccdc3a6b28a2\",\"dweb:/ipfs/QmSyouc72Hu6jNZBcVsnwMKvk5FBL6rSzLAF947pwP1uQc\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.29+commit.ab55807c"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"DepositFailed"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientAllowance"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientBalance"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"type":"error","name":"ERC20InvalidApprover"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"type":"error","name":"ERC20InvalidReceiver"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"type":"error","name":"ERC20InvalidSender"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"type":"error","name":"ERC20InvalidSpender"},{"inputs":[],"type":"error","name":"InitialDepositFailed"},{"inputs":[],"type":"error","name":"InvalidInitialization"},{"inputs":[],"type":"error","name":"NotInitializing"},{"inputs":[],"type":"error","name":"TransferFailed"},{"inputs":[],"type":"error","name":"ZeroAddress"},{"inputs":[],"type":"error","name":"ZeroAmount"},{"inputs":[{"internalType":"address","name":"spender","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"AllocationApproved","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"DepositReceived","anonymous":false},{"inputs":[{"internalType":"uint64","name":"version","type":"uint64","indexed":false}],"type":"event","name":"Initialized","anonymous":false},{"inputs":[{"internalType":"address","name":"recipient","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"WithdrawalCompleted","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"positionNFTAddress","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"approveAllocation"},{"inputs":[],"stateMutability":"payable","type":"function","name":"deposit"},{"inputs":[{"internalType":"address","name":"_stabilizerNFT","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"_stETH","type":"address"},{"internalType":"address","name":"_lido","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"initialize"},{"inputs":[],"stateMutability":"view","type":"function","name":"lido","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stETH","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerNFTContract","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerOwner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"tokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"unallocatedStETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"withdrawUnallocated"},{"inputs":[],"stateMutability":"payable","type":"receive"}],"devdoc":{"kind":"dev","methods":{"approveAllocation(uint256,address)":{"details":"Callable only by StabilizerNFT. Checks for sufficient balance.","params":{"amount":"The amount of stETH to approve.","positionNFTAddress":"The address of the PositionNFT contract."}},"constructor":{"custom:oz-upgrades-unsafe-allow":"constructor"},"deposit()":{"details":"Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"initialize(address,uint256,address,address)":{"details":"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.","params":{"_lido":"The address of the Lido staking pool.","_stETH":"The address of the stETH token.","_stabilizerNFT":"The address of the controlling StabilizerNFT contract.","_tokenId":"The ID of the Stabilizer NFT this escrow is associated with."}},"unallocatedStETH()":{"details":"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.","returns":{"_0":"The amount of stETH held by the escrow."}},"withdrawUnallocated(uint256)":{"details":"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.","params":{"amount":"The amount of stETH to withdraw."}}},"version":1},"userdoc":{"kind":"user","methods":{"approveAllocation(uint256,address)":{"notice":"Approves the PositionNFT contract to spend stETH for allocation."},"deposit()":{"notice":"Receives additional ETH deposits forwarded by StabilizerNFT."},"initialize(address,uint256,address,address)":{"notice":"Initializes the escrow contract state."},"unallocatedStETH()":{"notice":"Returns the current stETH balance of this contract."},"withdrawUnallocated(uint256)":{"notice":"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","chainlink/=lib/chainlink/","createx/=lib/createx/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/","solady/=lib/createx/lib/solady/src/","uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/","uniswap-v3-core/=lib/uniswap-v3-core/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/StabilizerEscrow.sol":"StabilizerEscrow"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol":{"keccak256":"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a","urls":["bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b","dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol":{"keccak256":"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b","urls":["bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b","dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol":{"keccak256":"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261","urls":["bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11","dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8","urls":["bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621","dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL"],"license":"MIT"},"src/StabilizerEscrow.sol":{"keccak256":"0x10d8b2015f0487c7ce1c20eca5f3b43ebfbff4dfdec1d8a591cb797577ee89da","urls":["bzz-raw://9b07409c60ad296a4d3de2230527e59d7beb3057032533ed8da848a7d65d2c87","dweb:/ipfs/Qmbk4MqBVgTCAqKdSGz1wnBRkbBc5nQBfXVR8DVjmpyQQ4"],"license":"MIT"},"src/interfaces/ILido.sol":{"keccak256":"0xe68a9c3f4289f780bd1eb37026c20ac4ace931b5ec7bb56a44eba42335408519","urls":["bzz-raw://1dd52a77e2aaa98f49932384ca3df586aa449f4d4904f17957bea0a46271c248","dweb:/ipfs/QmNgzKPFbnDazJnjdkGFW8EDCRHNJDAeG7nYaVxE6tkHkH"],"license":"MIT"},"src/interfaces/IStabilizerEscrow.sol":{"keccak256":"0x310cc18f6b6bba87035cd3ad2ebea43454438dda4f43093e76de148014a485a1","urls":["bzz-raw://0bcb790503d3aa252bed567077c145a6e03508b8306d0dda8c8eccdc3a6b28a2","dweb:/ipfs/QmSyouc72Hu6jNZBcVsnwMKvk5FBL6rSzLAF947pwP1uQc"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":58309,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stabilizerNFTContract","offset":0,"slot":"0","type":"t_address"},{"astId":58311,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"tokenId","offset":0,"slot":"1","type":"t_uint256"},{"astId":58313,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stETH","offset":0,"slot":"2","type":"t_address"},{"astId":58315,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"lido","offset":0,"slot":"3","type":"t_address"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}},"ast":{"absolutePath":"src/StabilizerEscrow.sol","id":58616,"exportedSymbols":{"IERC165":[47649],"IERC20":[44335],"IERC20Errors":[42686],"IERC721":[44668],"ILido":[63079],"IStabilizerEscrow":[63451],"Initializable":[40069],"StabilizerEscrow":[58615]},"nodeType":"SourceUnit","src":"32:7188:95","nodes":[{"id":58286,"nodeType":"PragmaDirective","src":"32:24:95","nodes":[],"literals":["solidity","^","0.8",".20"]},{"id":58287,"nodeType":"ImportDirective","src":"58:72:95","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","nameLocation":"-1:-1:-1","scope":58616,"sourceUnit":44336,"symbolAliases":[],"unitAlias":""},{"id":58288,"nodeType":"ImportDirective","src":"131:74:95","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","nameLocation":"-1:-1:-1","scope":58616,"sourceUnit":44669,"symbolAliases":[],"unitAlias":""},{"id":58290,"nodeType":"ImportDirective","src":"206:112:95","nodes":[],"absolutePath":"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","file":"../lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","nameLocation":"-1:-1:-1","scope":58616,"sourceUnit":40070,"symbolAliases":[{"foreign":{"id":58289,"name":"Initializable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40069,"src":"214:13:95","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":58291,"nodeType":"ImportDirective","src":"347:32:95","nodes":[],"absolutePath":"src/interfaces/ILido.sol","file":"./interfaces/ILido.sol","nameLocation":"-1:-1:-1","scope":58616,"sourceUnit":63080,"symbolAliases":[],"unitAlias":""},{"id":58292,"nodeType":"ImportDirective","src":"380:44:95","nodes":[],"absolutePath":"src/interfaces/IStabilizerEscrow.sol","file":"./interfaces/IStabilizerEscrow.sol","nameLocation":"-1:-1:-1","scope":58616,"sourceUnit":63452,"symbolAliases":[],"unitAlias":""},{"id":58615,"nodeType":"ContractDefinition","src":"685:6534:95","nodes":[{"id":58299,"nodeType":"ErrorDefinition","src":"804:20:95","nodes":[],"errorSelector":"d92e233d","name":"ZeroAddress","nameLocation":"810:11:95","parameters":{"id":58298,"nodeType":"ParameterList","parameters":[],"src":"821:2:95"}},{"id":58301,"nodeType":"ErrorDefinition","src":"829:19:95","nodes":[],"errorSelector":"1f2a2005","name":"ZeroAmount","nameLocation":"835:10:95","parameters":{"id":58300,"nodeType":"ParameterList","parameters":[],"src":"845:2:95"}},{"id":58303,"nodeType":"ErrorDefinition","src":"939:29:95","nodes":[],"errorSelector":"4a76da80","name":"InitialDepositFailed","nameLocation":"945:20:95","parameters":{"id":58302,"nodeType":"ParameterList","parameters":[],"src":"965:2:95"}},{"id":58305,"nodeType":"ErrorDefinition","src":"1053:22:95","nodes":[],"errorSelector":"79cacff1","name":"DepositFailed","nameLocation":"1059:13:95","parameters":{"id":58304,"nodeType":"ParameterList","parameters":[],"src":"1072:2:95"}},{"id":58307,"nodeType":"ErrorDefinition","src":"1080:23:95","nodes":[],"errorSelector":"90b8ec18","name":"TransferFailed","nameLocation":"1086:14:95","parameters":{"id":58306,"nodeType":"ParameterList","parameters":[],"src":"1100:2:95"}},{"id":58309,"nodeType":"VariableDeclaration","src":"1140:36:95","nodes":[],"baseFunctions":[63414],"constant":false,"functionSelector":"bec070d6","mutability":"mutable","name":"stabilizerNFTContract","nameLocation":"1155:21:95","scope":58615,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58308,"name":"address","nodeType":"ElementaryTypeName","src":"1140:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":58311,"nodeType":"VariableDeclaration","src":"1225:22:95","nodes":[],"constant":false,"functionSelector":"17d70f7c","mutability":"mutable","name":"tokenId","nameLocation":"1240:7:95","scope":58615,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58310,"name":"uint256","nodeType":"ElementaryTypeName","src":"1225:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":58313,"nodeType":"VariableDeclaration","src":"1392:20:95","nodes":[],"baseFunctions":[63424],"constant":false,"functionSelector":"c1fe3e48","mutability":"mutable","name":"stETH","nameLocation":"1407:5:95","scope":58615,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58312,"name":"address","nodeType":"ElementaryTypeName","src":"1392:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":58315,"nodeType":"VariableDeclaration","src":"1475:19:95","nodes":[],"baseFunctions":[63429],"constant":false,"functionSelector":"23509a2d","mutability":"mutable","name":"lido","nameLocation":"1490:4:95","scope":58615,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58314,"name":"address","nodeType":"ElementaryTypeName","src":"1475:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":58328,"nodeType":"ModifierDefinition","src":"1636:135:95","nodes":[],"body":{"id":58327,"nodeType":"Block","src":"1665:106:95","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":58320,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":58317,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"1679:3:95","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":58318,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"1683:6:95","memberName":"sender","nodeType":"MemberAccess","src":"1679:10:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":58319,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58309,"src":"1693:21:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"1679:35:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58325,"nodeType":"IfStatement","src":"1675:78:95","trueBody":{"expression":{"arguments":[{"hexValue":"43616c6c6572206973206e6f742053746162696c697a65724e4654","id":58322,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"1723:29:95","typeDescriptions":{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""},"value":"Caller is not StabilizerNFT"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""}],"id":58321,"name":"revert","nodeType":"Identifier","overloadedDeclarations":[-19,-19],"referencedDeclaration":-19,"src":"1716:6:95","typeDescriptions":{"typeIdentifier":"t_function_revert_pure$_t_string_memory_ptr_$returns$__$","typeString":"function (string memory) pure"}},"id":58323,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1716:37:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":58324,"nodeType":"ExpressionStatement","src":"1716:37:95"}},{"id":58326,"nodeType":"PlaceholderStatement","src":"1763:1:95"}]},"name":"onlyStabilizerNFT","nameLocation":"1645:17:95","parameters":{"id":58316,"nodeType":"ParameterList","parameters":[],"src":"1662:2:95"},"virtual":false,"visibility":"internal"},{"id":58336,"nodeType":"FunctionDefinition","src":"1830:97:95","nodes":[],"body":{"id":58335,"nodeType":"Block","src":"1844:83:95","nodes":[],"statements":[{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":58332,"name":"_disableInitializers","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40023,"src":"1854:20:95","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":58333,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"1854:22:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":58334,"nodeType":"ExpressionStatement","src":"1854:22:95"}]},"documentation":{"id":58329,"nodeType":"StructuredDocumentation","src":"1777:48:95","text":"@custom:oz-upgrades-unsafe-allow constructor"},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":58330,"nodeType":"ParameterList","parameters":[],"src":"1841:2:95"},"returnParameters":{"id":58331,"nodeType":"ParameterList","parameters":[],"src":"1844:0:95"},"scope":58615,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":58392,"nodeType":"FunctionDefinition","src":"2412:1308:95","nodes":[],"body":{"id":58391,"nodeType":"Block","src":"2685:1035:95","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":58369,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":58362,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":58355,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58350,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58339,"src":"2760:14:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":58353,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2786:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":58352,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2778:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58351,"name":"address","nodeType":"ElementaryTypeName","src":"2778:7:95","typeDescriptions":{}}},"id":58354,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2778:10:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2760:28:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":58361,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58356,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58343,"src":"2792:6:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":58359,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2810:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":58358,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2802:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58357,"name":"address","nodeType":"ElementaryTypeName","src":"2802:7:95","typeDescriptions":{}}},"id":58360,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2802:10:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2792:20:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2760:52:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":58368,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58363,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58345,"src":"2816:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":58366,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2833:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":58365,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2825:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58364,"name":"address","nodeType":"ElementaryTypeName","src":"2825:7:95","typeDescriptions":{}}},"id":58367,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2825:10:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2816:19:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"2760:75:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58374,"nodeType":"IfStatement","src":"2756:126:95","trueBody":{"id":58373,"nodeType":"Block","src":"2837:45:95","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58370,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58299,"src":"2858:11:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58371,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2858:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58372,"nodeType":"RevertStatement","src":"2851:20:95"}]}},{"expression":{"id":58377,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":58375,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58309,"src":"3061:21:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":58376,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58339,"src":"3085:14:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3061:38:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":58378,"nodeType":"ExpressionStatement","src":"3061:38:95"},{"expression":{"id":58381,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":58379,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58311,"src":"3109:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":58380,"name":"_tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58341,"src":"3119:8:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3109:18:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":58382,"nodeType":"ExpressionStatement","src":"3109:18:95"},{"expression":{"id":58385,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":58383,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58313,"src":"3194:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":58384,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58343,"src":"3202:6:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3194:14:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":58386,"nodeType":"ExpressionStatement","src":"3194:14:95"},{"expression":{"id":58389,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":58387,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58315,"src":"3218:4:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":58388,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58345,"src":"3225:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3218:12:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":58390,"nodeType":"ExpressionStatement","src":"3218:12:95"}]},"documentation":{"id":58337,"nodeType":"StructuredDocumentation","src":"1960:447:95","text":" @notice Initializes the escrow contract state.\n @param _stabilizerNFT The address of the controlling StabilizerNFT contract.\n @param _tokenId The ID of the Stabilizer NFT this escrow is associated with.\n @param _stETH The address of the stETH token.\n @param _lido The address of the Lido staking pool.\n @dev Sets immutable addresses and the token ID. Meant to be called once after clone deployment."},"functionSelector":"358394d8","implemented":true,"kind":"function","modifiers":[{"id":58348,"kind":"modifierInvocation","modifierName":{"id":58347,"name":"initializer","nameLocations":["2673:11:95"],"nodeType":"IdentifierPath","referencedDeclaration":39909,"src":"2673:11:95"},"nodeType":"ModifierInvocation","src":"2673:11:95"}],"name":"initialize","nameLocation":"2421:10:95","parameters":{"id":58346,"nodeType":"ParameterList","parameters":[{"constant":false,"id":58339,"mutability":"mutable","name":"_stabilizerNFT","nameLocation":"2481:14:95","nodeType":"VariableDeclaration","scope":58392,"src":"2473:22:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58338,"name":"address","nodeType":"ElementaryTypeName","src":"2473:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":58341,"mutability":"mutable","name":"_tokenId","nameLocation":"2513:8:95","nodeType":"VariableDeclaration","scope":58392,"src":"2505:16:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58340,"name":"uint256","nodeType":"ElementaryTypeName","src":"2505:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":58343,"mutability":"mutable","name":"_stETH","nameLocation":"2628:6:95","nodeType":"VariableDeclaration","scope":58392,"src":"2620:14:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58342,"name":"address","nodeType":"ElementaryTypeName","src":"2620:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":58345,"mutability":"mutable","name":"_lido","nameLocation":"2652:5:95","nodeType":"VariableDeclaration","scope":58392,"src":"2644:13:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58344,"name":"address","nodeType":"ElementaryTypeName","src":"2644:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"2431:232:95"},"returnParameters":{"id":58349,"nodeType":"ParameterList","parameters":[],"src":"2685:0:95"},"scope":58615,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":58432,"nodeType":"FunctionDefinition","src":"3933:328:95","nodes":[],"body":{"id":58431,"nodeType":"Block","src":"3987:274:95","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":58401,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":58398,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4001:3:95","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":58399,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4005:5:95","memberName":"value","nodeType":"MemberAccess","src":"4001:9:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":58400,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4014:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4001:14:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58405,"nodeType":"IfStatement","src":"3997:39:95","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58402,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58301,"src":"4024:10:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58403,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4024:12:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58404,"nodeType":"RevertStatement","src":"4017:19:95"}},{"clauses":[{"block":{"id":58418,"nodeType":"Block","src":"4132:2:95","statements":[]},"errorName":"","id":58419,"nodeType":"TryCatchClause","src":"4132:2:95"},{"block":{"id":58423,"nodeType":"Block","src":"4149:47:95","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58420,"name":"DepositFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58305,"src":"4170:13:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58421,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4170:15:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58422,"nodeType":"RevertStatement","src":"4163:22:95"}]},"errorName":"","id":58424,"nodeType":"TryCatchClause","src":"4143:53:95"}],"externalCall":{"arguments":[{"arguments":[{"hexValue":"30","id":58415,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4128:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":58414,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4120:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58413,"name":"address","nodeType":"ElementaryTypeName","src":"4120:7:95","typeDescriptions":{}}},"id":58416,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4120:10:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":58407,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58315,"src":"4089:4:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58406,"name":"ILido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":63079,"src":"4083:5:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ILido_$63079_$","typeString":"type(contract ILido)"}},"id":58408,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4083:11:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ILido_$63079","typeString":"contract ILido"}},"id":58409,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4095:6:95","memberName":"submit","nodeType":"MemberAccess","referencedDeclaration":63078,"src":"4083:18:95","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$","typeString":"function (address) payable external returns (uint256)"}},"id":58412,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"names":["value"],"nodeType":"FunctionCallOptions","options":[{"expression":{"id":58410,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4109:3:95","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":58411,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4113:5:95","memberName":"value","nodeType":"MemberAccess","src":"4109:9:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"src":"4083:36:95","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$value","typeString":"function (address) payable external returns (uint256)"}},"id":58417,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4083:48:95","tryCall":true,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":58425,"nodeType":"TryStatement","src":"4079:117:95"},{"eventCall":{"arguments":[{"expression":{"id":58427,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4226:3:95","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":58428,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4230:5:95","memberName":"value","nodeType":"MemberAccess","src":"4226:9:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":58426,"name":"DepositReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":63397,"src":"4210:15:95","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":58429,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4210:26:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":58430,"nodeType":"EmitStatement","src":"4205:31:95"}]},"baseFunctions":[63432],"documentation":{"id":58393,"nodeType":"StructuredDocumentation","src":"3761:167:95","text":" @notice Receives additional ETH deposits forwarded by StabilizerNFT.\n @dev Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"functionSelector":"d0e30db0","implemented":true,"kind":"function","modifiers":[{"id":58396,"kind":"modifierInvocation","modifierName":{"id":58395,"name":"onlyStabilizerNFT","nameLocations":["3969:17:95"],"nodeType":"IdentifierPath","referencedDeclaration":58328,"src":"3969:17:95"},"nodeType":"ModifierInvocation","src":"3969:17:95"}],"name":"deposit","nameLocation":"3942:7:95","parameters":{"id":58394,"nodeType":"ParameterList","parameters":[],"src":"3949:2:95"},"returnParameters":{"id":58397,"nodeType":"ParameterList","parameters":[],"src":"3987:0:95"},"scope":58615,"stateMutability":"payable","virtual":false,"visibility":"external"},{"id":58498,"nodeType":"FunctionDefinition","src":"4565:586:95","nodes":[],"body":{"id":58497,"nodeType":"Block","src":"4663:488:95","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":58444,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58442,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58435,"src":"4677:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":58443,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4687:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4677:11:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58448,"nodeType":"IfStatement","src":"4673:36:95","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58445,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58301,"src":"4697:10:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58446,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4697:12:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58447,"nodeType":"RevertStatement","src":"4690:19:95"}},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":58454,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58449,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58437,"src":"4723:18:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":58452,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4753:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":58451,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4745:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58450,"name":"address","nodeType":"ElementaryTypeName","src":"4745:7:95","typeDescriptions":{}}},"id":58453,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4745:10:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4723:32:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58458,"nodeType":"IfStatement","src":"4719:58:95","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58455,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58299,"src":"4764:11:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58456,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4764:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58457,"nodeType":"RevertStatement","src":"4757:20:95"}},{"assignments":[58460],"declarations":[{"constant":false,"id":58460,"mutability":"mutable","name":"currentBalance","nameLocation":"4796:14:95","nodeType":"VariableDeclaration","scope":58497,"src":"4788:22:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58459,"name":"uint256","nodeType":"ElementaryTypeName","src":"4788:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":58470,"initialValue":{"arguments":[{"arguments":[{"id":58467,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"4845:4:95","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}],"id":58466,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4837:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58465,"name":"address","nodeType":"ElementaryTypeName","src":"4837:7:95","typeDescriptions":{}}},"id":58468,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4837:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":58462,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58313,"src":"4820:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58461,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44335,"src":"4813:6:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$44335_$","typeString":"type(contract IERC20)"}},"id":58463,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4813:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$44335","typeString":"contract IERC20"}},"id":58464,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4827:9:95","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":44292,"src":"4813:23:95","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":58469,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4813:38:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4788:63:95"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":58473,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58471,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58435,"src":"4865:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":58472,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58460,"src":"4874:14:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4865:23:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58483,"nodeType":"IfStatement","src":"4861:99:95","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":58477,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"4930:4:95","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}],"id":58476,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"4922:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58475,"name":"address","nodeType":"ElementaryTypeName","src":"4922:7:95","typeDescriptions":{}}},"id":58478,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4922:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":58479,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58460,"src":"4937:14:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":58480,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58435,"src":"4953:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":58474,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42656,"src":"4897:24:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":58481,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4897:63:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58482,"nodeType":"RevertStatement","src":"4890:70:95"}},{"expression":{"arguments":[{"id":58488,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58437,"src":"5042:18:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":58489,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58435,"src":"5062:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":58485,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58313,"src":"5027:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58484,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44335,"src":"5020:6:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$44335_$","typeString":"type(contract IERC20)"}},"id":58486,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5020:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$44335","typeString":"contract IERC20"}},"id":58487,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5034:7:95","memberName":"approve","nodeType":"MemberAccess","referencedDeclaration":44322,"src":"5020:21:95","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":58490,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5020:49:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58491,"nodeType":"ExpressionStatement","src":"5020:49:95"},{"eventCall":{"arguments":[{"id":58493,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58437,"src":"5103:18:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":58494,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58435,"src":"5123:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":58492,"name":"AllocationApproved","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":63403,"src":"5084:18:95","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":58495,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5084:46:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":58496,"nodeType":"EmitStatement","src":"5079:51:95"}]},"baseFunctions":[63439],"documentation":{"id":58433,"nodeType":"StructuredDocumentation","src":"4267:293:95","text":" @notice Approves the PositionNFT contract to spend stETH for allocation.\n @param amount The amount of stETH to approve.\n @param positionNFTAddress The address of the PositionNFT contract.\n @dev Callable only by StabilizerNFT. Checks for sufficient balance."},"functionSelector":"4f68ae75","implemented":true,"kind":"function","modifiers":[{"id":58440,"kind":"modifierInvocation","modifierName":{"id":58439,"name":"onlyStabilizerNFT","nameLocations":["4645:17:95"],"nodeType":"IdentifierPath","referencedDeclaration":58328,"src":"4645:17:95"},"nodeType":"ModifierInvocation","src":"4645:17:95"}],"name":"approveAllocation","nameLocation":"4574:17:95","parameters":{"id":58438,"nodeType":"ParameterList","parameters":[{"constant":false,"id":58435,"mutability":"mutable","name":"amount","nameLocation":"4600:6:95","nodeType":"VariableDeclaration","scope":58498,"src":"4592:14:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58434,"name":"uint256","nodeType":"ElementaryTypeName","src":"4592:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":58437,"mutability":"mutable","name":"positionNFTAddress","nameLocation":"4616:18:95","nodeType":"VariableDeclaration","scope":58498,"src":"4608:26:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58436,"name":"address","nodeType":"ElementaryTypeName","src":"4608:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"4591:44:95"},"returnParameters":{"id":58441,"nodeType":"ParameterList","parameters":[],"src":"4663:0:95"},"scope":58615,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":58579,"nodeType":"FunctionDefinition","src":"5531:898:95","nodes":[],"body":{"id":58578,"nodeType":"Block","src":"5603:826:95","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":58508,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58506,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58501,"src":"5617:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":58507,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5627:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5617:11:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58512,"nodeType":"IfStatement","src":"5613:36:95","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58509,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58301,"src":"5637:10:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58510,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5637:12:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58511,"nodeType":"RevertStatement","src":"5630:19:95"}},{"assignments":[58514],"declarations":[{"constant":false,"id":58514,"mutability":"mutable","name":"currentBalance","nameLocation":"5667:14:95","nodeType":"VariableDeclaration","scope":58578,"src":"5659:22:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58513,"name":"uint256","nodeType":"ElementaryTypeName","src":"5659:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":58524,"initialValue":{"arguments":[{"arguments":[{"id":58521,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5716:4:95","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}],"id":58520,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5708:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58519,"name":"address","nodeType":"ElementaryTypeName","src":"5708:7:95","typeDescriptions":{}}},"id":58522,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5708:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":58516,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58313,"src":"5691:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58515,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44335,"src":"5684:6:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$44335_$","typeString":"type(contract IERC20)"}},"id":58517,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5684:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$44335","typeString":"contract IERC20"}},"id":58518,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5698:9:95","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":44292,"src":"5684:23:95","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":58523,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5684:38:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5659:63:95"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":58527,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58525,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58501,"src":"5736:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":58526,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58514,"src":"5745:14:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5736:23:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58537,"nodeType":"IfStatement","src":"5732:99:95","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":58531,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5801:4:95","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}],"id":58530,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5793:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58529,"name":"address","nodeType":"ElementaryTypeName","src":"5793:7:95","typeDescriptions":{}}},"id":58532,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5793:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":58533,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58514,"src":"5808:14:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":58534,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58501,"src":"5824:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":58528,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42656,"src":"5768:24:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":58535,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5768:63:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58536,"nodeType":"RevertStatement","src":"5761:70:95"}},{"assignments":[58539],"declarations":[{"constant":false,"id":58539,"mutability":"mutable","name":"currentOwner","nameLocation":"5942:12:95","nodeType":"VariableDeclaration","scope":58578,"src":"5934:20:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58538,"name":"address","nodeType":"ElementaryTypeName","src":"5934:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":58546,"initialValue":{"arguments":[{"id":58544,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58311,"src":"5996:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":58541,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58309,"src":"5965:21:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58540,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44668,"src":"5957:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44668_$","typeString":"type(contract IERC721)"}},"id":58542,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5957:30:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44668","typeString":"contract IERC721"}},"id":58543,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5988:7:95","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44601,"src":"5957:38:95","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":58545,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5957:47:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"5934:70:95"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":58552,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":58547,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58539,"src":"6040:12:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":58550,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6064:1:95","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":58549,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6056:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58548,"name":"address","nodeType":"ElementaryTypeName","src":"6056:7:95","typeDescriptions":{}}},"id":58551,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6056:10:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"6040:26:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58556,"nodeType":"IfStatement","src":"6036:52:95","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58553,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58299,"src":"6075:11:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58554,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6075:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58555,"nodeType":"RevertStatement","src":"6068:20:95"}},{"assignments":[58558],"declarations":[{"constant":false,"id":58558,"mutability":"mutable","name":"success","nameLocation":"6188:7:95","nodeType":"VariableDeclaration","scope":58578,"src":"6183:12:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":58557,"name":"bool","nodeType":"ElementaryTypeName","src":"6183:4:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":58566,"initialValue":{"arguments":[{"id":58563,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58539,"src":"6221:12:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":58564,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58501,"src":"6235:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":58560,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58313,"src":"6205:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58559,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44335,"src":"6198:6:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$44335_$","typeString":"type(contract IERC20)"}},"id":58561,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6198:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$44335","typeString":"contract IERC20"}},"id":58562,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6212:8:95","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":44302,"src":"6198:22:95","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":58565,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6198:44:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"6183:59:95"},{"condition":{"id":58568,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"6256:8:95","subExpression":{"id":58567,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58558,"src":"6257:7:95","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":58572,"nodeType":"IfStatement","src":"6252:37:95","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":58569,"name":"TransferFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58307,"src":"6273:14:95","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":58570,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6273:16:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":58571,"nodeType":"RevertStatement","src":"6266:23:95"}},{"eventCall":{"arguments":[{"id":58574,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58539,"src":"6401:12:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":58575,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58501,"src":"6415:6:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":58573,"name":"WithdrawalCompleted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":63409,"src":"6381:19:95","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":58576,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6381:41:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":58577,"nodeType":"EmitStatement","src":"6376:46:95"}]},"baseFunctions":[63444],"documentation":{"id":58499,"nodeType":"StructuredDocumentation","src":"5243:283:95","text":" @notice Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\n @param amount The amount of stETH to withdraw.\n @dev Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance."},"functionSelector":"a9015400","implemented":true,"kind":"function","modifiers":[{"id":58504,"kind":"modifierInvocation","modifierName":{"id":58503,"name":"onlyStabilizerNFT","nameLocations":["5585:17:95"],"nodeType":"IdentifierPath","referencedDeclaration":58328,"src":"5585:17:95"},"nodeType":"ModifierInvocation","src":"5585:17:95"}],"name":"withdrawUnallocated","nameLocation":"5540:19:95","parameters":{"id":58502,"nodeType":"ParameterList","parameters":[{"constant":false,"id":58501,"mutability":"mutable","name":"amount","nameLocation":"5568:6:95","nodeType":"VariableDeclaration","scope":58579,"src":"5560:14:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58500,"name":"uint256","nodeType":"ElementaryTypeName","src":"5560:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5559:16:95"},"returnParameters":{"id":58505,"nodeType":"ParameterList","parameters":[],"src":"5603:0:95"},"scope":58615,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":58597,"nodeType":"FunctionDefinition","src":"6715:131:95","nodes":[],"body":{"id":58596,"nodeType":"Block","src":"6784:62:95","nodes":[],"statements":[{"expression":{"arguments":[{"arguments":[{"id":58592,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"6833:4:95","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$58615","typeString":"contract StabilizerEscrow"}],"id":58591,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6825:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":58590,"name":"address","nodeType":"ElementaryTypeName","src":"6825:7:95","typeDescriptions":{}}},"id":58593,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6825:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":58587,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58313,"src":"6808:5:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58586,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44335,"src":"6801:6:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$44335_$","typeString":"type(contract IERC20)"}},"id":58588,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6801:13:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$44335","typeString":"contract IERC20"}},"id":58589,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6815:9:95","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":44292,"src":"6801:23:95","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":58594,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6801:38:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":58585,"id":58595,"nodeType":"Return","src":"6794:45:95"}]},"baseFunctions":[63450],"documentation":{"id":58580,"nodeType":"StructuredDocumentation","src":"6466:244:95","text":" @notice Returns the current stETH balance of this contract.\n @dev Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\n @return The amount of stETH held by the escrow."},"functionSelector":"ec60b9ab","implemented":true,"kind":"function","modifiers":[],"name":"unallocatedStETH","nameLocation":"6724:16:95","overrides":{"id":58582,"nodeType":"OverrideSpecifier","overrides":[],"src":"6757:8:95"},"parameters":{"id":58581,"nodeType":"ParameterList","parameters":[],"src":"6740:2:95"},"returnParameters":{"id":58585,"nodeType":"ParameterList","parameters":[{"constant":false,"id":58584,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":58597,"src":"6775:7:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":58583,"name":"uint256","nodeType":"ElementaryTypeName","src":"6775:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6774:9:95"},"scope":58615,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":58610,"nodeType":"FunctionDefinition","src":"6852:130:95","nodes":[],"body":{"id":58609,"nodeType":"Block","src":"6911:71:95","nodes":[],"statements":[{"expression":{"arguments":[{"id":58606,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58311,"src":"6967:7:95","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":58603,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":58309,"src":"6936:21:95","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":58602,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44668,"src":"6928:7:95","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44668_$","typeString":"type(contract IERC721)"}},"id":58604,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6928:30:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44668","typeString":"contract IERC721"}},"id":58605,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6959:7:95","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44601,"src":"6928:38:95","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":58607,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6928:47:95","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":58601,"id":58608,"nodeType":"Return","src":"6921:54:95"}]},"baseFunctions":[63419],"functionSelector":"7d0e9bba","implemented":true,"kind":"function","modifiers":[],"name":"stabilizerOwner","nameLocation":"6861:15:95","parameters":{"id":58598,"nodeType":"ParameterList","parameters":[],"src":"6876:2:95"},"returnParameters":{"id":58601,"nodeType":"ParameterList","parameters":[{"constant":false,"id":58600,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":58610,"src":"6902:7:95","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":58599,"name":"address","nodeType":"ElementaryTypeName","src":"6902:7:95","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"6901:9:95"},"scope":58615,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":58614,"nodeType":"FunctionDefinition","src":"7188:29:95","nodes":[],"body":{"id":58613,"nodeType":"Block","src":"7215:2:95","nodes":[],"statements":[]},"implemented":true,"kind":"receive","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":58611,"nodeType":"ParameterList","parameters":[],"src":"7195:2:95"},"returnParameters":{"id":58612,"nodeType":"ParameterList","parameters":[],"src":"7215:0:95"},"scope":58615,"stateMutability":"payable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[{"baseName":{"id":58294,"name":"Initializable","nameLocations":["714:13:95"],"nodeType":"IdentifierPath","referencedDeclaration":40069,"src":"714:13:95"},"id":58295,"nodeType":"InheritanceSpecifier","src":"714:13:95"},{"baseName":{"id":58296,"name":"IStabilizerEscrow","nameLocations":["729:17:95"],"nodeType":"IdentifierPath","referencedDeclaration":63451,"src":"729:17:95"},"id":58297,"nodeType":"InheritanceSpecifier","src":"729:17:95"}],"canonicalName":"StabilizerEscrow","contractDependencies":[],"contractKind":"contract","documentation":{"id":58293,"nodeType":"StructuredDocumentation","src":"427:257:95","text":" @title StabilizerEscrow\n @notice A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\n @dev Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone."},"fullyImplemented":true,"linearizedBaseContracts":[58615,63451,42686,40069],"name":"StabilizerEscrow","nameLocation":"694:16:95","scope":58616,"usedErrors":[39818,39821,42656,42661,42666,42675,42680,42685,58299,58301,58303,58305,58307],"usedEvents":[39826,63397,63403,63409]}],"license":"MIT"},"id":95}