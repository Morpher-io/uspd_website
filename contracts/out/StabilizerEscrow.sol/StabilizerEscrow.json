{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"MINIMUM_ESCROW_AMOUNT","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"approveAllocation","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"positionNFTAddress","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"checkMinimumAndUpdateBalance","inputs":[{"name":"stETHAmount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"deposit","inputs":[],"outputs":[],"stateMutability":"payable"},{"type":"function","name":"initialize","inputs":[{"name":"_stabilizerNFT","type":"address","internalType":"address"},{"name":"_tokenId","type":"uint256","internalType":"uint256"},{"name":"_stETH","type":"address","internalType":"address"},{"name":"_lido","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"lido","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stETH","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerNFTContract","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"stabilizerOwner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"tokenId","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"unallocatedStETH","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"unallocatedStETHBalance","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"updateBalance","inputs":[{"name":"delta","type":"int256","internalType":"int256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"withdrawExcessStEthBalance","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"withdrawForAllocation","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"recipient","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"withdrawUnallocated","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"event","name":"AllocationApproved","inputs":[{"name":"spender","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"BalanceUpdated","inputs":[{"name":"delta","type":"int256","indexed":false,"internalType":"int256"},{"name":"newBalance","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"DepositReceived","inputs":[{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"ExcessWithdrawn","inputs":[{"name":"recipient","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"Initialized","inputs":[{"name":"version","type":"uint64","indexed":false,"internalType":"uint64"}],"anonymous":false},{"type":"event","name":"WithdrawalCompleted","inputs":[{"name":"recipient","type":"address","indexed":true,"internalType":"address"},{"name":"amount","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"error","name":"BalanceUpdateFailed","inputs":[]},{"type":"error","name":"DepositFailed","inputs":[]},{"type":"error","name":"ERC20InsufficientAllowance","inputs":[{"name":"spender","type":"address","internalType":"address"},{"name":"allowance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InsufficientBalance","inputs":[{"name":"sender","type":"address","internalType":"address"},{"name":"balance","type":"uint256","internalType":"uint256"},{"name":"needed","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"ERC20InvalidApprover","inputs":[{"name":"approver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidReceiver","inputs":[{"name":"receiver","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSender","inputs":[{"name":"sender","type":"address","internalType":"address"}]},{"type":"error","name":"ERC20InvalidSpender","inputs":[{"name":"spender","type":"address","internalType":"address"}]},{"type":"error","name":"InitialDepositFailed","inputs":[]},{"type":"error","name":"InsufficientEscrowAmount","inputs":[{"name":"currentBalance","type":"uint256","internalType":"uint256"},{"name":"depositAmount","type":"uint256","internalType":"uint256"},{"name":"minimumAmount","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"InvalidInitialization","inputs":[]},{"type":"error","name":"NotInitializing","inputs":[]},{"type":"error","name":"NotNFTOwner","inputs":[]},{"type":"error","name":"TransferFailed","inputs":[]},{"type":"error","name":"WithdrawalWouldLeaveDust","inputs":[]},{"type":"error","name":"ZeroAddress","inputs":[]},{"type":"error","name":"ZeroAmount","inputs":[]}],"bytecode":{"object":"0x6080604052348015600e575f5ffd5b5060156019565b60c9565b7ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a00805468010000000000000000900460ff161560685760405163f92ee8a960e01b815260040160405180910390fd5b80546001600160401b039081161460c65780546001600160401b0319166001600160401b0390811782556040519081527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b50565b611226806100d65f395ff3fe6080604052600436106100ef575f3560e01c8063878a672c11610087578063d0e30db011610057578063d0e30db014610269578063ec60b9ab14610271578063ecb772e014610285578063fbae0ade146102a4575f5ffd5b8063878a672c146101f9578063a90154001461020d578063bec070d61461022c578063c1fe3e481461024a575f5ffd5b8063358394d8116100c2578063358394d8146101885780634f68ae75146101a75780637d0e9bba146101c65780637d810c2a146101da575f5ffd5b806316f637ff146100f3578063171b01881461011b57806317d70f7c1461013c57806323509a2d14610151575b5f5ffd5b3480156100fe575f5ffd5b5061010860045481565b6040519081526020015b60405180910390f35b348015610126575f5ffd5b5061013a610135366004611041565b6102bf565b005b348015610147575f5ffd5b5061010860015481565b34801561015c575f5ffd5b50600354610170906001600160a01b031681565b6040516001600160a01b039091168152602001610112565b348015610193575f5ffd5b5061013a6101a236600461106f565b610379565b3480156101b2575f5ffd5b5061013a6101c13660046110bf565b6104fa565b3480156101d1575f5ffd5b5061017061065b565b3480156101e5575f5ffd5b5061013a6101f43660046110bf565b6106d4565b348015610204575f5ffd5b5061013a61085b565b348015610218575f5ffd5b5061013a610227366004611041565b610a55565b348015610237575f5ffd5b505f54610170906001600160a01b031681565b348015610255575f5ffd5b50600254610170906001600160a01b031681565b61013a610cc0565b34801561027c575f5ffd5b50600454610108565b348015610290575f5ffd5b5061013a61029f366004611041565b610f5c565b3480156102af575f5ffd5b5061010867016345785d8a000081565b5f546001600160a01b031633146102f15760405162461bcd60e51b81526004016102e8906110ed565b60405180910390fd5b6004545f8083131561030e576103078383611138565b9050610349565b5f6103188461114b565b90508281111561033b5760405163619c7f5b60e11b815260040160405180910390fd5b6103458184611165565b9150505b600481905560408051848152602081018390525f5160206111d15f395f51905f52910160405180910390a1505050565b5f610382611017565b805490915060ff600160401b820416159067ffffffffffffffff165f811580156103a95750825b90505f8267ffffffffffffffff1660011480156103c55750303b155b9050811580156103d3575080155b156103f15760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561041b57845460ff60401b1916600160401b1785555b6001600160a01b038916158061043857506001600160a01b038716155b8061044a57506001600160a01b038616155b156104685760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a8416908316179055600380549289169290911691909117905583156104ef57845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146105235760405162461bcd60e51b81526004016102e8906110ed565b815f0361054357604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b03811661056a5760405163d92e233d60e01b815260040160405180910390fd5b6004548083111561059e5760405163391434e360e21b815230600482015260248101829052604481018490526064016102e8565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156105ee573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106129190611178565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161064e91815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106909160040190815260200190565b602060405180830381865afa1580156106ab573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106cf919061119e565b905090565b5f546001600160a01b031633146106fd5760405162461bcd60e51b81526004016102e8906110ed565b815f0361071d57604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166107445760405163d92e233d60e01b815260040160405180910390fd5b600454808311156107785760405163391434e360e21b815230600482015260248101829052604481018490526064016102e8565b60025460405163a9059cbb60e01b81526001600160a01b038481166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af11580156107c8573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107ec9190611178565b90508061080c576040516312171d8360e31b815260040160405180910390fd5b8360045f82825461081d9190611165565b909155505f5160206111d15f395f51905f52905061083a8561114b565b6004546040805192835260208301919091520160405180910390a150505050565b5f546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e9161088f9160040190815260200190565b602060405180830381865afa1580156108aa573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108ce919061119e565b6001600160a01b0316336001600160a01b0316146108ff57604051631022318760e21b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610945573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061096991906111b9565b60045490915080821115610a51575f6109828284611165565b60025460405163a9059cbb60e01b8152336004820152602481018390529192505f916001600160a01b039091169063a9059cbb906044016020604051808303815f875af11580156109d5573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109f99190611178565b905080610a19576040516312171d8360e31b815260040160405180910390fd5b60405182815233907f9bdedcc968f2c0682145c20289dfbb3081a39684571116ab45eabfef512e94739060200160405180910390a250505b5050565b5f546001600160a01b03163314610a7e5760405162461bcd60e51b81526004016102e8906110ed565b805f03610a9e57604051631f2a200560e01b815260040160405180910390fd5b60045480821115610ad25760405163391434e360e21b815230600482015260248101829052604481018390526064016102e8565b5f610add8383611165565b90505f81118015610af5575067016345785d8a000081105b15610b1357604051637614d15160e11b815260040160405180910390fd5b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e91610b489160040190815260200190565b602060405180830381865afa158015610b63573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b87919061119e565b90506001600160a01b038116610bb05760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018790525f92169063a9059cbb906044016020604051808303815f875af1158015610c00573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610c249190611178565b905080610c44576040516312171d8360e31b815260040160405180910390fd5b60048390556040518581526001600160a01b038316907f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c49060200160405180910390a25f5160206111d15f395f51905f52610c9e8661114b565b6004546040805192835260208301919091520160405180910390a15050505050565b5f546001600160a01b03163314610ce95760405162461bcd60e51b81526004016102e8906110ed565b345f03610d0957604051631f2a200560e01b815260040160405180910390fd5b67016345785d8a000034600454610d209190611138565b1015610d57576004805460405163015643f760e01b81529182015234602482015267016345785d8a000060448201526064016102e8565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610d9d573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610dc191906111b9565b60035460405163a1903eab60e01b81525f600482018190529293506001600160a01b039091169063a1903eab90349060240160206040518083038185885af193505050508015610e2e575060408051601f3d908101601f19168201909252610e2b918101906111b9565b60015b610e4b576040516379cacff160e01b815260040160405180910390fd5b506002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610e92573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610eb691906111b9565b9050610ec28382611165565b915050805f03610ee5576040516379cacff160e01b815260040160405180910390fd5b8060045f828254610ef69190611138565b90915550506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a16004546040805183815260208101929092525f5160206111d15f395f51905f52910160405180910390a15050565b5f546001600160a01b03163314610f855760405162461bcd60e51b81526004016102e8906110ed565b67016345785d8a000081600454610f9c9190611138565b1015610fd4576004805460405163015643f760e01b8152918201526024810182905267016345785d8a000060448201526064016102e8565b8060045f828254610fe59190611138565b90915550506004546040805183815260208101929092525f5160206111d15f395f51905f52910160405180910390a150565b5f807ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a005b92915050565b5f60208284031215611051575f5ffd5b5035919050565b6001600160a01b038116811461106c575f5ffd5b50565b5f5f5f5f60808587031215611082575f5ffd5b843561108d81611058565b93506020850135925060408501356110a481611058565b915060608501356110b481611058565b939692955090935050565b5f5f604083850312156110d0575f5ffd5b8235915060208301356110e281611058565b809150509250929050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b634e487b7160e01b5f52601160045260245ffd5b8082018082111561103b5761103b611124565b5f600160ff1b820161115f5761115f611124565b505f0390565b8181038181111561103b5761103b611124565b5f60208284031215611188575f5ffd5b81518015158114611197575f5ffd5b9392505050565b5f602082840312156111ae575f5ffd5b815161119781611058565b5f602082840312156111c9575f5ffd5b505191905056fe149e2ad4c3719ec0acdfb19acc4b31eaa110fd8e4c4f78512870123d9839fb0da26469706673582212203dbd1ba9a1c79ea8638827f5723d3ba1e1dd36890eb90b73169d45c329cd1aa364736f6c634300081d0033","sourceMap":"684:12283:78:-:0;;;2669:97;;;;;;;;;-1:-1:-1;2693:22:78;:20;:22::i;:::-;684:12283;;7711:422:20;3147:66;7900:15;;;;;;;7896:76;;;7938:23;;-1:-1:-1;;;7938:23:20;;;;;;;;;;;7896:76;7985:14;;-1:-1:-1;;;;;7985:14:20;;;:34;7981:146;;8035:33;;-1:-1:-1;;;;;;8035:33:20;-1:-1:-1;;;;;8035:33:20;;;;;8087:29;;158:50:104;;;8087:29:20;;146:2:104;131:18;8087:29:20;;;;;;;7981:146;7760:373;7711:422::o;14:200:104:-;684:12283:78;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x6080604052600436106100ef575f3560e01c8063878a672c11610087578063d0e30db011610057578063d0e30db014610269578063ec60b9ab14610271578063ecb772e014610285578063fbae0ade146102a4575f5ffd5b8063878a672c146101f9578063a90154001461020d578063bec070d61461022c578063c1fe3e481461024a575f5ffd5b8063358394d8116100c2578063358394d8146101885780634f68ae75146101a75780637d0e9bba146101c65780637d810c2a146101da575f5ffd5b806316f637ff146100f3578063171b01881461011b57806317d70f7c1461013c57806323509a2d14610151575b5f5ffd5b3480156100fe575f5ffd5b5061010860045481565b6040519081526020015b60405180910390f35b348015610126575f5ffd5b5061013a610135366004611041565b6102bf565b005b348015610147575f5ffd5b5061010860015481565b34801561015c575f5ffd5b50600354610170906001600160a01b031681565b6040516001600160a01b039091168152602001610112565b348015610193575f5ffd5b5061013a6101a236600461106f565b610379565b3480156101b2575f5ffd5b5061013a6101c13660046110bf565b6104fa565b3480156101d1575f5ffd5b5061017061065b565b3480156101e5575f5ffd5b5061013a6101f43660046110bf565b6106d4565b348015610204575f5ffd5b5061013a61085b565b348015610218575f5ffd5b5061013a610227366004611041565b610a55565b348015610237575f5ffd5b505f54610170906001600160a01b031681565b348015610255575f5ffd5b50600254610170906001600160a01b031681565b61013a610cc0565b34801561027c575f5ffd5b50600454610108565b348015610290575f5ffd5b5061013a61029f366004611041565b610f5c565b3480156102af575f5ffd5b5061010867016345785d8a000081565b5f546001600160a01b031633146102f15760405162461bcd60e51b81526004016102e8906110ed565b60405180910390fd5b6004545f8083131561030e576103078383611138565b9050610349565b5f6103188461114b565b90508281111561033b5760405163619c7f5b60e11b815260040160405180910390fd5b6103458184611165565b9150505b600481905560408051848152602081018390525f5160206111d15f395f51905f52910160405180910390a1505050565b5f610382611017565b805490915060ff600160401b820416159067ffffffffffffffff165f811580156103a95750825b90505f8267ffffffffffffffff1660011480156103c55750303b155b9050811580156103d3575080155b156103f15760405163f92ee8a960e01b815260040160405180910390fd5b845467ffffffffffffffff19166001178555831561041b57845460ff60401b1916600160401b1785555b6001600160a01b038916158061043857506001600160a01b038716155b8061044a57506001600160a01b038616155b156104685760405163d92e233d60e01b815260040160405180910390fd5b5f80546001600160a01b03808c166001600160a01b03199283161790925560018a9055600280548a8416908316179055600380549289169290911691909117905583156104ef57845460ff60401b19168555604051600181527fc7f505b2f371ae2175ee4913f4499e1f2633a7b5936321eed1cdaeb6115181d29060200160405180910390a15b505050505050505050565b5f546001600160a01b031633146105235760405162461bcd60e51b81526004016102e8906110ed565b815f0361054357604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b03811661056a5760405163d92e233d60e01b815260040160405180910390fd5b6004548083111561059e5760405163391434e360e21b815230600482015260248101829052604481018490526064016102e8565b60025460405163095ea7b360e01b81526001600160a01b038481166004830152602482018690529091169063095ea7b3906044016020604051808303815f875af11580156105ee573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106129190611178565b50816001600160a01b03167fd4ff9b9c0e7f96a5697a4d12df976cbce4f79f135c350cc8014ce7ecfe4ed25e8460405161064e91815260200190565b60405180910390a2505050565b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e916106909160040190815260200190565b602060405180830381865afa1580156106ab573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906106cf919061119e565b905090565b5f546001600160a01b031633146106fd5760405162461bcd60e51b81526004016102e8906110ed565b815f0361071d57604051631f2a200560e01b815260040160405180910390fd5b6001600160a01b0381166107445760405163d92e233d60e01b815260040160405180910390fd5b600454808311156107785760405163391434e360e21b815230600482015260248101829052604481018490526064016102e8565b60025460405163a9059cbb60e01b81526001600160a01b038481166004830152602482018690525f92169063a9059cbb906044016020604051808303815f875af11580156107c8573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906107ec9190611178565b90508061080c576040516312171d8360e31b815260040160405180910390fd5b8360045f82825461081d9190611165565b909155505f5160206111d15f395f51905f52905061083a8561114b565b6004546040805192835260208301919091520160405180910390a150505050565b5f546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e9161088f9160040190815260200190565b602060405180830381865afa1580156108aa573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906108ce919061119e565b6001600160a01b0316336001600160a01b0316146108ff57604051631022318760e21b815260040160405180910390fd5b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610945573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061096991906111b9565b60045490915080821115610a51575f6109828284611165565b60025460405163a9059cbb60e01b8152336004820152602481018390529192505f916001600160a01b039091169063a9059cbb906044016020604051808303815f875af11580156109d5573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906109f99190611178565b905080610a19576040516312171d8360e31b815260040160405180910390fd5b60405182815233907f9bdedcc968f2c0682145c20289dfbb3081a39684571116ab45eabfef512e94739060200160405180910390a250505b5050565b5f546001600160a01b03163314610a7e5760405162461bcd60e51b81526004016102e8906110ed565b805f03610a9e57604051631f2a200560e01b815260040160405180910390fd5b60045480821115610ad25760405163391434e360e21b815230600482015260248101829052604481018390526064016102e8565b5f610add8383611165565b90505f81118015610af5575067016345785d8a000081105b15610b1357604051637614d15160e11b815260040160405180910390fd5b5f80546001546040516331a9108f60e11b81526001600160a01b0390921691636352211e91610b489160040190815260200190565b602060405180830381865afa158015610b63573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610b87919061119e565b90506001600160a01b038116610bb05760405163d92e233d60e01b815260040160405180910390fd5b60025460405163a9059cbb60e01b81526001600160a01b038381166004830152602482018790525f92169063a9059cbb906044016020604051808303815f875af1158015610c00573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610c249190611178565b905080610c44576040516312171d8360e31b815260040160405180910390fd5b60048390556040518581526001600160a01b038316907f1a39b9c5044b9f0ff56c5951e30c1ebe24911353aafcceb9250e83a24fe158c49060200160405180910390a25f5160206111d15f395f51905f52610c9e8661114b565b6004546040805192835260208301919091520160405180910390a15050505050565b5f546001600160a01b03163314610ce95760405162461bcd60e51b81526004016102e8906110ed565b345f03610d0957604051631f2a200560e01b815260040160405180910390fd5b67016345785d8a000034600454610d209190611138565b1015610d57576004805460405163015643f760e01b81529182015234602482015267016345785d8a000060448201526064016102e8565b6002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610d9d573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610dc191906111b9565b60035460405163a1903eab60e01b81525f600482018190529293506001600160a01b039091169063a1903eab90349060240160206040518083038185885af193505050508015610e2e575060408051601f3d908101601f19168201909252610e2b918101906111b9565b60015b610e4b576040516379cacff160e01b815260040160405180910390fd5b506002546040516370a0823160e01b81523060048201525f916001600160a01b0316906370a0823190602401602060405180830381865afa158015610e92573d5f5f3e3d5ffd5b505050506040513d601f19601f82011682018060405250810190610eb691906111b9565b9050610ec28382611165565b915050805f03610ee5576040516379cacff160e01b815260040160405180910390fd5b8060045f828254610ef69190611138565b90915550506040513481527fa1ab46d0e38f33a7b1f03853088a305927deb55c906370ff5d6d2bc732f150959060200160405180910390a16004546040805183815260208101929092525f5160206111d15f395f51905f52910160405180910390a15050565b5f546001600160a01b03163314610f855760405162461bcd60e51b81526004016102e8906110ed565b67016345785d8a000081600454610f9c9190611138565b1015610fd4576004805460405163015643f760e01b8152918201526024810182905267016345785d8a000060448201526064016102e8565b8060045f828254610fe59190611138565b90915550506004546040805183815260208101929092525f5160206111d15f395f51905f52910160405180910390a150565b5f807ff0c57e16840df040f15088dc2f81fe391c3923bec73e23a9662efc9c229c6a005b92915050565b5f60208284031215611051575f5ffd5b5035919050565b6001600160a01b038116811461106c575f5ffd5b50565b5f5f5f5f60808587031215611082575f5ffd5b843561108d81611058565b93506020850135925060408501356110a481611058565b915060608501356110b481611058565b939692955090935050565b5f5f604083850312156110d0575f5ffd5b8235915060208301356110e281611058565b809150509250929050565b6020808252601b908201527f43616c6c6572206973206e6f742053746162696c697a65724e46540000000000604082015260600190565b634e487b7160e01b5f52601160045260245ffd5b8082018082111561103b5761103b611124565b5f600160ff1b820161115f5761115f611124565b505f0390565b8181038181111561103b5761103b611124565b5f60208284031215611188575f5ffd5b81518015158114611197575f5ffd5b9392505050565b5f602082840312156111ae575f5ffd5b815161119781611058565b5f602082840312156111c9575f5ffd5b505191905056fe149e2ad4c3719ec0acdfb19acc4b31eaa110fd8e4c4f78512870123d9839fb0da26469706673582212203dbd1ba9a1c79ea8638827f5723d3ba1e1dd36890eb90b73169d45c329cd1aa364736f6c634300081d0033","sourceMap":"684:12283:78:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2361:38;;;;;;;;;;;;;;;;;;;160:25:104;;;148:2;133:18;2361:38:78;;;;;;;;9243:536;;;;;;;;;;-1:-1:-1;9243:536:78;;;;;:::i;:::-;;:::i;:::-;;1642:22;;;;;;;;;;;;;;;;1892:19;;;;;;;;;;-1:-1:-1;1892:19:78;;;;-1:-1:-1;;;;;1892:19:78;;;;;;-1:-1:-1;;;;;544:32:104;;;526:51;;514:2;499:18;1892:19:78;380:203:104;3251:1308:78;;;;;;;;;;-1:-1:-1;3251:1308:78;;;;;:::i;:::-;;:::i;6289:571::-;;;;;;;;;;-1:-1:-1;6289:571:78;;;;;:::i;:::-;;:::i;10535:130::-;;;;;;;;;;;;;:::i;11076:603::-;;;;;;;;;;-1:-1:-1;11076:603:78;;;;;:::i;:::-;;:::i;12339:626::-;;;;;;;;;;;;;:::i;7240:1263::-;;;;;;;;;;-1:-1:-1;7240:1263:78;;;;;:::i;:::-;;:::i;1557:36::-;;;;;;;;;;-1:-1:-1;1557:36:78;;;;-1:-1:-1;;;;;1557:36:78;;;1809:20;;;;;;;;;;-1:-1:-1;1809:20:78;;;;-1:-1:-1;;;;;1809:20:78;;;4772:1213;;;:::i;8789:116::-;;;;;;;;;;-1:-1:-1;8875:23:78;;8789:116;;10119:410;;;;;;;;;;-1:-1:-1;10119:410:78;;;;;:::i;:::-;;:::i;1494:57::-;;;;;;;;;;;;1542:9;1494:57;;9243:536;2532:21;;-1:-1:-1;;;;;2532:21:78;2518:10;:35;2514:78;;2555:37;;-1:-1:-1;;;2555:37:78;;;;;;;:::i;:::-;;;;;;;;2514:78;9338:23:::1;::::0;9317:18:::1;9403:9:::0;;::::1;9399:280;;;9441:27;9462:5:::0;9441:10;:27:::1;:::i;:::-;9428:40;;9399:280;;;9499:22;9532:6;9533:5:::0;9532:6:::1;:::i;:::-;9499:40;;9574:10;9557:14;:27;9553:61;;;9593:21;;-1:-1:-1::0;;;9593:21:78::1;;;;;;;;;;;9553:61;9641:27;9654:14:::0;9641:10;:27:::1;:::i;:::-;9628:40;;9485:194;9399:280;9688:23;:36:::0;;;9739:33:::1;::::0;;3046:25:104;;;3102:2;3087:18;;3080:34;;;-1:-1:-1;;;;;;;;;;;9739:33:78;3019:18:104;9739:33:78::1;;;;;;;9307:472;;9243:536:::0;:::o;3251:1308::-;4158:30:20;4191:26;:24;:26::i;:::-;4302:15;;4158:59;;-1:-1:-1;4302:15:20;-1:-1:-1;;;4302:15:20;;;4301:16;;4348:14;;4279:19;4726:16;;:34;;;;;4746:14;4726:34;4706:54;;4770:17;4790:11;:16;;4805:1;4790:16;:50;;;;-1:-1:-1;4818:4:20;4810:25;:30;4790:50;4770:70;;4856:12;4855:13;:30;;;;;4873:12;4872:13;4855:30;4851:91;;;4908:23;;-1:-1:-1;;;4908:23:20;;;;;;;;;;;4851:91;4951:18;;-1:-1:-1;;4951:18:20;4968:1;4951:18;;;4979:67;;;;5013:22;;-1:-1:-1;;;;5013:22:20;-1:-1:-1;;;5013:22:20;;;4979:67;-1:-1:-1;;;;;3599:28:78;::::1;::::0;;:52:::1;;-1:-1:-1::0;;;;;;3631:20:78;::::1;::::0;3599:52:::1;:75;;;-1:-1:-1::0;;;;;;3655:19:78;::::1;::::0;3599:75:::1;3595:126;;;3697:13;;-1:-1:-1::0;;;3697:13:78::1;;;;;;;;;;;3595:126;3900:21;:38:::0;;-1:-1:-1;;;;;3900:38:78;;::::1;-1:-1:-1::0;;;;;;3900:38:78;;::::1;;::::0;;;;3948:18;;;4033:5:::1;:14:::0;;;;::::1;::::0;;::::1;;::::0;;4057:4:::1;:12:::0;;;;::::1;::::0;;;::::1;::::0;;;::::1;::::0;;5066:101:20;;;;5100:23;;-1:-1:-1;;;;5100:23:20;;;5142:14;;-1:-1:-1;3278:50:104;;5142:14:20;;3266:2:104;3251:18;5142:14:20;;;;;;;5066:101;4092:1081;;;;;3251:1308:78;;;;:::o;6289:571::-;2532:21;;-1:-1:-1;;;;;2532:21:78;2518:10;:35;2514:78;;2555:37;;-1:-1:-1;;;2555:37:78;;;;;;;:::i;2514:78::-;6401:6:::1;6411:1;6401:11:::0;6397:36:::1;;6421:12;;-1:-1:-1::0;;;6421:12:78::1;;;;;;;;;;;6397:36;-1:-1:-1::0;;;;;6447:32:78;::::1;6443:58;;6488:13;;-1:-1:-1::0;;;6488:13:78::1;;;;;;;;;;;6443:58;6537:23;::::0;6574;;::::1;6570:99;;;6606:63;::::0;-1:-1:-1;;;6606:63:78;;6639:4:::1;6606:63;::::0;::::1;3541:51:104::0;3608:18;;;3601:34;;;3651:18;;;3644:34;;;3514:18;;6606:63:78::1;3339:345:104::0;6570:99:78::1;6736:5;::::0;6729:49:::1;::::0;-1:-1:-1;;;6729:49:78;;-1:-1:-1;;;;;3881:32:104;;;6729:49:78::1;::::0;::::1;3863:51:104::0;3930:18;;;3923:34;;;6736:5:78;;::::1;::::0;6729:21:::1;::::0;3836:18:104;;6729:49:78::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;6812:18;-1:-1:-1::0;;;;;6793:46:78::1;;6832:6;6793:46;;;;160:25:104::0;;148:2;133:18;;14:177;6793:46:78::1;;;;;;;;6387:473;6289:571:::0;;:::o;10535:130::-;10585:7;10619:21;;;10650:7;10611:47;;-1:-1:-1;;;10611:47:78;;-1:-1:-1;;;;;10619:21:78;;;;10611:38;;:47;;;;160:25:104;;;148:2;133:18;;14:177;10611:47:78;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;10604:54;;10535:130;:::o;11076:603::-;2532:21;;-1:-1:-1;;;;;2532:21:78;2518:10;:35;2514:78;;2555:37;;-1:-1:-1;;;2555:37:78;;;;;;;:::i;2514:78::-;11183:6:::1;11193:1;11183:11:::0;11179:36:::1;;11203:12;;-1:-1:-1::0;;;11203:12:78::1;;;;;;;;;;;11179:36;-1:-1:-1::0;;;;;11229:23:78;::::1;11225:49;;11261:13;;-1:-1:-1::0;;;11261:13:78::1;;;;;;;;;;;11225:49;11310:23;::::0;11347;;::::1;11343:99;;;11379:63;::::0;-1:-1:-1;;;11379:63:78;;11412:4:::1;11379:63;::::0;::::1;3541:51:104::0;3608:18;;;3601:34;;;3651:18;;;3644:34;;;3514:18;;11379:63:78::1;3339:345:104::0;11343:99:78::1;11475:5;::::0;11468:41:::1;::::0;-1:-1:-1;;;11468:41:78;;-1:-1:-1;;;;;3881:32:104;;;11468:41:78::1;::::0;::::1;3863:51:104::0;3930:18;;;3923:34;;;11453:12:78::1;::::0;11475:5:::1;::::0;11468:22:::1;::::0;3836:18:104;;11468:41:78::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;11453:56;;11524:7;11519:37;;11540:16;;-1:-1:-1::0;;;11540:16:78::1;;;;;;;;;;;11519:37;11594:6;11567:23;;:33;;;;;;;:::i;:::-;::::0;;;-1:-1:-1;;;;;;;;;;;;11616:56:78;-1:-1:-1;11631:15:78::1;11639:6:::0;11631:15:::1;:::i;:::-;11648:23;::::0;11616:56:::1;::::0;;3046:25:104;;;3102:2;3087:18;;3080:34;;;;3019:18;11616:56:78::1;;;;;;;11169:510;;11076:603:::0;;:::o;12339:626::-;12422:21;;;12453:7;12414:47;;-1:-1:-1;;;12414:47:78;;-1:-1:-1;;;;;12422:21:78;;;;12414:38;;:47;;;;160:25:104;;;148:2;133:18;;14:177;12414:47:78;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1;;;;;12400:61:78;:10;-1:-1:-1;;;;;12400:61:78;;12396:112;;12484:13;;-1:-1:-1;;;12484:13:78;;;;;;;;;;;12396:112;12551:5;;12544:38;;-1:-1:-1;;;12544:38:78;;12576:4;12544:38;;;526:51:104;12518:23:78;;-1:-1:-1;;;;;12551:5:78;;12544:23;;499:18:104;;12544:38:78;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;12617:23;;12518:64;;-1:-1:-1;12655:32:78;;;12651:308;;;12703:20;12726:32;12744:14;12726:15;:32;:::i;:::-;12795:5;;12788:48;;-1:-1:-1;;;12788:48:78;;12811:10;12788:48;;;3863:51:104;3930:18;;;3923:34;;;12703:55:78;;-1:-1:-1;12773:12:78;;-1:-1:-1;;;;;12795:5:78;;;;12788:22;;3836:18:104;;12788:48:78;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;12773:63;;12855:7;12850:37;;12871:16;;-1:-1:-1;;;12871:16:78;;;;;;;;;;;12850:37;12907:41;;160:25:104;;;12923:10:78;;12907:41;;148:2:104;133:18;12907:41:78;;;;;;;12689:270;;12651:308;12386:579;;12339:626::o;7240:1263::-;2532:21;;-1:-1:-1;;;;;2532:21:78;2518:10;:35;2514:78;;2555:37;;-1:-1:-1;;;2555:37:78;;;;;;;:::i;2514:78::-;7326:6:::1;7336:1;7326:11:::0;7322:36:::1;;7346:12;;-1:-1:-1::0;;;7346:12:78::1;;;;;;;;;;;7322:36;7393:23;::::0;7430;;::::1;7426:99;;;7462:63;::::0;-1:-1:-1;;;7462:63:78;;7495:4:::1;7462:63;::::0;::::1;3541:51:104::0;3608:18;;;3601:34;;;3651:18;;;3644:34;;;3514:18;;7462:63:78::1;3339:345:104::0;7426:99:78::1;7594:24;7621:23;7638:6:::0;7621:14;:23:::1;:::i;:::-;7594:50;;7677:1;7658:16;:20;:64;;;;;1542:9;7682:16;:40;7658:64;7654:128;;;7745:26;;-1:-1:-1::0;;;7745:26:78::1;;;;;;;;;;;7654:128;7884:20;7915:21:::0;;;7946:7;7907:47:::1;::::0;-1:-1:-1;;;7907:47:78;;-1:-1:-1;;;;;7915:21:78;;::::1;::::0;7907:38:::1;::::0;:47:::1;::::0;::::1;;160:25:104::0;;;148:2;133:18;;14:177;7907:47:78::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;7884:70:::0;-1:-1:-1;;;;;;7990:26:78;::::1;7986:52;;8025:13;;-1:-1:-1::0;;;8025:13:78::1;;;;;;;;;;;7986:52;8155:5;::::0;8148:44:::1;::::0;-1:-1:-1;;;8148:44:78;;-1:-1:-1;;;;;3881:32:104;;;8148:44:78::1;::::0;::::1;3863:51:104::0;3930:18;;;3923:34;;;8133:12:78::1;::::0;8155:5:::1;::::0;8148:22:::1;::::0;3836:18:104;;8148:44:78::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;8133:59;;8207:7;8202:37;;8223:16;;-1:-1:-1::0;;;8223:16:78::1;;;;;;;;;;;8202:37;8250:23;:42:::0;;;8384:41:::1;::::0;160:25:104;;;-1:-1:-1;;;;;8384:41:78;::::1;::::0;::::1;::::0;148:2:104;133:18;8384:41:78::1;;;;;;;-1:-1:-1::0;;;;;;;;;;;8455:15:78::1;8463:6:::0;8455:15:::1;:::i;:::-;8472:23;::::0;8440:56:::1;::::0;;3046:25:104;;;3102:2;3087:18;;3080:34;;;;3019:18;8440:56:78::1;;;;;;;7312:1191;;;;7240:1263:::0;:::o;4772:1213::-;2532:21;;-1:-1:-1;;;;;2532:21:78;2518:10;:35;2514:78;;2555:37;;-1:-1:-1;;;2555:37:78;;;;;;;:::i;2514:78::-;4840:9:::1;4853:1;4840:14:::0;4836:39:::1;;4863:12;;-1:-1:-1::0;;;4863:12:78::1;;;;;;;;;;;4836:39;1542:9;5013;4987:23;;:35;;;;:::i;:::-;:59;4983:180;;;5094:23;::::0;;5069:83:::1;::::0;-1:-1:-1;;;5069:83:78;;;;::::1;4897:25:104::0;5119:9:78::1;4938:18:104::0;;;4931:34;1542:9:78::1;4981:18:104::0;;;4974:34;4870:18;;5069:83:78::1;4695:319:104::0;4983:180:78::1;5242:5;::::0;5235:38:::1;::::0;-1:-1:-1;;;5235:38:78;;5267:4:::1;5235:38;::::0;::::1;526:51:104::0;5211:21:78::1;::::0;-1:-1:-1;;;;;5242:5:78::1;::::0;5235:23:::1;::::0;499:18:104;;5235:38:78::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5392:4;::::0;5386:48:::1;::::0;-1:-1:-1;;;5386:48:78;;5351:21:::1;5386:48;::::0;::::1;526:51:104::0;;;5211:62:78;;-1:-1:-1;;;;;;5392:4:78;;::::1;::::0;5386:18:::1;::::0;5412:9:::1;::::0;499:18:104;;5386:48:78::1;;;;;;;;;;;;;;;;;;;;-1:-1:-1::0;5386:48:78::1;::::0;;::::1;;::::0;;::::1;-1:-1:-1::0;;5386:48:78::1;::::0;::::1;::::0;;;::::1;::::0;;::::1;::::0;::::1;:::i;:::-;;;5382:320;;5676:15;;-1:-1:-1::0;;;5676:15:78::1;;;;;;;;;;;5382:320;-1:-1:-1::0;5548:5:78::1;::::0;5541:38:::1;::::0;-1:-1:-1;;;5541:38:78;;5573:4:::1;5541:38;::::0;::::1;526:51:104::0;5518:20:78::1;::::0;-1:-1:-1;;;;;5548:5:78::1;::::0;5541:23:::1;::::0;499:18:104;;5541:38:78::1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;5518:61:::0;-1:-1:-1;5609:28:78::1;5624:13:::0;5518:61;5609:28:::1;:::i;:::-;5593:44;;5435:213;5715:13;5732:1;5715:18:::0;5711:46:::1;;5742:15;;-1:-1:-1::0;;;5742:15:78::1;;;;;;;;;;;5711:46;5828:13;5801:23;;:40;;;;;;;:::i;:::-;::::0;;;-1:-1:-1;;5857:26:78::1;::::0;5873:9:::1;160:25:104::0;;5857:26:78::1;::::0;148:2:104;133:18;5857:26:78::1;;;;;;;5954:23;::::0;5916:62:::1;::::0;;3046:25:104;;;3102:2;3087:18;;3080:34;;;;-1:-1:-1;;;;;;;;;;;5916:62:78;3019:18:104;5916:62:78::1;;;;;;;4826:1159;;4772:1213::o:0;10119:410::-;2532:21;;-1:-1:-1;;;;;2532:21:78;2518:10;:35;2514:78;;2555:37;;-1:-1:-1;;;2555:37:78;;;;;;;:::i;2514:78::-;1542:9:::1;10245:11;10219:23;;:37;;;;:::i;:::-;:61;10215:184;;;10328:23;::::0;;10303:85:::1;::::0;-1:-1:-1;;;10303:85:78;;;;::::1;4897:25:104::0;4938:18;;;4931:34;;;1542:9:78::1;4981:18:104::0;;;4974:34;4870:18;;10303:85:78::1;4695:319:104::0;10215:184:78::1;10436:11;10409:23;;:38;;;;;;;:::i;:::-;::::0;;;-1:-1:-1;;10498:23:78::1;::::0;10462:60:::1;::::0;;3046:25:104;;;3102:2;3087:18;;3080:34;;;;-1:-1:-1;;;;;;;;;;;10462:60:78;3019:18:104;10462:60:78::1;;;;;;;10119:410:::0;:::o;9073:205:20:-;9131:30;;3147:66;9188:27;9173:42;9073:205;-1:-1:-1;;9073:205:20:o;196:179:104:-;254:6;307:2;295:9;286:7;282:23;278:32;275:52;;;323:1;320;313:12;275:52;-1:-1:-1;346:23:104;;196:179;-1:-1:-1;196:179:104:o;588:131::-;-1:-1:-1;;;;;663:31:104;;653:42;;643:70;;709:1;706;699:12;643:70;588:131;:::o;724:650::-;810:6;818;826;834;887:3;875:9;866:7;862:23;858:33;855:53;;;904:1;901;894:12;855:53;943:9;930:23;962:31;987:5;962:31;:::i;:::-;1012:5;-1:-1:-1;1090:2:104;1075:18;;1062:32;;-1:-1:-1;1172:2:104;1157:18;;1144:32;1185:33;1144:32;1185:33;:::i;:::-;1237:7;-1:-1:-1;1296:2:104;1281:18;;1268:32;1309:33;1268:32;1309:33;:::i;:::-;724:650;;;;-1:-1:-1;724:650:104;;-1:-1:-1;;724:650:104:o;1379:367::-;1447:6;1455;1508:2;1496:9;1487:7;1483:23;1479:32;1476:52;;;1524:1;1521;1514:12;1476:52;1569:23;;;-1:-1:-1;1668:2:104;1653:18;;1640:32;1681:33;1640:32;1681:33;:::i;:::-;1733:7;1723:17;;;1379:367;;;;;:::o;1982:351::-;2184:2;2166:21;;;2223:2;2203:18;;;2196:30;2262:29;2257:2;2242:18;;2235:57;2324:2;2309:18;;1982:351::o;2338:127::-;2399:10;2394:3;2390:20;2387:1;2380:31;2430:4;2427:1;2420:15;2454:4;2451:1;2444:15;2470:125;2535:9;;;2556:10;;;2553:36;;;2569:18;;:::i;2600:136::-;2635:3;-1:-1:-1;;;2656:22:104;;2653:48;;2681:18;;:::i;:::-;-1:-1:-1;2721:1:104;2717:13;;2600:136::o;2741:128::-;2808:9;;;2829:11;;;2826:37;;;2843:18;;:::i;3968:277::-;4035:6;4088:2;4076:9;4067:7;4063:23;4059:32;4056:52;;;4104:1;4101;4094:12;4056:52;4136:9;4130:16;4189:5;4182:13;4175:21;4168:5;4165:32;4155:60;;4211:1;4208;4201:12;4155:60;4234:5;3968:277;-1:-1:-1;;;3968:277:104:o;4250:251::-;4320:6;4373:2;4361:9;4352:7;4348:23;4344:32;4341:52;;;4389:1;4386;4379:12;4341:52;4421:9;4415:16;4440:31;4465:5;4440:31;:::i;4506:184::-;4576:6;4629:2;4617:9;4608:7;4604:23;4600:32;4597:52;;;4645:1;4642;4635:12;4597:52;-1:-1:-1;4668:16:104;;4506:184;-1:-1:-1;4506:184:104:o","linkReferences":{}},"methodIdentifiers":{"MINIMUM_ESCROW_AMOUNT()":"fbae0ade","approveAllocation(uint256,address)":"4f68ae75","checkMinimumAndUpdateBalance(uint256)":"ecb772e0","deposit()":"d0e30db0","initialize(address,uint256,address,address)":"358394d8","lido()":"23509a2d","stETH()":"c1fe3e48","stabilizerNFTContract()":"bec070d6","stabilizerOwner()":"7d0e9bba","tokenId()":"17d70f7c","unallocatedStETH()":"ec60b9ab","unallocatedStETHBalance()":"16f637ff","updateBalance(int256)":"171b0188","withdrawExcessStEthBalance()":"878a672c","withdrawForAllocation(uint256,address)":"7d810c2a","withdrawUnallocated(uint256)":"a9015400"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.29+commit.ab55807c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"BalanceUpdateFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"DepositFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"allowance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientAllowance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"balance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"needed\",\"type\":\"uint256\"}],\"name\":\"ERC20InsufficientBalance\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"approver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidApprover\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"receiver\",\"type\":\"address\"}],\"name\":\"ERC20InvalidReceiver\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSender\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"}],\"name\":\"ERC20InvalidSpender\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InitialDepositFailed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"currentBalance\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"depositAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"minimumAmount\",\"type\":\"uint256\"}],\"name\":\"InsufficientEscrowAmount\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidInitialization\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotInitializing\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NotNFTOwner\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TransferFailed\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"WithdrawalWouldLeaveDust\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAddress\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroAmount\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"spender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"AllocationApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"int256\",\"name\":\"delta\",\"type\":\"int256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newBalance\",\"type\":\"uint256\"}],\"name\":\"BalanceUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"DepositReceived\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"ExcessWithdrawn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint64\",\"name\":\"version\",\"type\":\"uint64\"}],\"name\":\"Initialized\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"WithdrawalCompleted\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"MINIMUM_ESCROW_AMOUNT\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"positionNFTAddress\",\"type\":\"address\"}],\"name\":\"approveAllocation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"stETHAmount\",\"type\":\"uint256\"}],\"name\":\"checkMinimumAndUpdateBalance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"deposit\",\"outputs\":[],\"stateMutability\":\"payable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_stabilizerNFT\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_stETH\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_lido\",\"type\":\"address\"}],\"name\":\"initialize\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"lido\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stETH\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerNFTContract\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"stabilizerOwner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"tokenId\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unallocatedStETH\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unallocatedStETHBalance\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"int256\",\"name\":\"delta\",\"type\":\"int256\"}],\"name\":\"updateBalance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"withdrawExcessStEthBalance\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"}],\"name\":\"withdrawForAllocation\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"withdrawUnallocated\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone.\",\"errors\":{\"ERC20InsufficientAllowance(address,uint256,uint256)\":[{\"details\":\"Indicates a failure with the `spender`\\u2019s `allowance`. Used in transfers.\",\"params\":{\"allowance\":\"Amount of tokens a `spender` is allowed to operate with.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"ERC20InsufficientBalance(address,uint256,uint256)\":[{\"details\":\"Indicates an error related to the current `balance` of a `sender`. Used in transfers.\",\"params\":{\"balance\":\"Current balance for the interacting account.\",\"needed\":\"Minimum amount required to perform a transfer.\",\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidApprover(address)\":[{\"details\":\"Indicates a failure with the `approver` of a token to be approved. Used in approvals.\",\"params\":{\"approver\":\"Address initiating an approval operation.\"}}],\"ERC20InvalidReceiver(address)\":[{\"details\":\"Indicates a failure with the token `receiver`. Used in transfers.\",\"params\":{\"receiver\":\"Address to which tokens are being transferred.\"}}],\"ERC20InvalidSender(address)\":[{\"details\":\"Indicates a failure with the token `sender`. Used in transfers.\",\"params\":{\"sender\":\"Address whose tokens are being transferred.\"}}],\"ERC20InvalidSpender(address)\":[{\"details\":\"Indicates a failure with the `spender` to be approved. Used in approvals.\",\"params\":{\"spender\":\"Address that may be allowed to operate on tokens without being their owner.\"}}],\"InvalidInitialization()\":[{\"details\":\"The contract is already initialized.\"}],\"NotInitializing()\":[{\"details\":\"The contract is not initializing.\"}]},\"events\":{\"Initialized(uint64)\":{\"details\":\"Triggered when the contract has been initialized or reinitialized.\"}},\"kind\":\"dev\",\"methods\":{\"approveAllocation(uint256,address)\":{\"details\":\"Callable only by StabilizerNFT. Checks for sufficient balance.\",\"params\":{\"amount\":\"The amount of stETH to approve.\",\"positionNFTAddress\":\"The address of the PositionNFT contract.\"}},\"checkMinimumAndUpdateBalance(uint256)\":{\"details\":\"Callable only by StabilizerNFT for direct stETH deposits. Reverts if the resulting      balance would be below the minimum threshold.\",\"params\":{\"stETHAmount\":\"The amount of stETH being deposited.\"}},\"constructor\":{\"custom:oz-upgrades-unsafe-allow\":\"constructor\"},\"deposit()\":{\"details\":\"Stakes the received ETH into stETH. Callable only by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"details\":\"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.\",\"params\":{\"_lido\":\"The address of the Lido staking pool.\",\"_stETH\":\"The address of the stETH token.\",\"_stabilizerNFT\":\"The address of the controlling StabilizerNFT contract.\",\"_tokenId\":\"The ID of the Stabilizer NFT this escrow is associated with.\"}},\"unallocatedStETH()\":{\"details\":\"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\",\"returns\":{\"_0\":\"The amount of stETH held by the escrow.\"}},\"updateBalance(int256)\":{\"details\":\"Callable only by StabilizerNFT to report balance changes from stETH transfers      that happen outside this contract's direct control (e.g., direct deposit, allocation).\",\"params\":{\"delta\":\"The change in balance (can be positive or negative).\"}},\"withdrawExcessStEthBalance()\":{\"details\":\"This function is the designated mechanism to handle discrepancies between the physical      stETH balance of this contract and the tracked `unallocatedStETHBalance`. Such a      discrepancy primarily arises from stETH rebasing (yield), which is not tracked in the      internal ledger for simplicity. This function allows the NFT owner to claim this yield      or recover any other funds sent directly to the escrow.\"},\"withdrawForAllocation(uint256,address)\":{\"details\":\"Callable only by StabilizerNFT. This is a single-call alternative to approve/transferFrom      to reduce bytecode size in the calling StabilizerNFT contract.\",\"params\":{\"amount\":\"The amount of stETH to withdraw.\",\"recipient\":\"The address to send the stETH to.\"}},\"withdrawUnallocated(uint256)\":{\"details\":\"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.\",\"params\":{\"amount\":\"The amount of stETH to withdraw.\"}}},\"stateVariables\":{\"unallocatedStETHBalance\":{\"details\":\"This balance tracks the principal amount of unallocated stETH. It intentionally does not      account for stETH rebasing (yield) to keep the logic simple, as this escrow's balance      is not used for critical system-wide ratio calculations. The accrued yield can be      claimed by the NFT owner via `withdrawExcessStEthBalance`.\"}},\"title\":\"StabilizerEscrow\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"approveAllocation(uint256,address)\":{\"notice\":\"Approves the PositionNFT contract to spend stETH for allocation.\"},\"checkMinimumAndUpdateBalance(uint256)\":{\"notice\":\"Checks if a new deposit meets the minimum balance requirement and updates the balance.\"},\"deposit()\":{\"notice\":\"Receives additional ETH deposits forwarded by StabilizerNFT.\"},\"initialize(address,uint256,address,address)\":{\"notice\":\"Initializes the escrow contract state.\"},\"unallocatedStETH()\":{\"notice\":\"Returns the current stETH balance of this contract.\"},\"updateBalance(int256)\":{\"notice\":\"Updates the internal balance tracking.\"},\"withdrawExcessStEthBalance()\":{\"notice\":\"Allows the owner of the associated Stabilizer NFT to withdraw any stETH balance         that is in excess of the internally tracked `unallocatedStETHBalance`.\"},\"withdrawForAllocation(uint256,address)\":{\"notice\":\"Withdraws stETH from this escrow and sends it to a recipient (e.g., PositionEscrow).\"},\"withdrawUnallocated(uint256)\":{\"notice\":\"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\"}},\"notice\":\"A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/StabilizerEscrow.sol\":\"StabilizerEscrow\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":chainlink/=lib/chainlink/\",\":createx/=lib/createx/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/\",\":solady/=lib/createx/lib/solady/src/\",\":uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/\",\":uniswap-v3-core/=lib/uniswap-v3-core/\"]},\"sources\":{\"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol\":{\"keccak256\":\"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b\",\"dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3\"]},\"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol\":{\"keccak256\":\"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b\",\"dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol\":{\"keccak256\":\"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11\",\"dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621\",\"dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL\"]},\"src/StabilizerEscrow.sol\":{\"keccak256\":\"0xcbe4bef5e01d0155091daacc3b198d4698450b9df495111cb1e30952ce9817e1\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8f9418547a65119a20c8181132db9483a690eab93a5d47b4f9648528de39a9c6\",\"dweb:/ipfs/QmNfy3j9hLVo67E4Mi65er78QUujcSZARjqRoggkqb53Dw\"]},\"src/interfaces/ILido.sol\":{\"keccak256\":\"0xf33bd94f14a562f32ceaf9211a3b7084e4e225cc548b91db3e611637dec29a8d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://e71f220455796f3f19855e3d89ae8a0674894bf19bc49adc430f7afaec36a22a\",\"dweb:/ipfs/QmcQ56JKRECKQcPyXXQwUxrAyrHnA88swjyPaK7AULHW9v\"]},\"src/interfaces/IStabilizerEscrow.sol\":{\"keccak256\":\"0xffb0a293f4742b4bec8328faaa26d2df94c91652e690886b387499a0bdc1667c\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://fd1c4182a8dda7622ae9600e58e2299ac3dfebbf072b4c951334af79e3526190\",\"dweb:/ipfs/QmYEaRmfTwLgH6h4TMX6oFxqrtniJUUxo577NG36yxoNEs\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.29+commit.ab55807c"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"type":"error","name":"BalanceUpdateFailed"},{"inputs":[],"type":"error","name":"DepositFailed"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"allowance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientAllowance"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"uint256","name":"balance","type":"uint256"},{"internalType":"uint256","name":"needed","type":"uint256"}],"type":"error","name":"ERC20InsufficientBalance"},{"inputs":[{"internalType":"address","name":"approver","type":"address"}],"type":"error","name":"ERC20InvalidApprover"},{"inputs":[{"internalType":"address","name":"receiver","type":"address"}],"type":"error","name":"ERC20InvalidReceiver"},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"type":"error","name":"ERC20InvalidSender"},{"inputs":[{"internalType":"address","name":"spender","type":"address"}],"type":"error","name":"ERC20InvalidSpender"},{"inputs":[],"type":"error","name":"InitialDepositFailed"},{"inputs":[{"internalType":"uint256","name":"currentBalance","type":"uint256"},{"internalType":"uint256","name":"depositAmount","type":"uint256"},{"internalType":"uint256","name":"minimumAmount","type":"uint256"}],"type":"error","name":"InsufficientEscrowAmount"},{"inputs":[],"type":"error","name":"InvalidInitialization"},{"inputs":[],"type":"error","name":"NotInitializing"},{"inputs":[],"type":"error","name":"NotNFTOwner"},{"inputs":[],"type":"error","name":"TransferFailed"},{"inputs":[],"type":"error","name":"WithdrawalWouldLeaveDust"},{"inputs":[],"type":"error","name":"ZeroAddress"},{"inputs":[],"type":"error","name":"ZeroAmount"},{"inputs":[{"internalType":"address","name":"spender","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"AllocationApproved","anonymous":false},{"inputs":[{"internalType":"int256","name":"delta","type":"int256","indexed":false},{"internalType":"uint256","name":"newBalance","type":"uint256","indexed":false}],"type":"event","name":"BalanceUpdated","anonymous":false},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"DepositReceived","anonymous":false},{"inputs":[{"internalType":"address","name":"recipient","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"ExcessWithdrawn","anonymous":false},{"inputs":[{"internalType":"uint64","name":"version","type":"uint64","indexed":false}],"type":"event","name":"Initialized","anonymous":false},{"inputs":[{"internalType":"address","name":"recipient","type":"address","indexed":true},{"internalType":"uint256","name":"amount","type":"uint256","indexed":false}],"type":"event","name":"WithdrawalCompleted","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"MINIMUM_ESCROW_AMOUNT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"positionNFTAddress","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"approveAllocation"},{"inputs":[{"internalType":"uint256","name":"stETHAmount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"checkMinimumAndUpdateBalance"},{"inputs":[],"stateMutability":"payable","type":"function","name":"deposit"},{"inputs":[{"internalType":"address","name":"_stabilizerNFT","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"address","name":"_stETH","type":"address"},{"internalType":"address","name":"_lido","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"initialize"},{"inputs":[],"stateMutability":"view","type":"function","name":"lido","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stETH","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerNFTContract","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"stabilizerOwner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"tokenId","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"unallocatedStETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"unallocatedStETHBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"int256","name":"delta","type":"int256"}],"stateMutability":"nonpayable","type":"function","name":"updateBalance"},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"withdrawExcessStEthBalance"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"recipient","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"withdrawForAllocation"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"stateMutability":"nonpayable","type":"function","name":"withdrawUnallocated"}],"devdoc":{"kind":"dev","methods":{"approveAllocation(uint256,address)":{"details":"Callable only by StabilizerNFT. Checks for sufficient balance.","params":{"amount":"The amount of stETH to approve.","positionNFTAddress":"The address of the PositionNFT contract."}},"checkMinimumAndUpdateBalance(uint256)":{"details":"Callable only by StabilizerNFT for direct stETH deposits. Reverts if the resulting      balance would be below the minimum threshold.","params":{"stETHAmount":"The amount of stETH being deposited."}},"constructor":{"custom:oz-upgrades-unsafe-allow":"constructor"},"deposit()":{"details":"Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"initialize(address,uint256,address,address)":{"details":"Sets immutable addresses and the token ID. Meant to be called once after clone deployment.","params":{"_lido":"The address of the Lido staking pool.","_stETH":"The address of the stETH token.","_stabilizerNFT":"The address of the controlling StabilizerNFT contract.","_tokenId":"The ID of the Stabilizer NFT this escrow is associated with."}},"unallocatedStETH()":{"details":"Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.","returns":{"_0":"The amount of stETH held by the escrow."}},"updateBalance(int256)":{"details":"Callable only by StabilizerNFT to report balance changes from stETH transfers      that happen outside this contract's direct control (e.g., direct deposit, allocation).","params":{"delta":"The change in balance (can be positive or negative)."}},"withdrawExcessStEthBalance()":{"details":"This function is the designated mechanism to handle discrepancies between the physical      stETH balance of this contract and the tracked `unallocatedStETHBalance`. Such a      discrepancy primarily arises from stETH rebasing (yield), which is not tracked in the      internal ledger for simplicity. This function allows the NFT owner to claim this yield      or recover any other funds sent directly to the escrow."},"withdrawForAllocation(uint256,address)":{"details":"Callable only by StabilizerNFT. This is a single-call alternative to approve/transferFrom      to reduce bytecode size in the calling StabilizerNFT contract.","params":{"amount":"The amount of stETH to withdraw.","recipient":"The address to send the stETH to."}},"withdrawUnallocated(uint256)":{"details":"Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance.","params":{"amount":"The amount of stETH to withdraw."}}},"version":1},"userdoc":{"kind":"user","methods":{"approveAllocation(uint256,address)":{"notice":"Approves the PositionNFT contract to spend stETH for allocation."},"checkMinimumAndUpdateBalance(uint256)":{"notice":"Checks if a new deposit meets the minimum balance requirement and updates the balance."},"deposit()":{"notice":"Receives additional ETH deposits forwarded by StabilizerNFT."},"initialize(address,uint256,address,address)":{"notice":"Initializes the escrow contract state."},"unallocatedStETH()":{"notice":"Returns the current stETH balance of this contract."},"updateBalance(int256)":{"notice":"Updates the internal balance tracking."},"withdrawExcessStEthBalance()":{"notice":"Allows the owner of the associated Stabilizer NFT to withdraw any stETH balance         that is in excess of the internally tracked `unallocatedStETHBalance`."},"withdrawForAllocation(uint256,address)":{"notice":"Withdraws stETH from this escrow and sends it to a recipient (e.g., PositionEscrow)."},"withdrawUnallocated(uint256)":{"notice":"Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT."}},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","chainlink/=lib/chainlink/","createx/=lib/createx/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/","solady/=lib/createx/lib/solady/src/","uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/","uniswap-v3-core/=lib/uniswap-v3-core/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/StabilizerEscrow.sol":"StabilizerEscrow"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol":{"keccak256":"0xe62b887bd4460c77222e1c806362b72462ddb13e224ba3a759ad1a23fe6ea22a","urls":["bzz-raw://b34213dbcea29166c5b77c8aa48908db812bf55ff501f89bc0e8e6e4dd7c8e2b","dweb:/ipfs/QmZ7HaZLMseqKhUL5cUM2dfWp6Xy8HGME6kA3iDM4E5QV3"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/draft-IERC6093.sol":{"keccak256":"0x880da465c203cec76b10d72dbd87c80f387df4102274f23eea1f9c9b0918792b","urls":["bzz-raw://399594cd8bb0143bc9e55e0f1d071d0d8c850a394fb7a319d50edd55d9ed822b","dweb:/ipfs/QmbPZzgtT6LEm9CMqWfagQFwETbV1ztpECBB1DtQHrKiRz"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol":{"keccak256":"0x5dc63d1c6a12fe1b17793e1745877b2fcbe1964c3edfd0a482fac21ca8f18261","urls":["bzz-raw://6b7f97c5960a50fd1822cb298551ffc908e37b7893a68d6d08bce18a11cb0f11","dweb:/ipfs/QmQQvxBytoY1eBt3pRQDmvH2hZ2yjhs12YqVfzGm7KSURq"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8","urls":["bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621","dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL"],"license":"MIT"},"src/StabilizerEscrow.sol":{"keccak256":"0xcbe4bef5e01d0155091daacc3b198d4698450b9df495111cb1e30952ce9817e1","urls":["bzz-raw://8f9418547a65119a20c8181132db9483a690eab93a5d47b4f9648528de39a9c6","dweb:/ipfs/QmNfy3j9hLVo67E4Mi65er78QUujcSZARjqRoggkqb53Dw"],"license":"MIT"},"src/interfaces/ILido.sol":{"keccak256":"0xf33bd94f14a562f32ceaf9211a3b7084e4e225cc548b91db3e611637dec29a8d","urls":["bzz-raw://e71f220455796f3f19855e3d89ae8a0674894bf19bc49adc430f7afaec36a22a","dweb:/ipfs/QmcQ56JKRECKQcPyXXQwUxrAyrHnA88swjyPaK7AULHW9v"],"license":"MIT"},"src/interfaces/IStabilizerEscrow.sol":{"keccak256":"0xffb0a293f4742b4bec8328faaa26d2df94c91652e690886b387499a0bdc1667c","urls":["bzz-raw://fd1c4182a8dda7622ae9600e58e2299ac3dfebbf072b4c951334af79e3526190","dweb:/ipfs/QmYEaRmfTwLgH6h4TMX6oFxqrtniJUUxo577NG36yxoNEs"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[{"astId":55100,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stabilizerNFTContract","offset":0,"slot":"0","type":"t_address"},{"astId":55102,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"tokenId","offset":0,"slot":"1","type":"t_uint256"},{"astId":55104,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"stETH","offset":0,"slot":"2","type":"t_address"},{"astId":55106,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"lido","offset":0,"slot":"3","type":"t_address"},{"astId":55109,"contract":"src/StabilizerEscrow.sol:StabilizerEscrow","label":"unallocatedStETHBalance","offset":0,"slot":"4","type":"t_uint256"}],"types":{"t_address":{"encoding":"inplace","label":"address","numberOfBytes":"20"},"t_uint256":{"encoding":"inplace","label":"uint256","numberOfBytes":"32"}}},"ast":{"absolutePath":"src/StabilizerEscrow.sol","id":55718,"exportedSymbols":{"IERC165":[47119],"IERC20":[43805],"IERC20Errors":[42340],"IERC721":[44138],"ILido":[60170],"IStabilizerEscrow":[60561],"Initializable":[39723],"StabilizerEscrow":[55717]},"nodeType":"SourceUnit","src":"32:12936:78","nodes":[{"id":55048,"nodeType":"PragmaDirective","src":"32:23:78","nodes":[],"literals":["solidity","0.8",".29"]},{"id":55049,"nodeType":"ImportDirective","src":"57:72:78","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","nameLocation":"-1:-1:-1","scope":55718,"sourceUnit":43806,"symbolAliases":[],"unitAlias":""},{"id":55050,"nodeType":"ImportDirective","src":"130:74:78","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC721/IERC721.sol","nameLocation":"-1:-1:-1","scope":55718,"sourceUnit":44139,"symbolAliases":[],"unitAlias":""},{"id":55052,"nodeType":"ImportDirective","src":"205:112:78","nodes":[],"absolutePath":"lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","file":"../lib/openzeppelin-contracts-upgradeable/contracts/proxy/utils/Initializable.sol","nameLocation":"-1:-1:-1","scope":55718,"sourceUnit":39724,"symbolAliases":[{"foreign":{"id":55051,"name":"Initializable","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39723,"src":"213:13:78","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":55053,"nodeType":"ImportDirective","src":"346:32:78","nodes":[],"absolutePath":"src/interfaces/ILido.sol","file":"./interfaces/ILido.sol","nameLocation":"-1:-1:-1","scope":55718,"sourceUnit":60171,"symbolAliases":[],"unitAlias":""},{"id":55054,"nodeType":"ImportDirective","src":"379:44:78","nodes":[],"absolutePath":"src/interfaces/IStabilizerEscrow.sol","file":"./interfaces/IStabilizerEscrow.sol","nameLocation":"-1:-1:-1","scope":55718,"sourceUnit":60562,"symbolAliases":[],"unitAlias":""},{"id":55717,"nodeType":"ContractDefinition","src":"684:12283:78","nodes":[{"id":55061,"nodeType":"ErrorDefinition","src":"803:20:78","nodes":[],"errorSelector":"d92e233d","name":"ZeroAddress","nameLocation":"809:11:78","parameters":{"id":55060,"nodeType":"ParameterList","parameters":[],"src":"820:2:78"}},{"id":55063,"nodeType":"ErrorDefinition","src":"828:19:78","nodes":[],"errorSelector":"1f2a2005","name":"ZeroAmount","nameLocation":"834:10:78","parameters":{"id":55062,"nodeType":"ParameterList","parameters":[],"src":"844:2:78"}},{"id":55071,"nodeType":"ErrorDefinition","src":"852:101:78","nodes":[],"errorSelector":"015643f7","name":"InsufficientEscrowAmount","nameLocation":"858:24:78","parameters":{"id":55070,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55065,"mutability":"mutable","name":"currentBalance","nameLocation":"891:14:78","nodeType":"VariableDeclaration","scope":55071,"src":"883:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55064,"name":"uint256","nodeType":"ElementaryTypeName","src":"883:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":55067,"mutability":"mutable","name":"depositAmount","nameLocation":"915:13:78","nodeType":"VariableDeclaration","scope":55071,"src":"907:21:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55066,"name":"uint256","nodeType":"ElementaryTypeName","src":"907:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":55069,"mutability":"mutable","name":"minimumAmount","nameLocation":"938:13:78","nodeType":"VariableDeclaration","scope":55071,"src":"930:21:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55068,"name":"uint256","nodeType":"ElementaryTypeName","src":"930:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"882:70:78"}},{"id":55073,"nodeType":"ErrorDefinition","src":"958:33:78","nodes":[],"errorSelector":"ec29a2a2","name":"WithdrawalWouldLeaveDust","nameLocation":"964:24:78","parameters":{"id":55072,"nodeType":"ParameterList","parameters":[],"src":"988:2:78"}},{"id":55075,"nodeType":"ErrorDefinition","src":"996:28:78","nodes":[],"errorSelector":"c338feb6","name":"BalanceUpdateFailed","nameLocation":"1002:19:78","parameters":{"id":55074,"nodeType":"ParameterList","parameters":[],"src":"1021:2:78"}},{"id":55077,"nodeType":"ErrorDefinition","src":"1029:20:78","nodes":[],"errorSelector":"4088c61c","name":"NotNFTOwner","nameLocation":"1035:11:78","parameters":{"id":55076,"nodeType":"ParameterList","parameters":[],"src":"1046:2:78"}},{"id":55079,"nodeType":"ErrorDefinition","src":"1140:29:78","nodes":[],"errorSelector":"4a76da80","name":"InitialDepositFailed","nameLocation":"1146:20:78","parameters":{"id":55078,"nodeType":"ParameterList","parameters":[],"src":"1166:2:78"}},{"id":55081,"nodeType":"ErrorDefinition","src":"1254:22:78","nodes":[],"errorSelector":"79cacff1","name":"DepositFailed","nameLocation":"1260:13:78","parameters":{"id":55080,"nodeType":"ParameterList","parameters":[],"src":"1273:2:78"}},{"id":55083,"nodeType":"ErrorDefinition","src":"1281:23:78","nodes":[],"errorSelector":"90b8ec18","name":"TransferFailed","nameLocation":"1287:14:78","parameters":{"id":55082,"nodeType":"ParameterList","parameters":[],"src":"1301:2:78"}},{"id":55089,"nodeType":"EventDefinition","src":"1332:55:78","nodes":[],"anonymous":false,"eventSelector":"149e2ad4c3719ec0acdfb19acc4b31eaa110fd8e4c4f78512870123d9839fb0d","name":"BalanceUpdated","nameLocation":"1338:14:78","parameters":{"id":55088,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55085,"indexed":false,"mutability":"mutable","name":"delta","nameLocation":"1360:5:78","nodeType":"VariableDeclaration","scope":55089,"src":"1353:12:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":55084,"name":"int256","nodeType":"ElementaryTypeName","src":"1353:6:78","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"},{"constant":false,"id":55087,"indexed":false,"mutability":"mutable","name":"newBalance","nameLocation":"1375:10:78","nodeType":"VariableDeclaration","scope":55089,"src":"1367:18:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55086,"name":"uint256","nodeType":"ElementaryTypeName","src":"1367:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1352:34:78"}},{"id":55095,"nodeType":"EventDefinition","src":"1392:65:78","nodes":[],"anonymous":false,"eventSelector":"9bdedcc968f2c0682145c20289dfbb3081a39684571116ab45eabfef512e9473","name":"ExcessWithdrawn","nameLocation":"1398:15:78","parameters":{"id":55094,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55091,"indexed":true,"mutability":"mutable","name":"recipient","nameLocation":"1430:9:78","nodeType":"VariableDeclaration","scope":55095,"src":"1414:25:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55090,"name":"address","nodeType":"ElementaryTypeName","src":"1414:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":55093,"indexed":false,"mutability":"mutable","name":"amount","nameLocation":"1449:6:78","nodeType":"VariableDeclaration","scope":55095,"src":"1441:14:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55092,"name":"uint256","nodeType":"ElementaryTypeName","src":"1441:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"1413:43:78"}},{"id":55098,"nodeType":"VariableDeclaration","src":"1494:57:78","nodes":[],"constant":true,"functionSelector":"fbae0ade","mutability":"constant","name":"MINIMUM_ESCROW_AMOUNT","nameLocation":"1518:21:78","scope":55717,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55096,"name":"uint256","nodeType":"ElementaryTypeName","src":"1494:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"302e31","id":55097,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1542:9:78","subdenomination":"ether","typeDescriptions":{"typeIdentifier":"t_rational_100000000000000000_by_1","typeString":"int_const 100000000000000000"},"value":"0.1"},"visibility":"public"},{"id":55100,"nodeType":"VariableDeclaration","src":"1557:36:78","nodes":[],"baseFunctions":[60519],"constant":false,"functionSelector":"bec070d6","mutability":"mutable","name":"stabilizerNFTContract","nameLocation":"1572:21:78","scope":55717,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55099,"name":"address","nodeType":"ElementaryTypeName","src":"1557:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":55102,"nodeType":"VariableDeclaration","src":"1642:22:78","nodes":[],"constant":false,"functionSelector":"17d70f7c","mutability":"mutable","name":"tokenId","nameLocation":"1657:7:78","scope":55717,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55101,"name":"uint256","nodeType":"ElementaryTypeName","src":"1642:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":55104,"nodeType":"VariableDeclaration","src":"1809:20:78","nodes":[],"baseFunctions":[60529],"constant":false,"functionSelector":"c1fe3e48","mutability":"mutable","name":"stETH","nameLocation":"1824:5:78","scope":55717,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55103,"name":"address","nodeType":"ElementaryTypeName","src":"1809:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":55106,"nodeType":"VariableDeclaration","src":"1892:19:78","nodes":[],"baseFunctions":[60534],"constant":false,"functionSelector":"23509a2d","mutability":"mutable","name":"lido","nameLocation":"1907:4:78","scope":55717,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55105,"name":"address","nodeType":"ElementaryTypeName","src":"1892:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":55109,"nodeType":"VariableDeclaration","src":"2361:38:78","nodes":[],"constant":false,"documentation":{"id":55107,"nodeType":"StructuredDocumentation","src":"1981:375:78","text":" @dev This balance tracks the principal amount of unallocated stETH. It intentionally does not\n      account for stETH rebasing (yield) to keep the logic simple, as this escrow's balance\n      is not used for critical system-wide ratio calculations. The accrued yield can be\n      claimed by the NFT owner via `withdrawExcessStEthBalance`."},"functionSelector":"16f637ff","mutability":"mutable","name":"unallocatedStETHBalance","nameLocation":"2376:23:78","scope":55717,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55108,"name":"uint256","nodeType":"ElementaryTypeName","src":"2361:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":55122,"nodeType":"ModifierDefinition","src":"2475:135:78","nodes":[],"body":{"id":55121,"nodeType":"Block","src":"2504:106:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55114,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":55111,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"2518:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55112,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2522:6:78","memberName":"sender","nodeType":"MemberAccess","src":"2518:10:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":55113,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55100,"src":"2532:21:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"2518:35:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55119,"nodeType":"IfStatement","src":"2514:78:78","trueBody":{"expression":{"arguments":[{"hexValue":"43616c6c6572206973206e6f742053746162696c697a65724e4654","id":55116,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2562:29:78","typeDescriptions":{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""},"value":"Caller is not StabilizerNFT"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_11c6ad4836ca3af14d2bc7f2a2ea2184915f6b2542b2a7f77f00ad05343d9d37","typeString":"literal_string \"Caller is not StabilizerNFT\""}],"id":55115,"name":"revert","nodeType":"Identifier","overloadedDeclarations":[-19,-19],"referencedDeclaration":-19,"src":"2555:6:78","typeDescriptions":{"typeIdentifier":"t_function_revert_pure$_t_string_memory_ptr_$returns$__$","typeString":"function (string memory) pure"}},"id":55117,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2555:37:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55118,"nodeType":"ExpressionStatement","src":"2555:37:78"}},{"id":55120,"nodeType":"PlaceholderStatement","src":"2602:1:78"}]},"name":"onlyStabilizerNFT","nameLocation":"2484:17:78","parameters":{"id":55110,"nodeType":"ParameterList","parameters":[],"src":"2501:2:78"},"virtual":false,"visibility":"internal"},{"id":55130,"nodeType":"FunctionDefinition","src":"2669:97:78","nodes":[],"body":{"id":55129,"nodeType":"Block","src":"2683:83:78","nodes":[],"statements":[{"expression":{"arguments":[],"expression":{"argumentTypes":[],"id":55126,"name":"_disableInitializers","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":39677,"src":"2693:20:78","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$__$returns$__$","typeString":"function ()"}},"id":55127,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2693:22:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55128,"nodeType":"ExpressionStatement","src":"2693:22:78"}]},"documentation":{"id":55123,"nodeType":"StructuredDocumentation","src":"2616:48:78","text":"@custom:oz-upgrades-unsafe-allow constructor"},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":55124,"nodeType":"ParameterList","parameters":[],"src":"2680:2:78"},"returnParameters":{"id":55125,"nodeType":"ParameterList","parameters":[],"src":"2683:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":55186,"nodeType":"FunctionDefinition","src":"3251:1308:78","nodes":[],"body":{"id":55185,"nodeType":"Block","src":"3524:1035:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":55163,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":55156,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55149,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55144,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55133,"src":"3599:14:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":55147,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3625:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55146,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3617:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55145,"name":"address","nodeType":"ElementaryTypeName","src":"3617:7:78","typeDescriptions":{}}},"id":55148,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3617:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3599:28:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55155,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55150,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55137,"src":"3631:6:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":55153,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3649:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55152,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3641:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55151,"name":"address","nodeType":"ElementaryTypeName","src":"3641:7:78","typeDescriptions":{}}},"id":55154,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3641:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3631:20:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3599:52:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55162,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55157,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55139,"src":"3655:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":55160,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3672:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55159,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3664:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55158,"name":"address","nodeType":"ElementaryTypeName","src":"3664:7:78","typeDescriptions":{}}},"id":55161,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3664:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3655:19:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3599:75:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55168,"nodeType":"IfStatement","src":"3595:126:78","trueBody":{"id":55167,"nodeType":"Block","src":"3676:45:78","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55164,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55061,"src":"3697:11:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55165,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3697:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55166,"nodeType":"RevertStatement","src":"3690:20:78"}]}},{"expression":{"id":55171,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55169,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55100,"src":"3900:21:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":55170,"name":"_stabilizerNFT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55133,"src":"3924:14:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3900:38:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":55172,"nodeType":"ExpressionStatement","src":"3900:38:78"},{"expression":{"id":55175,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55173,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55102,"src":"3948:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":55174,"name":"_tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55135,"src":"3958:8:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3948:18:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55176,"nodeType":"ExpressionStatement","src":"3948:18:78"},{"expression":{"id":55179,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55177,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"4033:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":55178,"name":"_stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55137,"src":"4041:6:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4033:14:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":55180,"nodeType":"ExpressionStatement","src":"4033:14:78"},{"expression":{"id":55183,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55181,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55106,"src":"4057:4:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":55182,"name":"_lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55139,"src":"4064:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"4057:12:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":55184,"nodeType":"ExpressionStatement","src":"4057:12:78"}]},"documentation":{"id":55131,"nodeType":"StructuredDocumentation","src":"2799:447:78","text":" @notice Initializes the escrow contract state.\n @param _stabilizerNFT The address of the controlling StabilizerNFT contract.\n @param _tokenId The ID of the Stabilizer NFT this escrow is associated with.\n @param _stETH The address of the stETH token.\n @param _lido The address of the Lido staking pool.\n @dev Sets immutable addresses and the token ID. Meant to be called once after clone deployment."},"functionSelector":"358394d8","implemented":true,"kind":"function","modifiers":[{"id":55142,"kind":"modifierInvocation","modifierName":{"id":55141,"name":"initializer","nameLocations":["3512:11:78"],"nodeType":"IdentifierPath","referencedDeclaration":39563,"src":"3512:11:78"},"nodeType":"ModifierInvocation","src":"3512:11:78"}],"name":"initialize","nameLocation":"3260:10:78","parameters":{"id":55140,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55133,"mutability":"mutable","name":"_stabilizerNFT","nameLocation":"3320:14:78","nodeType":"VariableDeclaration","scope":55186,"src":"3312:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55132,"name":"address","nodeType":"ElementaryTypeName","src":"3312:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":55135,"mutability":"mutable","name":"_tokenId","nameLocation":"3352:8:78","nodeType":"VariableDeclaration","scope":55186,"src":"3344:16:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55134,"name":"uint256","nodeType":"ElementaryTypeName","src":"3344:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":55137,"mutability":"mutable","name":"_stETH","nameLocation":"3467:6:78","nodeType":"VariableDeclaration","scope":55186,"src":"3459:14:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55136,"name":"address","nodeType":"ElementaryTypeName","src":"3459:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":55139,"mutability":"mutable","name":"_lido","nameLocation":"3491:5:78","nodeType":"VariableDeclaration","scope":55186,"src":"3483:13:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55138,"name":"address","nodeType":"ElementaryTypeName","src":"3483:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"3270:232:78"},"returnParameters":{"id":55143,"nodeType":"ParameterList","parameters":[],"src":"3524:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":55293,"nodeType":"FunctionDefinition","src":"4772:1213:78","nodes":[],"body":{"id":55292,"nodeType":"Block","src":"4826:1159:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55195,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":55192,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"4840:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55193,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4844:5:78","memberName":"value","nodeType":"MemberAccess","src":"4840:9:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":55194,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4853:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4840:14:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55199,"nodeType":"IfStatement","src":"4836:39:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55196,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55063,"src":"4863:10:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55197,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4863:12:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55198,"nodeType":"RevertStatement","src":"4856:19:78"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55205,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55203,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55200,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"4987:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"expression":{"id":55201,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5013:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55202,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5017:5:78","memberName":"value","nodeType":"MemberAccess","src":"5013:9:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4987:35:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":55204,"name":"MINIMUM_ESCROW_AMOUNT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55098,"src":"5025:21:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4987:59:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55214,"nodeType":"IfStatement","src":"4983:180:78","trueBody":{"id":55213,"nodeType":"Block","src":"5048:115:78","statements":[{"errorCall":{"arguments":[{"id":55207,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"5094:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"expression":{"id":55208,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5119:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55209,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5123:5:78","memberName":"value","nodeType":"MemberAccess","src":"5119:9:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":55210,"name":"MINIMUM_ESCROW_AMOUNT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55098,"src":"5130:21:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55206,"name":"InsufficientEscrowAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55071,"src":"5069:24:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (uint256,uint256,uint256) pure returns (error)"}},"id":55211,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5069:83:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55212,"nodeType":"RevertStatement","src":"5062:90:78"}]}},{"assignments":[55216],"declarations":[{"constant":false,"id":55216,"mutability":"mutable","name":"balanceBefore","nameLocation":"5219:13:78","nodeType":"VariableDeclaration","scope":55292,"src":"5211:21:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55215,"name":"uint256","nodeType":"ElementaryTypeName","src":"5211:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55226,"initialValue":{"arguments":[{"arguments":[{"id":55223,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5267:4:78","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}],"id":55222,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5259:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55221,"name":"address","nodeType":"ElementaryTypeName","src":"5259:7:78","typeDescriptions":{}}},"id":55224,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5259:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":55218,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"5242:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55217,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"5235:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55219,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5235:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55220,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5249:9:78","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"5235:23:78","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":55225,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5235:38:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5211:62:78"},{"assignments":[55228],"declarations":[{"constant":false,"id":55228,"mutability":"mutable","name":"stEthReceived","nameLocation":"5359:13:78","nodeType":"VariableDeclaration","scope":55292,"src":"5351:21:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55227,"name":"uint256","nodeType":"ElementaryTypeName","src":"5351:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55229,"nodeType":"VariableDeclarationStatement","src":"5351:21:78"},{"clauses":[{"block":{"id":55260,"nodeType":"Block","src":"5435:213:78","statements":[{"assignments":[55243],"declarations":[{"constant":false,"id":55243,"mutability":"mutable","name":"balanceAfter","nameLocation":"5526:12:78","nodeType":"VariableDeclaration","scope":55260,"src":"5518:20:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55242,"name":"uint256","nodeType":"ElementaryTypeName","src":"5518:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55253,"initialValue":{"arguments":[{"arguments":[{"id":55250,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"5573:4:78","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}],"id":55249,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5565:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55248,"name":"address","nodeType":"ElementaryTypeName","src":"5565:7:78","typeDescriptions":{}}},"id":55251,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5565:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":55245,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"5548:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55244,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"5541:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55246,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5541:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55247,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5555:9:78","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"5541:23:78","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":55252,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5541:38:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5518:61:78"},{"expression":{"id":55258,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55254,"name":"stEthReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55228,"src":"5593:13:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55257,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55255,"name":"balanceAfter","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55243,"src":"5609:12:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":55256,"name":"balanceBefore","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55216,"src":"5624:13:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5609:28:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5593:44:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55259,"nodeType":"ExpressionStatement","src":"5593:44:78"}]},"errorName":"","id":55261,"nodeType":"TryCatchClause","src":"5435:213:78"},{"block":{"id":55265,"nodeType":"Block","src":"5655:47:78","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55262,"name":"DepositFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55081,"src":"5676:13:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55263,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5676:15:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55264,"nodeType":"RevertStatement","src":"5669:22:78"}]},"errorName":"","id":55266,"nodeType":"TryCatchClause","src":"5649:53:78"}],"externalCall":{"arguments":[{"arguments":[{"hexValue":"30","id":55239,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5431:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55238,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5423:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55237,"name":"address","nodeType":"ElementaryTypeName","src":"5423:7:78","typeDescriptions":{}}},"id":55240,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5423:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":55231,"name":"lido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55106,"src":"5392:4:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55230,"name":"ILido","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":60170,"src":"5386:5:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_ILido_$60170_$","typeString":"type(contract ILido)"}},"id":55232,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5386:11:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_ILido_$60170","typeString":"contract ILido"}},"id":55233,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5398:6:78","memberName":"submit","nodeType":"MemberAccess","referencedDeclaration":60169,"src":"5386:18:78","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$","typeString":"function (address) payable external returns (uint256)"}},"id":55236,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"names":["value"],"nodeType":"FunctionCallOptions","options":[{"expression":{"id":55234,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5412:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55235,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5416:5:78","memberName":"value","nodeType":"MemberAccess","src":"5412:9:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"src":"5386:36:78","typeDescriptions":{"typeIdentifier":"t_function_external_payable$_t_address_$returns$_t_uint256_$value","typeString":"function (address) payable external returns (uint256)"}},"id":55241,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5386:48:78","tryCall":true,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55267,"nodeType":"TryStatement","src":"5382:320:78"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55270,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55268,"name":"stEthReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55228,"src":"5715:13:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":55269,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5732:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"5715:18:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55274,"nodeType":"IfStatement","src":"5711:46:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55271,"name":"DepositFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55081,"src":"5742:13:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55272,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5742:15:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55273,"nodeType":"RevertStatement","src":"5735:22:78"}},{"expression":{"id":55277,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55275,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"5801:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":55276,"name":"stEthReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55228,"src":"5828:13:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5801:40:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55278,"nodeType":"ExpressionStatement","src":"5801:40:78"},{"eventCall":{"arguments":[{"expression":{"id":55280,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5873:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55281,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5877:5:78","memberName":"value","nodeType":"MemberAccess","src":"5873:9:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55279,"name":"DepositReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":60502,"src":"5857:15:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$returns$__$","typeString":"function (uint256)"}},"id":55282,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5857:26:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55283,"nodeType":"EmitStatement","src":"5852:31:78"},{"eventCall":{"arguments":[{"arguments":[{"id":55287,"name":"stEthReceived","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55228,"src":"5938:13:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55286,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5931:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":55285,"name":"int256","nodeType":"ElementaryTypeName","src":"5931:6:78","typeDescriptions":{}}},"id":55288,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5931:21:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":55289,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"5954:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55284,"name":"BalanceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55089,"src":"5916:14:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_int256_$_t_uint256_$returns$__$","typeString":"function (int256,uint256)"}},"id":55290,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5916:62:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55291,"nodeType":"EmitStatement","src":"5911:67:78"}]},"baseFunctions":[60537],"documentation":{"id":55187,"nodeType":"StructuredDocumentation","src":"4600:167:78","text":" @notice Receives additional ETH deposits forwarded by StabilizerNFT.\n @dev Stakes the received ETH into stETH. Callable only by StabilizerNFT."},"functionSelector":"d0e30db0","implemented":true,"kind":"function","modifiers":[{"id":55190,"kind":"modifierInvocation","modifierName":{"id":55189,"name":"onlyStabilizerNFT","nameLocations":["4808:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":55122,"src":"4808:17:78"},"nodeType":"ModifierInvocation","src":"4808:17:78"}],"name":"deposit","nameLocation":"4781:7:78","parameters":{"id":55188,"nodeType":"ParameterList","parameters":[],"src":"4788:2:78"},"returnParameters":{"id":55191,"nodeType":"ParameterList","parameters":[],"src":"4826:0:78"},"scope":55717,"stateMutability":"payable","virtual":false,"visibility":"external"},{"id":55351,"nodeType":"FunctionDefinition","src":"6289:571:78","nodes":[],"body":{"id":55350,"nodeType":"Block","src":"6387:473:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55305,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55303,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55296,"src":"6401:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":55304,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6411:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"6401:11:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55309,"nodeType":"IfStatement","src":"6397:36:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55306,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55063,"src":"6421:10:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55307,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6421:12:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55308,"nodeType":"RevertStatement","src":"6414:19:78"}},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55315,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55310,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55298,"src":"6447:18:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":55313,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6477:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55312,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6469:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55311,"name":"address","nodeType":"ElementaryTypeName","src":"6469:7:78","typeDescriptions":{}}},"id":55314,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6469:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"6447:32:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55319,"nodeType":"IfStatement","src":"6443:58:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55316,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55061,"src":"6488:11:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55317,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6488:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55318,"nodeType":"RevertStatement","src":"6481:20:78"}},{"assignments":[55321],"declarations":[{"constant":false,"id":55321,"mutability":"mutable","name":"currentBalance","nameLocation":"6520:14:78","nodeType":"VariableDeclaration","scope":55350,"src":"6512:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55320,"name":"uint256","nodeType":"ElementaryTypeName","src":"6512:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55323,"initialValue":{"id":55322,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"6537:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6512:48:78"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55326,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55324,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55296,"src":"6574:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":55325,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55321,"src":"6583:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6574:23:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55336,"nodeType":"IfStatement","src":"6570:99:78","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":55330,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"6639:4:78","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}],"id":55329,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6631:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55328,"name":"address","nodeType":"ElementaryTypeName","src":"6631:7:78","typeDescriptions":{}}},"id":55331,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6631:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55332,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55321,"src":"6646:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":55333,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55296,"src":"6662:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55327,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"6606:24:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":55334,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6606:63:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55335,"nodeType":"RevertStatement","src":"6599:70:78"}},{"expression":{"arguments":[{"id":55341,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55298,"src":"6751:18:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55342,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55296,"src":"6771:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55338,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"6736:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55337,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"6729:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55339,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6729:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55340,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6743:7:78","memberName":"approve","nodeType":"MemberAccess","referencedDeclaration":43792,"src":"6729:21:78","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":55343,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6729:49:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55344,"nodeType":"ExpressionStatement","src":"6729:49:78"},{"eventCall":{"arguments":[{"id":55346,"name":"positionNFTAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55298,"src":"6812:18:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55347,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55296,"src":"6832:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55345,"name":"AllocationApproved","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":60508,"src":"6793:18:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":55348,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6793:46:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55349,"nodeType":"EmitStatement","src":"6788:51:78"}]},"baseFunctions":[60544],"documentation":{"id":55294,"nodeType":"StructuredDocumentation","src":"5991:293:78","text":" @notice Approves the PositionNFT contract to spend stETH for allocation.\n @param amount The amount of stETH to approve.\n @param positionNFTAddress The address of the PositionNFT contract.\n @dev Callable only by StabilizerNFT. Checks for sufficient balance."},"functionSelector":"4f68ae75","implemented":true,"kind":"function","modifiers":[{"id":55301,"kind":"modifierInvocation","modifierName":{"id":55300,"name":"onlyStabilizerNFT","nameLocations":["6369:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":55122,"src":"6369:17:78"},"nodeType":"ModifierInvocation","src":"6369:17:78"}],"name":"approveAllocation","nameLocation":"6298:17:78","parameters":{"id":55299,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55296,"mutability":"mutable","name":"amount","nameLocation":"6324:6:78","nodeType":"VariableDeclaration","scope":55351,"src":"6316:14:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55295,"name":"uint256","nodeType":"ElementaryTypeName","src":"6316:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":55298,"mutability":"mutable","name":"positionNFTAddress","nameLocation":"6340:18:78","nodeType":"VariableDeclaration","scope":55351,"src":"6332:26:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55297,"name":"address","nodeType":"ElementaryTypeName","src":"6332:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"6315:44:78"},"returnParameters":{"id":55302,"nodeType":"ParameterList","parameters":[],"src":"6387:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":55455,"nodeType":"FunctionDefinition","src":"7240:1263:78","nodes":[],"body":{"id":55454,"nodeType":"Block","src":"7312:1191:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55361,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55359,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"7326:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":55360,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7336:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7326:11:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55365,"nodeType":"IfStatement","src":"7322:36:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55362,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55063,"src":"7346:10:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55363,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7346:12:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55364,"nodeType":"RevertStatement","src":"7339:19:78"}},{"assignments":[55367],"declarations":[{"constant":false,"id":55367,"mutability":"mutable","name":"currentBalance","nameLocation":"7376:14:78","nodeType":"VariableDeclaration","scope":55454,"src":"7368:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55366,"name":"uint256","nodeType":"ElementaryTypeName","src":"7368:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55369,"initialValue":{"id":55368,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"7393:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7368:48:78"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55372,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55370,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"7430:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":55371,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55367,"src":"7439:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7430:23:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55382,"nodeType":"IfStatement","src":"7426:99:78","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":55376,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"7495:4:78","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}],"id":55375,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7487:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55374,"name":"address","nodeType":"ElementaryTypeName","src":"7487:7:78","typeDescriptions":{}}},"id":55377,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7487:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55378,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55367,"src":"7502:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":55379,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"7518:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55373,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"7462:24:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":55380,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7462:63:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55381,"nodeType":"RevertStatement","src":"7455:70:78"}},{"assignments":[55384],"declarations":[{"constant":false,"id":55384,"mutability":"mutable","name":"remainingBalance","nameLocation":"7602:16:78","nodeType":"VariableDeclaration","scope":55454,"src":"7594:24:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55383,"name":"uint256","nodeType":"ElementaryTypeName","src":"7594:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55388,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55387,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55385,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55367,"src":"7621:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":55386,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"7638:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7621:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7594:50:78"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":55395,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55391,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55389,"name":"remainingBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55384,"src":"7658:16:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":55390,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7677:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"7658:20:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55394,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55392,"name":"remainingBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55384,"src":"7682:16:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":55393,"name":"MINIMUM_ESCROW_AMOUNT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55098,"src":"7701:21:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7682:40:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"7658:64:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55400,"nodeType":"IfStatement","src":"7654:128:78","trueBody":{"id":55399,"nodeType":"Block","src":"7724:58:78","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55396,"name":"WithdrawalWouldLeaveDust","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55073,"src":"7745:24:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55397,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7745:26:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55398,"nodeType":"RevertStatement","src":"7738:33:78"}]}},{"assignments":[55402],"declarations":[{"constant":false,"id":55402,"mutability":"mutable","name":"currentOwner","nameLocation":"7892:12:78","nodeType":"VariableDeclaration","scope":55454,"src":"7884:20:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55401,"name":"address","nodeType":"ElementaryTypeName","src":"7884:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"id":55409,"initialValue":{"arguments":[{"id":55407,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55102,"src":"7946:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55404,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55100,"src":"7915:21:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55403,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"7907:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":55405,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7907:30:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":55406,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7938:7:78","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"7907:38:78","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":55408,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7907:47:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"VariableDeclarationStatement","src":"7884:70:78"},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55415,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55410,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55402,"src":"7990:12:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":55413,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"8014:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55412,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"8006:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55411,"name":"address","nodeType":"ElementaryTypeName","src":"8006:7:78","typeDescriptions":{}}},"id":55414,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8006:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"7990:26:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55419,"nodeType":"IfStatement","src":"7986:52:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55416,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55061,"src":"8025:11:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55417,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8025:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55418,"nodeType":"RevertStatement","src":"8018:20:78"}},{"assignments":[55421],"declarations":[{"constant":false,"id":55421,"mutability":"mutable","name":"success","nameLocation":"8138:7:78","nodeType":"VariableDeclaration","scope":55454,"src":"8133:12:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":55420,"name":"bool","nodeType":"ElementaryTypeName","src":"8133:4:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":55429,"initialValue":{"arguments":[{"id":55426,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55402,"src":"8171:12:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55427,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"8185:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55423,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"8155:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55422,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"8148:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55424,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8148:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55425,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8162:8:78","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":43772,"src":"8148:22:78","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":55428,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8148:44:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"8133:59:78"},{"condition":{"id":55431,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"8206:8:78","subExpression":{"id":55430,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55421,"src":"8207:7:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55435,"nodeType":"IfStatement","src":"8202:37:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55432,"name":"TransferFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55083,"src":"8223:14:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55433,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8223:16:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55434,"nodeType":"RevertStatement","src":"8216:23:78"}},{"expression":{"id":55438,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55436,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"8250:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":55437,"name":"remainingBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55384,"src":"8276:16:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"8250:42:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55439,"nodeType":"ExpressionStatement","src":"8250:42:78"},{"eventCall":{"arguments":[{"id":55441,"name":"currentOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55402,"src":"8404:12:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55442,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"8418:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55440,"name":"WithdrawalCompleted","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":60514,"src":"8384:19:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":55443,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8384:41:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55444,"nodeType":"EmitStatement","src":"8379:46:78"},{"eventCall":{"arguments":[{"id":55450,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"8455:15:78","subExpression":{"arguments":[{"id":55448,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55354,"src":"8463:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55447,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"8456:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":55446,"name":"int256","nodeType":"ElementaryTypeName","src":"8456:6:78","typeDescriptions":{}}},"id":55449,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8456:14:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":55451,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"8472:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55445,"name":"BalanceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55089,"src":"8440:14:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_int256_$_t_uint256_$returns$__$","typeString":"function (int256,uint256)"}},"id":55452,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8440:56:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55453,"nodeType":"EmitStatement","src":"8435:61:78"}]},"baseFunctions":[60549],"documentation":{"id":55352,"nodeType":"StructuredDocumentation","src":"6952:283:78","text":" @notice Withdraws unallocated stETH to the current owner of the associated Stabilizer NFT.\n @param amount The amount of stETH to withdraw.\n @dev Callable only by StabilizerNFT. Uses stored `tokenId` to fetch current owner. Checks against total balance."},"functionSelector":"a9015400","implemented":true,"kind":"function","modifiers":[{"id":55357,"kind":"modifierInvocation","modifierName":{"id":55356,"name":"onlyStabilizerNFT","nameLocations":["7294:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":55122,"src":"7294:17:78"},"nodeType":"ModifierInvocation","src":"7294:17:78"}],"name":"withdrawUnallocated","nameLocation":"7249:19:78","parameters":{"id":55355,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55354,"mutability":"mutable","name":"amount","nameLocation":"7277:6:78","nodeType":"VariableDeclaration","scope":55455,"src":"7269:14:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55353,"name":"uint256","nodeType":"ElementaryTypeName","src":"7269:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7268:16:78"},"returnParameters":{"id":55358,"nodeType":"ParameterList","parameters":[],"src":"7312:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":55465,"nodeType":"FunctionDefinition","src":"8789:116:78","nodes":[],"body":{"id":55464,"nodeType":"Block","src":"8858:47:78","nodes":[],"statements":[{"expression":{"id":55462,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"8875:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":55461,"id":55463,"nodeType":"Return","src":"8868:30:78"}]},"baseFunctions":[60555],"documentation":{"id":55456,"nodeType":"StructuredDocumentation","src":"8540:244:78","text":" @notice Returns the current stETH balance of this contract.\n @dev Renamed from the previous logic which subtracted allocated amount. Now just returns total balance.\n @return The amount of stETH held by the escrow."},"functionSelector":"ec60b9ab","implemented":true,"kind":"function","modifiers":[],"name":"unallocatedStETH","nameLocation":"8798:16:78","overrides":{"id":55458,"nodeType":"OverrideSpecifier","overrides":[],"src":"8831:8:78"},"parameters":{"id":55457,"nodeType":"ParameterList","parameters":[],"src":"8814:2:78"},"returnParameters":{"id":55461,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55460,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":55465,"src":"8849:7:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55459,"name":"uint256","nodeType":"ElementaryTypeName","src":"8849:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8848:9:78"},"scope":55717,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":55526,"nodeType":"FunctionDefinition","src":"9243:536:78","nodes":[],"body":{"id":55525,"nodeType":"Block","src":"9307:472:78","nodes":[],"statements":[{"assignments":[55474],"declarations":[{"constant":false,"id":55474,"mutability":"mutable","name":"oldBalance","nameLocation":"9325:10:78","nodeType":"VariableDeclaration","scope":55525,"src":"9317:18:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55473,"name":"uint256","nodeType":"ElementaryTypeName","src":"9317:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55476,"initialValue":{"id":55475,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"9338:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9317:44:78"},{"assignments":[55478],"declarations":[{"constant":false,"id":55478,"mutability":"mutable","name":"newBalance","nameLocation":"9379:10:78","nodeType":"VariableDeclaration","scope":55525,"src":"9371:18:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55477,"name":"uint256","nodeType":"ElementaryTypeName","src":"9371:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55479,"nodeType":"VariableDeclarationStatement","src":"9371:18:78"},{"condition":{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":55482,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55480,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55468,"src":"9403:5:78","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"hexValue":"30","id":55481,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9411:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"9403:9:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":55514,"nodeType":"Block","src":"9485:194:78","statements":[{"assignments":[55494],"declarations":[{"constant":false,"id":55494,"mutability":"mutable","name":"amountToRemove","nameLocation":"9507:14:78","nodeType":"VariableDeclaration","scope":55514,"src":"9499:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55493,"name":"uint256","nodeType":"ElementaryTypeName","src":"9499:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55500,"initialValue":{"arguments":[{"id":55498,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"9532:6:78","subExpression":{"id":55497,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55468,"src":"9533:5:78","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":55496,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9524:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":55495,"name":"uint256","nodeType":"ElementaryTypeName","src":"9524:7:78","typeDescriptions":{}}},"id":55499,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9524:15:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9499:40:78"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55503,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55501,"name":"amountToRemove","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55494,"src":"9557:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":55502,"name":"oldBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55474,"src":"9574:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9557:27:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55507,"nodeType":"IfStatement","src":"9553:61:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55504,"name":"BalanceUpdateFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55075,"src":"9593:19:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55505,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9593:21:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55506,"nodeType":"RevertStatement","src":"9586:28:78"}},{"expression":{"id":55512,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55508,"name":"newBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55478,"src":"9628:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55511,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55509,"name":"oldBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55474,"src":"9641:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":55510,"name":"amountToRemove","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55494,"src":"9654:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9641:27:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9628:40:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55513,"nodeType":"ExpressionStatement","src":"9628:40:78"}]},"id":55515,"nodeType":"IfStatement","src":"9399:280:78","trueBody":{"id":55492,"nodeType":"Block","src":"9414:65:78","statements":[{"expression":{"id":55490,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55483,"name":"newBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55478,"src":"9428:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55489,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55484,"name":"oldBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55474,"src":"9441:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":55487,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55468,"src":"9462:5:78","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":55486,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9454:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":55485,"name":"uint256","nodeType":"ElementaryTypeName","src":"9454:7:78","typeDescriptions":{}}},"id":55488,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9454:14:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9441:27:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9428:40:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55491,"nodeType":"ExpressionStatement","src":"9428:40:78"}]}},{"expression":{"id":55518,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55516,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"9688:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":55517,"name":"newBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55478,"src":"9714:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9688:36:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55519,"nodeType":"ExpressionStatement","src":"9688:36:78"},{"eventCall":{"arguments":[{"id":55521,"name":"delta","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55468,"src":"9754:5:78","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":55522,"name":"newBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55478,"src":"9761:10:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55520,"name":"BalanceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55089,"src":"9739:14:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_int256_$_t_uint256_$returns$__$","typeString":"function (int256,uint256)"}},"id":55523,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9739:33:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55524,"nodeType":"EmitStatement","src":"9734:38:78"}]},"baseFunctions":[60560],"documentation":{"id":55466,"nodeType":"StructuredDocumentation","src":"8911:327:78","text":" @notice Updates the internal balance tracking.\n @param delta The change in balance (can be positive or negative).\n @dev Callable only by StabilizerNFT to report balance changes from stETH transfers\n      that happen outside this contract's direct control (e.g., direct deposit, allocation)."},"functionSelector":"171b0188","implemented":true,"kind":"function","modifiers":[{"id":55471,"kind":"modifierInvocation","modifierName":{"id":55470,"name":"onlyStabilizerNFT","nameLocations":["9289:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":55122,"src":"9289:17:78"},"nodeType":"ModifierInvocation","src":"9289:17:78"}],"name":"updateBalance","nameLocation":"9252:13:78","parameters":{"id":55469,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55468,"mutability":"mutable","name":"delta","nameLocation":"9273:5:78","nodeType":"VariableDeclaration","scope":55526,"src":"9266:12:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":55467,"name":"int256","nodeType":"ElementaryTypeName","src":"9266:6:78","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"visibility":"internal"}],"src":"9265:14:78"},"returnParameters":{"id":55472,"nodeType":"ParameterList","parameters":[],"src":"9307:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":55560,"nodeType":"FunctionDefinition","src":"10119:410:78","nodes":[],"body":{"id":55559,"nodeType":"Block","src":"10205:324:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55538,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55536,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55534,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"10219:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":55535,"name":"stETHAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55529,"src":"10245:11:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10219:37:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":55537,"name":"MINIMUM_ESCROW_AMOUNT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55098,"src":"10259:21:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10219:61:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55546,"nodeType":"IfStatement","src":"10215:184:78","trueBody":{"id":55545,"nodeType":"Block","src":"10282:117:78","statements":[{"errorCall":{"arguments":[{"id":55540,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"10328:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":55541,"name":"stETHAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55529,"src":"10353:11:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":55542,"name":"MINIMUM_ESCROW_AMOUNT","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55098,"src":"10366:21:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55539,"name":"InsufficientEscrowAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55071,"src":"10303:24:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (uint256,uint256,uint256) pure returns (error)"}},"id":55543,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10303:85:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55544,"nodeType":"RevertStatement","src":"10296:92:78"}]}},{"expression":{"id":55549,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55547,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"10409:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"+=","rightHandSide":{"id":55548,"name":"stETHAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55529,"src":"10436:11:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10409:38:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55550,"nodeType":"ExpressionStatement","src":"10409:38:78"},{"eventCall":{"arguments":[{"arguments":[{"id":55554,"name":"stETHAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55529,"src":"10484:11:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55553,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"10477:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":55552,"name":"int256","nodeType":"ElementaryTypeName","src":"10477:6:78","typeDescriptions":{}}},"id":55555,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10477:19:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":55556,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"10498:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55551,"name":"BalanceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55089,"src":"10462:14:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_int256_$_t_uint256_$returns$__$","typeString":"function (int256,uint256)"}},"id":55557,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10462:60:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55558,"nodeType":"EmitStatement","src":"10457:65:78"}]},"documentation":{"id":55527,"nodeType":"StructuredDocumentation","src":"9785:329:78","text":" @notice Checks if a new deposit meets the minimum balance requirement and updates the balance.\n @param stETHAmount The amount of stETH being deposited.\n @dev Callable only by StabilizerNFT for direct stETH deposits. Reverts if the resulting\n      balance would be below the minimum threshold."},"functionSelector":"ecb772e0","implemented":true,"kind":"function","modifiers":[{"id":55532,"kind":"modifierInvocation","modifierName":{"id":55531,"name":"onlyStabilizerNFT","nameLocations":["10187:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":55122,"src":"10187:17:78"},"nodeType":"ModifierInvocation","src":"10187:17:78"}],"name":"checkMinimumAndUpdateBalance","nameLocation":"10128:28:78","parameters":{"id":55530,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55529,"mutability":"mutable","name":"stETHAmount","nameLocation":"10165:11:78","nodeType":"VariableDeclaration","scope":55560,"src":"10157:19:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55528,"name":"uint256","nodeType":"ElementaryTypeName","src":"10157:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10156:21:78"},"returnParameters":{"id":55533,"nodeType":"ParameterList","parameters":[],"src":"10205:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":55573,"nodeType":"FunctionDefinition","src":"10535:130:78","nodes":[],"body":{"id":55572,"nodeType":"Block","src":"10594:71:78","nodes":[],"statements":[{"expression":{"arguments":[{"id":55569,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55102,"src":"10650:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55566,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55100,"src":"10619:21:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55565,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"10611:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":55567,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10611:30:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":55568,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10642:7:78","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"10611:38:78","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":55570,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10611:47:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"functionReturnParameters":55564,"id":55571,"nodeType":"Return","src":"10604:54:78"}]},"baseFunctions":[60524],"functionSelector":"7d0e9bba","implemented":true,"kind":"function","modifiers":[],"name":"stabilizerOwner","nameLocation":"10544:15:78","parameters":{"id":55561,"nodeType":"ParameterList","parameters":[],"src":"10559:2:78"},"returnParameters":{"id":55564,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55563,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":55573,"src":"10585:7:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55562,"name":"address","nodeType":"ElementaryTypeName","src":"10585:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"10584:9:78"},"scope":55717,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":55647,"nodeType":"FunctionDefinition","src":"11076:603:78","nodes":[],"body":{"id":55646,"nodeType":"Block","src":"11169:510:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55585,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55583,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55576,"src":"11183:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":55584,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11193:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"11183:11:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55589,"nodeType":"IfStatement","src":"11179:36:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55586,"name":"ZeroAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55063,"src":"11203:10:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55587,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11203:12:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55588,"nodeType":"RevertStatement","src":"11196:19:78"}},{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55595,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55590,"name":"recipient","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55578,"src":"11229:9:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":55593,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11250:1:78","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":55592,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11242:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55591,"name":"address","nodeType":"ElementaryTypeName","src":"11242:7:78","typeDescriptions":{}}},"id":55594,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11242:10:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"11229:23:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55599,"nodeType":"IfStatement","src":"11225:49:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55596,"name":"ZeroAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55061,"src":"11261:11:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55597,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11261:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55598,"nodeType":"RevertStatement","src":"11254:20:78"}},{"assignments":[55601],"declarations":[{"constant":false,"id":55601,"mutability":"mutable","name":"currentBalance","nameLocation":"11293:14:78","nodeType":"VariableDeclaration","scope":55646,"src":"11285:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55600,"name":"uint256","nodeType":"ElementaryTypeName","src":"11285:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55603,"initialValue":{"id":55602,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"11310:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11285:48:78"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55606,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55604,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55576,"src":"11347:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":55605,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55601,"src":"11356:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11347:23:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55616,"nodeType":"IfStatement","src":"11343:99:78","trueBody":{"errorCall":{"arguments":[{"arguments":[{"id":55610,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"11412:4:78","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}],"id":55609,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11404:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55608,"name":"address","nodeType":"ElementaryTypeName","src":"11404:7:78","typeDescriptions":{}}},"id":55611,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11404:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55612,"name":"currentBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55601,"src":"11419:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":55613,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55576,"src":"11435:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55607,"name":"ERC20InsufficientBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":42310,"src":"11379:24:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_address_$_t_uint256_$_t_uint256_$returns$_t_error_$","typeString":"function (address,uint256,uint256) pure returns (error)"}},"id":55614,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11379:63:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55615,"nodeType":"RevertStatement","src":"11372:70:78"}},{"assignments":[55618],"declarations":[{"constant":false,"id":55618,"mutability":"mutable","name":"success","nameLocation":"11458:7:78","nodeType":"VariableDeclaration","scope":55646,"src":"11453:12:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":55617,"name":"bool","nodeType":"ElementaryTypeName","src":"11453:4:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":55626,"initialValue":{"arguments":[{"id":55623,"name":"recipient","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55578,"src":"11491:9:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55624,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55576,"src":"11502:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55620,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"11475:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55619,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"11468:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55621,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11468:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55622,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11482:8:78","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":43772,"src":"11468:22:78","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":55625,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11468:41:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"11453:56:78"},{"condition":{"id":55628,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"11523:8:78","subExpression":{"id":55627,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55618,"src":"11524:7:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55632,"nodeType":"IfStatement","src":"11519:37:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55629,"name":"TransferFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55083,"src":"11540:14:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55630,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11540:16:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55631,"nodeType":"RevertStatement","src":"11533:23:78"}},{"expression":{"id":55635,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":55633,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"11567:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"-=","rightHandSide":{"id":55634,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55576,"src":"11594:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11567:33:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":55636,"nodeType":"ExpressionStatement","src":"11567:33:78"},{"eventCall":{"arguments":[{"id":55642,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"-","prefix":true,"src":"11631:15:78","subExpression":{"arguments":[{"id":55640,"name":"amount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55576,"src":"11639:6:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55639,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11632:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":55638,"name":"int256","nodeType":"ElementaryTypeName","src":"11632:6:78","typeDescriptions":{}}},"id":55641,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11632:14:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},{"id":55643,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"11648:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55637,"name":"BalanceUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55089,"src":"11616:14:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_int256_$_t_uint256_$returns$__$","typeString":"function (int256,uint256)"}},"id":55644,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11616:56:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55645,"nodeType":"EmitStatement","src":"11611:61:78"}]},"documentation":{"id":55574,"nodeType":"StructuredDocumentation","src":"10671:400:78","text":" @notice Withdraws stETH from this escrow and sends it to a recipient (e.g., PositionEscrow).\n @param amount The amount of stETH to withdraw.\n @param recipient The address to send the stETH to.\n @dev Callable only by StabilizerNFT. This is a single-call alternative to approve/transferFrom\n      to reduce bytecode size in the calling StabilizerNFT contract."},"functionSelector":"7d810c2a","implemented":true,"kind":"function","modifiers":[{"id":55581,"kind":"modifierInvocation","modifierName":{"id":55580,"name":"onlyStabilizerNFT","nameLocations":["11151:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":55122,"src":"11151:17:78"},"nodeType":"ModifierInvocation","src":"11151:17:78"}],"name":"withdrawForAllocation","nameLocation":"11085:21:78","parameters":{"id":55579,"nodeType":"ParameterList","parameters":[{"constant":false,"id":55576,"mutability":"mutable","name":"amount","nameLocation":"11115:6:78","nodeType":"VariableDeclaration","scope":55647,"src":"11107:14:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55575,"name":"uint256","nodeType":"ElementaryTypeName","src":"11107:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":55578,"mutability":"mutable","name":"recipient","nameLocation":"11131:9:78","nodeType":"VariableDeclaration","scope":55647,"src":"11123:17:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":55577,"name":"address","nodeType":"ElementaryTypeName","src":"11123:7:78","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"11106:35:78"},"returnParameters":{"id":55582,"nodeType":"ParameterList","parameters":[],"src":"11169:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":55716,"nodeType":"FunctionDefinition","src":"12339:626:78","nodes":[],"body":{"id":55715,"nodeType":"Block","src":"12386:579:78","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":55659,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":55651,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"12400:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55652,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12404:6:78","memberName":"sender","nodeType":"MemberAccess","src":"12400:10:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"id":55657,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55102,"src":"12453:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55654,"name":"stabilizerNFTContract","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55100,"src":"12422:21:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55653,"name":"IERC721","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":44138,"src":"12414:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC721_$44138_$","typeString":"type(contract IERC721)"}},"id":55655,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12414:30:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC721_$44138","typeString":"contract IERC721"}},"id":55656,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12445:7:78","memberName":"ownerOf","nodeType":"MemberAccess","referencedDeclaration":44071,"src":"12414:38:78","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_address_$","typeString":"function (uint256) view external returns (address)"}},"id":55658,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12414:47:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"12400:61:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55664,"nodeType":"IfStatement","src":"12396:112:78","trueBody":{"id":55663,"nodeType":"Block","src":"12463:45:78","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55660,"name":"NotNFTOwner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55077,"src":"12484:11:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55661,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12484:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55662,"nodeType":"RevertStatement","src":"12477:20:78"}]}},{"assignments":[55666],"declarations":[{"constant":false,"id":55666,"mutability":"mutable","name":"physicalBalance","nameLocation":"12526:15:78","nodeType":"VariableDeclaration","scope":55715,"src":"12518:23:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55665,"name":"uint256","nodeType":"ElementaryTypeName","src":"12518:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55676,"initialValue":{"arguments":[{"arguments":[{"id":55673,"name":"this","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-28,"src":"12576:4:78","typeDescriptions":{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_contract$_StabilizerEscrow_$55717","typeString":"contract StabilizerEscrow"}],"id":55672,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"12568:7:78","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":55671,"name":"address","nodeType":"ElementaryTypeName","src":"12568:7:78","typeDescriptions":{}}},"id":55674,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12568:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"expression":{"arguments":[{"id":55668,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"12551:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55667,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"12544:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55669,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12544:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55670,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12558:9:78","memberName":"balanceOf","nodeType":"MemberAccess","referencedDeclaration":43762,"src":"12544:23:78","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_address_$returns$_t_uint256_$","typeString":"function (address) view external returns (uint256)"}},"id":55675,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12544:38:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"12518:64:78"},{"assignments":[55678],"declarations":[{"constant":false,"id":55678,"mutability":"mutable","name":"trackedBalance","nameLocation":"12600:14:78","nodeType":"VariableDeclaration","scope":55715,"src":"12592:22:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55677,"name":"uint256","nodeType":"ElementaryTypeName","src":"12592:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55680,"initialValue":{"id":55679,"name":"unallocatedStETHBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55109,"src":"12617:23:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"12592:48:78"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55683,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55681,"name":"physicalBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55666,"src":"12655:15:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":55682,"name":"trackedBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55678,"src":"12673:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12655:32:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55714,"nodeType":"IfStatement","src":"12651:308:78","trueBody":{"id":55713,"nodeType":"Block","src":"12689:270:78","statements":[{"assignments":[55685],"declarations":[{"constant":false,"id":55685,"mutability":"mutable","name":"excessAmount","nameLocation":"12711:12:78","nodeType":"VariableDeclaration","scope":55713,"src":"12703:20:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":55684,"name":"uint256","nodeType":"ElementaryTypeName","src":"12703:7:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":55689,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":55688,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":55686,"name":"physicalBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55666,"src":"12726:15:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":55687,"name":"trackedBalance","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55678,"src":"12744:14:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12726:32:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"12703:55:78"},{"assignments":[55691],"declarations":[{"constant":false,"id":55691,"mutability":"mutable","name":"success","nameLocation":"12778:7:78","nodeType":"VariableDeclaration","scope":55713,"src":"12773:12:78","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":55690,"name":"bool","nodeType":"ElementaryTypeName","src":"12773:4:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"id":55700,"initialValue":{"arguments":[{"expression":{"id":55696,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"12811:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55697,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12815:6:78","memberName":"sender","nodeType":"MemberAccess","src":"12811:10:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55698,"name":"excessAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55685,"src":"12823:12:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":55693,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55104,"src":"12795:5:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":55692,"name":"IERC20","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":43805,"src":"12788:6:78","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IERC20_$43805_$","typeString":"type(contract IERC20)"}},"id":55694,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12788:13:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IERC20_$43805","typeString":"contract IERC20"}},"id":55695,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12802:8:78","memberName":"transfer","nodeType":"MemberAccess","referencedDeclaration":43772,"src":"12788:22:78","typeDescriptions":{"typeIdentifier":"t_function_external_nonpayable$_t_address_$_t_uint256_$returns$_t_bool_$","typeString":"function (address,uint256) external returns (bool)"}},"id":55699,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12788:48:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"VariableDeclarationStatement","src":"12773:63:78"},{"condition":{"id":55702,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"!","prefix":true,"src":"12854:8:78","subExpression":{"id":55701,"name":"success","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55691,"src":"12855:7:78","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":55706,"nodeType":"IfStatement","src":"12850:37:78","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":55703,"name":"TransferFailed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55083,"src":"12871:14:78","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":55704,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12871:16:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":55705,"nodeType":"RevertStatement","src":"12864:23:78"}},{"eventCall":{"arguments":[{"expression":{"id":55708,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"12923:3:78","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":55709,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12927:6:78","memberName":"sender","nodeType":"MemberAccess","src":"12923:10:78","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":55710,"name":"excessAmount","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55685,"src":"12935:12:78","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":55707,"name":"ExcessWithdrawn","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":55095,"src":"12907:15:78","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint256_$returns$__$","typeString":"function (address,uint256)"}},"id":55711,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12907:41:78","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":55712,"nodeType":"EmitStatement","src":"12902:46:78"}]}}]},"documentation":{"id":55648,"nodeType":"StructuredDocumentation","src":"11685:649:78","text":" @notice Allows the owner of the associated Stabilizer NFT to withdraw any stETH balance\n         that is in excess of the internally tracked `unallocatedStETHBalance`.\n @dev This function is the designated mechanism to handle discrepancies between the physical\n      stETH balance of this contract and the tracked `unallocatedStETHBalance`. Such a\n      discrepancy primarily arises from stETH rebasing (yield), which is not tracked in the\n      internal ledger for simplicity. This function allows the NFT owner to claim this yield\n      or recover any other funds sent directly to the escrow."},"functionSelector":"878a672c","implemented":true,"kind":"function","modifiers":[],"name":"withdrawExcessStEthBalance","nameLocation":"12348:26:78","parameters":{"id":55649,"nodeType":"ParameterList","parameters":[],"src":"12374:2:78"},"returnParameters":{"id":55650,"nodeType":"ParameterList","parameters":[],"src":"12386:0:78"},"scope":55717,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[{"baseName":{"id":55056,"name":"Initializable","nameLocations":["713:13:78"],"nodeType":"IdentifierPath","referencedDeclaration":39723,"src":"713:13:78"},"id":55057,"nodeType":"InheritanceSpecifier","src":"713:13:78"},{"baseName":{"id":55058,"name":"IStabilizerEscrow","nameLocations":["728:17:78"],"nodeType":"IdentifierPath","referencedDeclaration":60561,"src":"728:17:78"},"id":55059,"nodeType":"InheritanceSpecifier","src":"728:17:78"}],"canonicalName":"StabilizerEscrow","contractDependencies":[],"contractKind":"contract","documentation":{"id":55055,"nodeType":"StructuredDocumentation","src":"426:257:78","text":" @title StabilizerEscrow\n @notice A dedicated vault for a single Stabilizer NFT, holding and managing stETH collateral.\n @dev Deployed and controlled by the StabilizerNFT contract. Implements IStabilizerEscrow. Meant to be deployed as a clone."},"fullyImplemented":true,"linearizedBaseContracts":[55717,60561,42340,39723],"name":"StabilizerEscrow","nameLocation":"693:16:78","scope":55718,"usedErrors":[39472,39475,42310,42315,42320,42329,42334,42339,55061,55063,55071,55073,55075,55077,55079,55081,55083],"usedEvents":[39480,55089,55095,60502,60508,60514]}],"license":"MIT"},"id":78}