{"abi":[{"type":"function","name":"getPooledEthByShares","inputs":[{"name":"_sharesAmount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"getPooledEthByShares(uint256)":"7a28fb88"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.29+commit.ab55807c\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_sharesAmount\",\"type\":\"uint256\"}],\"name\":\"getPooledEthByShares\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/PoolSharesConversionRate.sol\":\"IStETH\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/\",\":@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/\",\":chainlink/=lib/chainlink/\",\":createx/=lib/createx/src/\",\":erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/\",\":solady/=lib/createx/lib/solady/src/\",\":uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/\",\":uniswap-v3-core/=lib/uniswap-v3-core/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/access/AccessControl.sol\":{\"keccak256\":\"0xd0e967bcd2ad6fd4231951e744b121e4cb428ce9d38e1c99350db6bb4a5207f7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://3f454d107c23bd052c0bdb26dcdbb64ea203fd01b5dabb08f185f4c096beb0c8\",\"dweb:/ipfs/QmSNAV8u7TLKWTKmoQhWbBiyTKVZVQTqi9NvnmNSvnWn2D\"]},\"lib/openzeppelin-contracts/contracts/access/IAccessControl.sol\":{\"keccak256\":\"0xc1c2a7f1563b77050dc6d507db9f4ada5d042c1f6a9ddbffdc49c77cdc0a1606\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://fd54abb96a6156d9a761f6fdad1d3004bc48d2d4fce47f40a3f91a7ae83fc3a1\",\"dweb:/ipfs/QmUrFSGkTDJ7WaZ6qPVVe3Gn5uN2viPb7x7QQ35UX4DofX\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/utils/Context.sol\":{\"keccak256\":\"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6a708e8a5bdb1011c2c381c9a5cfd8a9a956d7d0a9dc1bd8bcdaf52f76ef2f12\",\"dweb:/ipfs/Qmax9WHBnVsZP46ZxEMNRQpLQnrdE4dK8LehML1Py8FowF\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/ERC165.sol\":{\"keccak256\":\"0xddce8e17e3d3f9ed818b4f4c4478a8262aab8b11ed322f1bf5ed705bb4bd97fa\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8084aa71a4cc7d2980972412a88fe4f114869faea3fefa5436431644eb5c0287\",\"dweb:/ipfs/Qmbqfs5dRdPvHVKY8kTaeyc65NdqXRQwRK7h9s5UJEhD1p\"]},\"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol\":{\"keccak256\":\"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621\",\"dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL\"]},\"src/PoolSharesConversionRate.sol\":{\"keccak256\":\"0x09cf1f58af1b25aef737a29f03eaf34659ab4ca397481e1378e2388ee64c5d6d\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c1b33ed9a8c44266990d18486bd04452386e1e61aa1add3b0678ee6dd24ddbe6\",\"dweb:/ipfs/Qmc74EUNnbzs2FhCS6xT5r1e1E6f2nM63UbhCTcSLckWrF\"]},\"src/interfaces/IPoolSharesConversionRate.sol\":{\"keccak256\":\"0xe7ca5b72aee5158674c7cc2cb6b3f96c3a1a1ea8805a82f64262a972fa9cf141\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://f0122d44d1ba0563cfe6d4aff7766a66ac6ea36799a37fdee6a908e755b08b65\",\"dweb:/ipfs/QmZiSUCLMZdeGtKzEVyofDE4vn9rpzZm3aiJ7uS6xwBtcT\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.29+commit.ab55807c"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"_sharesAmount","type":"uint256"}],"stateMutability":"view","type":"function","name":"getPooledEthByShares","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@openzeppelin/contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/contracts/","@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/","chainlink/=lib/chainlink/","createx/=lib/createx/src/","erc4626-tests/=lib/openzeppelin-contracts-upgradeable/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts-upgradeable/lib/halmos-cheatcodes/src/","openzeppelin-contracts-upgradeable/=lib/openzeppelin-contracts-upgradeable/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/createx/lib/openzeppelin-contracts/contracts/","solady/=lib/createx/lib/solady/src/","uniswap-v2-periphery/=lib/uniswap-v2-periphery/contracts/","uniswap-v3-core/=lib/uniswap-v3-core/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/PoolSharesConversionRate.sol":"IStETH"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/access/AccessControl.sol":{"keccak256":"0xd0e967bcd2ad6fd4231951e744b121e4cb428ce9d38e1c99350db6bb4a5207f7","urls":["bzz-raw://3f454d107c23bd052c0bdb26dcdbb64ea203fd01b5dabb08f185f4c096beb0c8","dweb:/ipfs/QmSNAV8u7TLKWTKmoQhWbBiyTKVZVQTqi9NvnmNSvnWn2D"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/access/IAccessControl.sol":{"keccak256":"0xc1c2a7f1563b77050dc6d507db9f4ada5d042c1f6a9ddbffdc49c77cdc0a1606","urls":["bzz-raw://fd54abb96a6156d9a761f6fdad1d3004bc48d2d4fce47f40a3f91a7ae83fc3a1","dweb:/ipfs/QmUrFSGkTDJ7WaZ6qPVVe3Gn5uN2viPb7x7QQ35UX4DofX"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Context.sol":{"keccak256":"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2","urls":["bzz-raw://6a708e8a5bdb1011c2c381c9a5cfd8a9a956d7d0a9dc1bd8bcdaf52f76ef2f12","dweb:/ipfs/Qmax9WHBnVsZP46ZxEMNRQpLQnrdE4dK8LehML1Py8FowF"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/ERC165.sol":{"keccak256":"0xddce8e17e3d3f9ed818b4f4c4478a8262aab8b11ed322f1bf5ed705bb4bd97fa","urls":["bzz-raw://8084aa71a4cc7d2980972412a88fe4f114869faea3fefa5436431644eb5c0287","dweb:/ipfs/Qmbqfs5dRdPvHVKY8kTaeyc65NdqXRQwRK7h9s5UJEhD1p"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/introspection/IERC165.sol":{"keccak256":"0x79796192ec90263f21b464d5bc90b777a525971d3de8232be80d9c4f9fb353b8","urls":["bzz-raw://f6fda447a62815e8064f47eff0dd1cf58d9207ad69b5d32280f8d7ed1d1e4621","dweb:/ipfs/QmfDRc7pxfaXB2Dh9np5Uf29Na3pQ7tafRS684wd3GLjVL"],"license":"MIT"},"src/PoolSharesConversionRate.sol":{"keccak256":"0x09cf1f58af1b25aef737a29f03eaf34659ab4ca397481e1378e2388ee64c5d6d","urls":["bzz-raw://c1b33ed9a8c44266990d18486bd04452386e1e61aa1add3b0678ee6dd24ddbe6","dweb:/ipfs/Qmc74EUNnbzs2FhCS6xT5r1e1E6f2nM63UbhCTcSLckWrF"],"license":"MIT"},"src/interfaces/IPoolSharesConversionRate.sol":{"keccak256":"0xe7ca5b72aee5158674c7cc2cb6b3f96c3a1a1ea8805a82f64262a972fa9cf141","urls":["bzz-raw://f0122d44d1ba0563cfe6d4aff7766a66ac6ea36799a37fdee6a908e755b08b65","dweb:/ipfs/QmZiSUCLMZdeGtKzEVyofDE4vn9rpzZm3aiJ7uS6xwBtcT"],"license":"MIT"}},"version":1},"storageLayout":{"storage":[],"types":{}},"ast":{"absolutePath":"src/PoolSharesConversionRate.sol","id":41069,"exportedSymbols":{"AccessControl":[36816],"Context":[38008],"ERC165":[38595],"IAccessControl":[36899],"IERC20":[37718],"IPoolSharesConversionRate":[41885],"IStETH":[40861],"PoolSharesConversionRate":[41068]},"nodeType":"SourceUnit","src":"32:6129:51","nodes":[{"id":40850,"nodeType":"PragmaDirective","src":"32:23:51","nodes":[],"literals":["solidity","0.8",".29"]},{"id":40851,"nodeType":"ImportDirective","src":"610:72:51","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","file":"../lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol","nameLocation":"-1:-1:-1","scope":41069,"sourceUnit":37719,"symbolAliases":[],"unitAlias":""},{"id":40852,"nodeType":"ImportDirective","src":"683:74:51","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/access/AccessControl.sol","file":"../lib/openzeppelin-contracts/contracts/access/AccessControl.sol","nameLocation":"-1:-1:-1","scope":41069,"sourceUnit":36817,"symbolAliases":[],"unitAlias":""},{"id":40853,"nodeType":"ImportDirective","src":"758:52:51","nodes":[],"absolutePath":"src/interfaces/IPoolSharesConversionRate.sol","file":"./interfaces/IPoolSharesConversionRate.sol","nameLocation":"-1:-1:-1","scope":41069,"sourceUnit":41886,"symbolAliases":[],"unitAlias":""},{"id":40861,"nodeType":"ContractDefinition","src":"883:110:51","nodes":[{"id":40860,"nodeType":"FunctionDefinition","src":"906:85:51","nodes":[],"functionSelector":"7a28fb88","implemented":false,"kind":"function","modifiers":[],"name":"getPooledEthByShares","nameLocation":"915:20:51","parameters":{"id":40856,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40855,"mutability":"mutable","name":"_sharesAmount","nameLocation":"944:13:51","nodeType":"VariableDeclaration","scope":40860,"src":"936:21:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40854,"name":"uint256","nodeType":"ElementaryTypeName","src":"936:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"935:23:51"},"returnParameters":{"id":40859,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40858,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":40860,"src":"982:7:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40857,"name":"uint256","nodeType":"ElementaryTypeName","src":"982:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"981:9:51"},"scope":40861,"stateMutability":"view","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"IStETH","contractDependencies":[],"contractKind":"interface","fullyImplemented":false,"linearizedBaseContracts":[40861],"name":"IStETH","nameLocation":"893:6:51","scope":41069,"usedErrors":[],"usedEvents":[]},{"id":41068,"nodeType":"ContractDefinition","src":"1377:4783:51","nodes":[{"id":40869,"nodeType":"VariableDeclaration","src":"1492:44:51","nodes":[],"constant":true,"functionSelector":"68c20057","mutability":"constant","name":"MAINNET_CHAIN_ID","nameLocation":"1516:16:51","scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40867,"name":"uint256","nodeType":"ElementaryTypeName","src":"1492:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31","id":40868,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1535:1:51","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"visibility":"public"},{"id":40872,"nodeType":"VariableDeclaration","src":"1542:56:51","nodes":[],"constant":true,"functionSelector":"b729e72f","mutability":"constant","name":"MAINNET_TEST_CHAIN_ID","nameLocation":"1566:21:51","scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40870,"name":"uint256","nodeType":"ElementaryTypeName","src":"1542:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3131313535313131","id":40871,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1590:8:51","typeDescriptions":{"typeIdentifier":"t_rational_11155111_by_1","typeString":"int_const 11155111"},"value":"11155111"},"visibility":"public"},{"id":40875,"nodeType":"VariableDeclaration","src":"1743:30:51","nodes":[],"baseFunctions":[41884],"constant":false,"documentation":{"id":40873,"nodeType":"StructuredDocumentation","src":"1653:85:51","text":" @dev The stETH token contract being tracked (only relevant on L1)."},"functionSelector":"c1fe3e48","mutability":"immutable","name":"stETH","nameLocation":"1768:5:51","scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":40874,"name":"address","nodeType":"ElementaryTypeName","src":"1743:7:51","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"public"},{"id":40878,"nodeType":"VariableDeclaration","src":"1963:53:51","nodes":[],"baseFunctions":[41878],"constant":false,"documentation":{"id":40876,"nodeType":"StructuredDocumentation","src":"1780:178:51","text":" @dev On L1: The initial ETH equivalent for 1e18 shares of stETH at deployment.\n      On L2: Not used for calculation; _yieldFactor is updated externally."},"functionSelector":"e8c39cb3","mutability":"immutable","name":"initialEthEquivalentPerShare","nameLocation":"1988:28:51","scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40877,"name":"uint256","nodeType":"ElementaryTypeName","src":"1963:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"public"},{"id":40881,"nodeType":"VariableDeclaration","src":"2225:29:51","nodes":[],"constant":false,"documentation":{"id":40879,"nodeType":"StructuredDocumentation","src":"2024:196:51","text":" @dev Stores the current yield factor.\n      On L1, this is implicitly defined by stETH's share value changes.\n      On L2, this is explicitly set by an updater role."},"mutability":"mutable","name":"_yieldFactor","nameLocation":"2242:12:51","scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40880,"name":"uint256","nodeType":"ElementaryTypeName","src":"2225:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"id":40886,"nodeType":"VariableDeclaration","src":"2282:90:51","nodes":[],"constant":true,"functionSelector":"d5648d8c","mutability":"constant","name":"YIELD_FACTOR_UPDATER_ROLE","nameLocation":"2306:25:51","scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":40882,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2282:7:51","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"value":{"arguments":[{"hexValue":"5949454c445f464143544f525f555044415445525f524f4c45","id":40884,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2344:27:51","typeDescriptions":{"typeIdentifier":"t_stringliteral_6349981c8f973aae243626fb13628338972392c22bccc395c05a43c57e7f2439","typeString":"literal_string \"YIELD_FACTOR_UPDATER_ROLE\""},"value":"YIELD_FACTOR_UPDATER_ROLE"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_stringliteral_6349981c8f973aae243626fb13628338972392c22bccc395c05a43c57e7f2439","typeString":"literal_string \"YIELD_FACTOR_UPDATER_ROLE\""}],"id":40883,"name":"keccak256","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-8,"src":"2334:9:51","typeDescriptions":{"typeIdentifier":"t_function_keccak256_pure$_t_bytes_memory_ptr_$returns$_t_bytes32_$","typeString":"function (bytes memory) pure returns (bytes32)"}},"id":40885,"isConstant":false,"isLValue":false,"isPure":true,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2334:38:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"id":40891,"nodeType":"VariableDeclaration","src":"2471:56:51","nodes":[],"baseFunctions":[41860],"constant":true,"documentation":{"id":40887,"nodeType":"StructuredDocumentation","src":"2380:86:51","text":" @dev The precision factor used for yield calculations (e.g., 1e18)."},"functionSelector":"a42c69a9","mutability":"constant","name":"FACTOR_PRECISION","nameLocation":"2504:16:51","overrides":{"id":40889,"nodeType":"OverrideSpecifier","overrides":[],"src":"2495:8:51"},"scope":41068,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40888,"name":"uint256","nodeType":"ElementaryTypeName","src":"2471:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"31653138","id":40890,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2523:4:51","typeDescriptions":{"typeIdentifier":"t_rational_1000000000000000000_by_1","typeString":"int_const 1000000000000000000"},"value":"1e18"},"visibility":"public"},{"id":40893,"nodeType":"ErrorDefinition","src":"2556:24:51","nodes":[],"errorSelector":"afe6d043","name":"InitialRateZero","nameLocation":"2562:15:51","parameters":{"id":40892,"nodeType":"ParameterList","parameters":[],"src":"2577:2:51"}},{"id":40895,"nodeType":"ErrorDefinition","src":"2585:25:51","nodes":[],"errorSelector":"fff12314","name":"StEthAddressZero","nameLocation":"2591:16:51","parameters":{"id":40894,"nodeType":"ParameterList","parameters":[],"src":"2607:2:51"}},{"id":40897,"nodeType":"ErrorDefinition","src":"2615:38:51","nodes":[],"errorSelector":"e2f5ba25","name":"YieldFactorDecreaseNotAllowed","nameLocation":"2621:29:51","parameters":{"id":40896,"nodeType":"ParameterList","parameters":[],"src":"2650:2:51"}},{"id":40899,"nodeType":"ErrorDefinition","src":"2658:19:51","nodes":[],"errorSelector":"48e9beb7","name":"NotL2Chain","nameLocation":"2664:10:51","parameters":{"id":40898,"nodeType":"ParameterList","parameters":[],"src":"2674:2:51"}},{"id":40901,"nodeType":"ErrorDefinition","src":"2682:19:51","nodes":[],"errorSelector":"eb8949ca","name":"NotL1Chain","nameLocation":"2688:10:51","parameters":{"id":40900,"nodeType":"ParameterList","parameters":[],"src":"2698:2:51"}},{"id":40981,"nodeType":"FunctionDefinition","src":"3163:954:51","nodes":[],"body":{"id":40980,"nodeType":"Block","src":"3214:903:51","nodes":[],"statements":[{"expression":{"arguments":[{"id":40910,"name":"DEFAULT_ADMIN_ROLE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":36550,"src":"3235:18:51","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":40911,"name":"_admin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40906,"src":"3255:6:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_address","typeString":"address"}],"id":40909,"name":"_grantRole","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":36777,"src":"3224:10:51","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$_t_address_$returns$_t_bool_$","typeString":"function (bytes32,address) returns (bool)"}},"id":40912,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3224:38:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":40913,"nodeType":"ExpressionStatement","src":"3224:38:51"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":40922,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40917,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":40914,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"3277:5:51","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":40915,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3283:7:51","memberName":"chainid","nodeType":"MemberAccess","src":"3277:13:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":40916,"name":"MAINNET_CHAIN_ID","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40869,"src":"3294:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3277:33:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40921,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":40918,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"3314:5:51","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":40919,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3320:7:51","memberName":"chainid","nodeType":"MemberAccess","src":"3314:13:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":40920,"name":"MAINNET_TEST_CHAIN_ID","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40872,"src":"3331:21:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3314:38:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"3277:75:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":40978,"nodeType":"Block","src":"3784:327:51","statements":[{"expression":{"id":40963,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":40958,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40875,"src":"3827:5:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"hexValue":"30","id":40961,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3843:1:51","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":40960,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3835:7:51","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":40959,"name":"address","nodeType":"ElementaryTypeName","src":"3835:7:51","typeDescriptions":{}}},"id":40962,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3835:10:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3827:18:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":40964,"nodeType":"ExpressionStatement","src":"3827:18:51"},{"expression":{"id":40967,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":40965,"name":"initialEthEquivalentPerShare","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40878,"src":"3877:28:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"30","id":40966,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3908:1:51","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3877:32:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":40968,"nodeType":"ExpressionStatement","src":"3877:32:51"},{"expression":{"id":40971,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":40969,"name":"_yieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40881,"src":"3941:12:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":40970,"name":"FACTOR_PRECISION","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40891,"src":"3956:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3941:31:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":40972,"nodeType":"ExpressionStatement","src":"3941:31:51"},{"expression":{"arguments":[{"id":40974,"name":"YIELD_FACTOR_UPDATER_ROLE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40886,"src":"4030:25:51","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":40975,"name":"_admin","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40906,"src":"4057:6:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_address","typeString":"address"}],"id":40973,"name":"_grantRole","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":36777,"src":"4019:10:51","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_bytes32_$_t_address_$returns$_t_bool_$","typeString":"function (bytes32,address) returns (bool)"}},"id":40976,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4019:45:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":40977,"nodeType":"ExpressionStatement","src":"4019:45:51"}]},"id":40979,"nodeType":"IfStatement","src":"3273:838:51","trueBody":{"id":40957,"nodeType":"Block","src":"3354:424:51","statements":[{"condition":{"commonType":{"typeIdentifier":"t_address","typeString":"address"},"id":40928,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":40923,"name":"_stETHAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40904,"src":"3372:13:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"arguments":[{"hexValue":"30","id":40926,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3397:1:51","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":40925,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3389:7:51","typeDescriptions":{"typeIdentifier":"t_type$_t_address_$","typeString":"type(address)"},"typeName":{"id":40924,"name":"address","nodeType":"ElementaryTypeName","src":"3389:7:51","typeDescriptions":{}}},"id":40927,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3389:10:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3372:27:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":40932,"nodeType":"IfStatement","src":"3368:58:51","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":40929,"name":"StEthAddressZero","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40895,"src":"3408:16:51","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":40930,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3408:18:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":40931,"nodeType":"RevertStatement","src":"3401:25:51"}},{"expression":{"id":40935,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":40933,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40875,"src":"3441:5:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":40934,"name":"_stETHAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40904,"src":"3449:13:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"src":"3441:21:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":40936,"nodeType":"ExpressionStatement","src":"3441:21:51"},{"assignments":[40938],"declarations":[{"constant":false,"id":40938,"mutability":"mutable","name":"initialRate","nameLocation":"3485:11:51","nodeType":"VariableDeclaration","scope":40957,"src":"3477:19:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40937,"name":"uint256","nodeType":"ElementaryTypeName","src":"3477:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":40945,"initialValue":{"arguments":[{"id":40943,"name":"FACTOR_PRECISION","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40891,"src":"3542:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":40940,"name":"_stETHAddress","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40904,"src":"3506:13:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":40939,"name":"IStETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40861,"src":"3499:6:51","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IStETH_$40861_$","typeString":"type(contract IStETH)"}},"id":40941,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3499:21:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IStETH_$40861","typeString":"contract IStETH"}},"id":40942,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3521:20:51","memberName":"getPooledEthByShares","nodeType":"MemberAccess","referencedDeclaration":40860,"src":"3499:42:51","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) view external returns (uint256)"}},"id":40944,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3499:60:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3477:82:51"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40948,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":40946,"name":"initialRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40938,"src":"3577:11:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":40947,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3592:1:51","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"3577:16:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":40952,"nodeType":"IfStatement","src":"3573:46:51","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":40949,"name":"InitialRateZero","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40893,"src":"3602:15:51","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":40950,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3602:17:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":40951,"nodeType":"RevertStatement","src":"3595:24:51"}},{"expression":{"id":40955,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":40953,"name":"initialEthEquivalentPerShare","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40878,"src":"3646:28:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":40954,"name":"initialRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40938,"src":"3677:11:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"3646:42:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":40956,"nodeType":"ExpressionStatement","src":"3646:42:51"}]}}]},"documentation":{"id":40902,"nodeType":"StructuredDocumentation","src":"2735:423:51","text":" @dev Sets up the contract based on the chain ID.\n @param _stETHAddress The address of the stETH token contract (used on L1).\n @param _admin The address to grant DEFAULT_ADMIN_ROLE and YIELD_FACTOR_UPDATER_ROLE (on L2).\n Requirements for L1 deployment:\n - `_stETHAddress` cannot be the zero address.\n - The initial call to `getPooledEthByShares` must return a non-zero value."},"implemented":true,"kind":"constructor","modifiers":[],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":40907,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40904,"mutability":"mutable","name":"_stETHAddress","nameLocation":"3183:13:51","nodeType":"VariableDeclaration","scope":40981,"src":"3175:21:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":40903,"name":"address","nodeType":"ElementaryTypeName","src":"3175:7:51","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":40906,"mutability":"mutable","name":"_admin","nameLocation":"3206:6:51","nodeType":"VariableDeclaration","scope":40981,"src":"3198:14:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":40905,"name":"address","nodeType":"ElementaryTypeName","src":"3198:7:51","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"3174:39:51"},"returnParameters":{"id":40908,"nodeType":"ParameterList","parameters":[],"src":"3214:0:51"},"scope":41068,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":41030,"nodeType":"FunctionDefinition","src":"4565:675:51","nodes":[],"body":{"id":41029,"nodeType":"Block","src":"4644:596:51","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":40996,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40991,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":40988,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4658:5:51","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":40989,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4664:7:51","memberName":"chainid","nodeType":"MemberAccess","src":"4658:13:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":40990,"name":"MAINNET_CHAIN_ID","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40869,"src":"4675:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4658:33:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":40995,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":40992,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"4695:5:51","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":40993,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4701:7:51","memberName":"chainid","nodeType":"MemberAccess","src":"4695:13:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":40994,"name":"MAINNET_TEST_CHAIN_ID","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40872,"src":"4712:21:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"4695:38:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"4658:75:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":41027,"nodeType":"Block","src":"5137:97:51","statements":[{"expression":{"id":41025,"name":"_yieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40881,"src":"5211:12:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":40987,"id":41026,"nodeType":"Return","src":"5204:19:51"}]},"id":41028,"nodeType":"IfStatement","src":"4654:580:51","trueBody":{"id":41024,"nodeType":"Block","src":"4735:396:51","statements":[{"assignments":[40998],"declarations":[{"constant":false,"id":40998,"mutability":"mutable","name":"initialRate","nameLocation":"4757:11:51","nodeType":"VariableDeclaration","scope":41024,"src":"4749:19:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40997,"name":"uint256","nodeType":"ElementaryTypeName","src":"4749:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":41000,"initialValue":{"id":40999,"name":"initialEthEquivalentPerShare","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40878,"src":"4771:28:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4749:50:51"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41003,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":41001,"name":"initialRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40998,"src":"4910:11:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":41002,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4925:1:51","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"4910:16:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":41007,"nodeType":"IfStatement","src":"4906:46:51","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":41004,"name":"InitialRateZero","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40893,"src":"4935:15:51","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":41005,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4935:17:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":41006,"nodeType":"RevertStatement","src":"4928:24:51"}},{"assignments":[41009],"declarations":[{"constant":false,"id":41009,"mutability":"mutable","name":"currentRate","nameLocation":"4987:11:51","nodeType":"VariableDeclaration","scope":41024,"src":"4979:19:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":41008,"name":"uint256","nodeType":"ElementaryTypeName","src":"4979:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":41016,"initialValue":{"arguments":[{"id":41014,"name":"FACTOR_PRECISION","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40891,"src":"5036:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"arguments":[{"id":41011,"name":"stETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40875,"src":"5008:5:51","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":41010,"name":"IStETH","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40861,"src":"5001:6:51","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_IStETH_$40861_$","typeString":"type(contract IStETH)"}},"id":41012,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5001:13:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_contract$_IStETH_$40861","typeString":"contract IStETH"}},"id":41013,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5015:20:51","memberName":"getPooledEthByShares","nodeType":"MemberAccess","referencedDeclaration":40860,"src":"5001:34:51","typeDescriptions":{"typeIdentifier":"t_function_external_view$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) view external returns (uint256)"}},"id":41015,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5001:52:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4979:74:51"},{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41022,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41019,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":41017,"name":"currentRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41009,"src":"5075:11:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":41018,"name":"FACTOR_PRECISION","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40891,"src":"5089:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5075:30:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":41020,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"5074:32:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":41021,"name":"initialRate","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40998,"src":"5109:11:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5074:46:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":40987,"id":41023,"nodeType":"Return","src":"5067:53:51"}]}}]},"baseFunctions":[41854],"documentation":{"id":40982,"nodeType":"StructuredDocumentation","src":"4163:397:51","text":" @notice Calculates the current yield factor based on stETH rebasing.\n @dev The factor represents the growth since the initial deposit, scaled by FACTOR_PRECISION.\n      A factor of 1 * FACTOR_PRECISION means no yield yet.\n      A factor of 1.05 * FACTOR_PRECISION means 5% yield.\n @return yieldFactor The current yield factor, scaled by FACTOR_PRECISION."},"functionSelector":"efa7fa5d","implemented":true,"kind":"function","modifiers":[],"name":"getYieldFactor","nameLocation":"4574:14:51","overrides":{"id":40984,"nodeType":"OverrideSpecifier","overrides":[],"src":"4605:8:51"},"parameters":{"id":40983,"nodeType":"ParameterList","parameters":[],"src":"4588:2:51"},"returnParameters":{"id":40987,"nodeType":"ParameterList","parameters":[{"constant":false,"id":40986,"mutability":"mutable","name":"yieldFactor","nameLocation":"4631:11:51","nodeType":"VariableDeclaration","scope":41030,"src":"4623:19:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":40985,"name":"uint256","nodeType":"ElementaryTypeName","src":"4623:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4622:21:51"},"scope":41068,"stateMutability":"view","virtual":false,"visibility":"external"},{"id":41067,"nodeType":"FunctionDefinition","src":"5570:588:51","nodes":[],"body":{"id":41066,"nodeType":"Block","src":"5668:490:51","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":41047,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41042,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":41039,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5682:5:51","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":41040,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5688:7:51","memberName":"chainid","nodeType":"MemberAccess","src":"5682:13:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":41041,"name":"MAINNET_CHAIN_ID","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40869,"src":"5699:16:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5682:33:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":41046,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":41043,"name":"block","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-4,"src":"5719:5:51","typeDescriptions":{"typeIdentifier":"t_magic_block","typeString":"block"}},"id":41044,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5725:7:51","memberName":"chainid","nodeType":"MemberAccess","src":"5719:13:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":41045,"name":"MAINNET_TEST_CHAIN_ID","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40872,"src":"5736:21:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"5719:38:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"5682:75:51","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":41052,"nodeType":"IfStatement","src":"5678:158:51","trueBody":{"id":41051,"nodeType":"Block","src":"5759:77:51","statements":[{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"id":41048,"name":"NotL2Chain","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40899,"src":"5780:10:51","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$_t_error_$","typeString":"function () pure returns (error)"}},"id":41049,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5780:12:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_error","typeString":"error"}},"id":41050,"nodeType":"RevertStatement","src":"5773:19:51"}]}},{"assignments":[41054],"declarations":[{"constant":false,"id":41054,"mutability":"mutable","name":"oldYieldFactor","nameLocation":"6018:14:51","nodeType":"VariableDeclaration","scope":41066,"src":"6010:22:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":41053,"name":"uint256","nodeType":"ElementaryTypeName","src":"6010:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":41056,"initialValue":{"id":41055,"name":"_yieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40881,"src":"6035:12:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"6010:37:51"},{"expression":{"id":41059,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":41057,"name":"_yieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40881,"src":"6057:12:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":41058,"name":"newYieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41033,"src":"6072:14:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6057:29:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":41060,"nodeType":"ExpressionStatement","src":"6057:29:51"},{"eventCall":{"arguments":[{"id":41062,"name":"oldYieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41054,"src":"6120:14:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":41063,"name":"newYieldFactor","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41033,"src":"6136:14:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":41061,"name":"YieldFactorUpdated","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":41866,"src":"6101:18:51","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint256_$_t_uint256_$returns$__$","typeString":"function (uint256,uint256)"}},"id":41064,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6101:50:51","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":41065,"nodeType":"EmitStatement","src":"6096:55:51"}]},"baseFunctions":[41872],"documentation":{"id":41031,"nodeType":"StructuredDocumentation","src":"5246:319:51","text":" @notice Updates the yield factor on L2 chains.\n @dev Callable only by addresses with YIELD_FACTOR_UPDATER_ROLE.\n      The new yield factor cannot be less than the current one.\n      This function will revert if called on L1.\n @param newYieldFactor The new yield factor to set."},"functionSelector":"2bac8118","implemented":true,"kind":"function","modifiers":[{"arguments":[{"id":41036,"name":"YIELD_FACTOR_UPDATER_ROLE","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":40886,"src":"5641:25:51","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"id":41037,"kind":"modifierInvocation","modifierName":{"id":41035,"name":"onlyRole","nameLocations":["5632:8:51"],"nodeType":"IdentifierPath","referencedDeclaration":36561,"src":"5632:8:51"},"nodeType":"ModifierInvocation","src":"5632:35:51"}],"name":"updateL2YieldFactor","nameLocation":"5579:19:51","parameters":{"id":41034,"nodeType":"ParameterList","parameters":[{"constant":false,"id":41033,"mutability":"mutable","name":"newYieldFactor","nameLocation":"5607:14:51","nodeType":"VariableDeclaration","scope":41067,"src":"5599:22:51","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":41032,"name":"uint256","nodeType":"ElementaryTypeName","src":"5599:7:51","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5598:24:51"},"returnParameters":{"id":41038,"nodeType":"ParameterList","parameters":[],"src":"5668:0:51"},"scope":41068,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[{"baseName":{"id":40863,"name":"IPoolSharesConversionRate","nameLocations":["1414:25:51"],"nodeType":"IdentifierPath","referencedDeclaration":41885,"src":"1414:25:51"},"id":40864,"nodeType":"InheritanceSpecifier","src":"1414:25:51"},{"baseName":{"id":40865,"name":"AccessControl","nameLocations":["1441:13:51"],"nodeType":"IdentifierPath","referencedDeclaration":36816,"src":"1441:13:51"},"id":40866,"nodeType":"InheritanceSpecifier","src":"1441:13:51"}],"canonicalName":"PoolSharesConversionRate","contractDependencies":[],"contractKind":"contract","documentation":{"id":40862,"nodeType":"StructuredDocumentation","src":"995:381:51","text":" @title PoolSharesConversionRate\n @dev On L1: Tracks the yield factor of stETH by comparing the current ETH value of a fixed number of shares\n      to its value at deployment time. This method is secure against arbitrary token transfers to the contract.\n @dev On L2: Stores a yield factor that can be updated by an authorized role, typically reflecting L1's factor."},"fullyImplemented":true,"linearizedBaseContracts":[41068,36816,38595,38607,36899,38008,41885],"name":"PoolSharesConversionRate","nameLocation":"1386:24:51","scope":41069,"usedErrors":[36826,36829,40893,40895,40897,40899,40901],"usedEvents":[36838,36847,36856,41866]}],"license":"MIT"},"id":51}